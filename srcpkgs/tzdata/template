# Template build file for 'tzdata'.
pkgname=tzdata
wrksrc=${pkgname}
create_wrksrc=yes
version=2013f
revision=1
homepage="http://www.iana.org/time-zones"
short_desc="Time zone and daylight-saving time data"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
distfiles="http://www.iana.org/time-zones/repository/releases/tzdata${version}.tar.gz"
checksum=5b72ed29bea75e0b59cbd3f575db0aac62f96a2a36e652725f674a92a95d4ada
long_desc="
 This package contains data required for the implementation of standard
 local time for many representative locations around the globe. It is
 updated periodically to reflect changes made by political bodies to time
 zone boundaries, UTC offsets, and daylight-saving rules."

do_install() {
	local timezones="africa antarctica asia australasia europe northamerica \
		southamerica pacificnew etcetera backward systemv \
		factory solar87 solar88 solar89"

	zic -y ./yearistype -d ${DESTDIR}/usr/share/zoneinfo ${timezones}
	zic -y ./yearistype -d ${DESTDIR}/usr/share/zoneinfo/posix ${timezones}

	# generate leapseconds file
	awk -f leapseconds.awk leap-seconds.list > leapseconds && echo "leapseconds file generated"
	zic -y ./yearistype -d ${DESTDIR}/usr/share/zoneinfo/right -L leapseconds ${timezones}
	zic -y ./yearistype -d ${DESTDIR}/usr/share/zoneinfo -p America/New_York
	install -m444 -t ${DESTDIR}/usr/share/zoneinfo iso3166.tab zone.tab
}

tzdata_package() {
	noarch="yes"
	pkg_install() {
		vmove all
	}
}
