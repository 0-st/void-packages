# Template file for 'iptables'
pkgname=iptables
version=1.4.16.2
revision=1
build_style=gnu-configure
configure_args="--enable-libipq --enable-shared --disable-static"
subpackages="$pkgname-devel"
short_desc="Linux IPv[46] packet filtering ruleset"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.netfilter.org/"
license="GPL-2"
distfiles="$homepage/projects/iptables/files/$pkgname-$version.tar.bz2"
checksum=4468ce7e1d68349a8e30f26110eb7969dbfdbf497d6c53758883123b3f2d6f6e
long_desc="
 iptables is the userspace command line program used to configure the Linux
 IPv4 packet filtering ruleset. It is targeted towards system administrators.

 Since Network Address Translation is also configured from the packet filter
 ruleset, iptables is used for this, too.

 The iptables package also includes ip6tables. ip6tables is used for
 configuring the IPv6 packet filter."

post_install() {
	# systemd services.
	vmkdir usr/lib/systemd/system
	install -m644 ${FILESDIR}/*.service ${DESTDIR}/usr/lib/systemd/system
	vinstall ${FILESDIR}/iptables-flush.scripts 755 \
		usr/lib/systemd/scripts iptables-flush

	# Configuration files and rules.
	for f in empty.rules simple_firewall.rules; do
		vinstall ${FILESDIR}/${f} 644 etc/iptables
	done
	for f in filter mangle nat raw security; do
		vinstall ${FILESDIR}/empty-${f}.rules 644 \
			var/lib/iptables empty-${f}.rules
	done
}
