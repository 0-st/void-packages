# Template file for 'base-files'
pkgname=base-files
version=0.44
build_style=custom-install
short_desc="Vanilla GNU/Linux base system files"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="https://vanilla.github.com/"
license="public domain"
long_desc="
 This package installs the base system files that aren't installed by any
 other package and are required on any GNU/Linux system."

replaces="xbps-base-files>=0"
noarch=yes
bootstrap=yes

conf_files="
/etc/profile
/etc/hosts
/etc/host.conf
/etc/securetty
/etc/skel/.bash_profile
/etc/skel/.bash_logout
/etc/skel/.bashrc
/etc/issue"

Add_dependency full base-directories
Add_dependency full xbps-triggers

do_install()
{
	#
	# Install misc config files.
	#
	for f in bash_logout bash_profile bashrc; do
		install -D -m644 ${FILESDIR}/dot_${f} ${DESTDIR}/etc/skel/.${f}
	done

	install -m644 ${FILESDIR}/profile ${DESTDIR}/etc
	install -m600 ${FILESDIR}/securetty ${DESTDIR}/etc
	install -m644 ${FILESDIR}/hosts ${DESTDIR}/etc
	install -m644 ${FILESDIR}/host.conf ${DESTDIR}/etc
	install -m644 ${FILESDIR}/issue ${DESTDIR}/etc
	install -m644 ${FILESDIR}/lsb-release ${DESTDIR}/etc

	install -d ${DESTDIR}/etc/profile.d
	install -m644 ${FILESDIR}/*.sh ${DESTDIR}/etc/profile.d
	install -m644 ${FILESDIR}/DIR_COLORS* ${DESTDIR}/etc

	install -d ${DESTDIR}/etc/modprobe.d
	install -m644 ${FILESDIR}/usb-load-ehci-first \
		${DESTDIR}/etc/modprobe.d/usb-load-ehci-first.conf
	install -m644 ${FILESDIR}/blacklist.conf ${DESTDIR}/etc/modprobe.d

	#
	# Install comman licenses, from Debian.
	#
	install -d ${DESTDIR}/usr/share/licenses
	install -m644 ${FILESDIR}/licenses/* ${DESTDIR}/usr/share/licenses

	# vkpurge
	vinstall ${FILESDIR}/vkpurge.sh 755 sbin vkpurge
}
