# Template file for 'wine-unstable'
__pkgname=wine
pkgname=${__pkgname}-unstable
__majminver=1.4
__rcver=rc4
__otherversion=${__majminver}-${__rcver}
version=${__majminver}.${__rcver}
wrksrc=${__pkgname}-${__otherversion}
build_style=gnu-configure
configure_args="--with-x"
homepage="http://www.winehq.org/"
distfiles="http://ibiblio.org/pub/linux/system/emulators/${__pkgname}/${__pkgname}-${__otherversion}.tar.bz2"
short_desc="Run Windows applications on Linux, BSD, Solaris and Mac OS X. (unstable)"
maintainer="davehome <davehome@redthumb.info.tm>"
license="LGPL-2.1"
checksum=3105c4f7e0a3c326c3dc82257b6af96dd5db6cc2afbe4b8a936563d2da04d1ec
long_desc="
 Wine lets you run Windows software on other operating systems. With Wine,
 you can install and run these applications just like you would in
 Windows. (unstable)"

only_for_archs=i686
build_requires=11
replaces="wine>=0 wine-unstable>=1.4-rc4"
provides="wine-$version"
conflicts="wine>=0"
subpackages="lib$pkgname $pkgname-devel"

gtk_iconcache_dirs="/usr/share/icons/hicolor"

# XXX OpenCL
# XXX dbus (dynamic device support) - I cannot make this work.
# XXX libsane (scanner support)
# XXX libcapi20 (ISDN support)
# XXX libcups (printing support)

Add_dependency run libwine-unstable

Add_dependency build flex
Add_dependency build lcms-devel
Add_dependency build zlib-devel
Add_dependency build MesaLib-devel
Add_dependency build libSM-devel
Add_dependency build libXext-devel
Add_dependency build libX11-devel
Add_dependency build libXpm-devel
Add_dependency build libXinerama-devel
Add_dependency build libXcomposite-devel
Add_dependency build libXmu-devel
Add_dependency build libXxf86vm-devel
Add_dependency build libXcursor-devel
Add_dependency build libXrandr-devel
Add_dependency build libXdamage-devel
Add_dependency build libXi-devel
Add_dependency build libldap-devel
Add_dependency build alsa-lib-devel
Add_dependency build libgphoto2-devel
Add_dependency build libxml2-devel
Add_dependency build libxslt-devel
Add_dependency build glib-devel
Add_dependency build gst-plugins-base-devel
Add_dependency build freetype-devel
Add_dependency build mpg123-devel
Add_dependency build libgsm-devel
Add_dependency build libopenal-devel
Add_dependency build giflib-devel
Add_dependency build libpng-devel
Add_dependency build v4l-utils-devel
Add_dependency build fontconfig-devel
Add_dependency build gnutls-devel


Add_dependency build prelink	# WINE only needs it to build the DLLs,
				# Otherwise, throws a nasty warning.

Add_dependency full desktop-file-utils
Add_dependency full hicolor-icon-theme
Add_dependency full liberation-fonts-ttf # else stuff appears in hebrew
Add_dependency full fontconfig

pre_configure()
{
	sed -i 's/\(libncurses\)/\1w/g' configure
}
