# Template file for 'wine-unstable'
__pkgname=wine
pkgname=${__pkgname}-unstable
version=1.5.14
revision=2
wrksrc=${__pkgname}-${version}
build_style=gnu-configure
configure_args="--with-x"
depends="libwine-unstable-${version}_${revision}"
short_desc="Run Windows apps on Linux, BSD, Solaris and Mac OS X. (unstable)"
maintainer="davehome <davehome@redthumb.info.tm>"
license="LGPL-2.1"
homepage="http://www.winehq.org/"
distfiles="${SOURCEFORGE_SITE}/${__pkgname}/${__pkgname}-${version}.tar.bz2"
checksum=3e70ff0f900bf459dd6fa767bdac5543a27b76364f8ef89088300b867351df42
long_desc="
 Wine lets you run Windows software on other operating systems. With Wine,
 you can install and run these applications just like you would in
 Windows. (unstable)"

only_for_archs=i686
replaces="wine>=0"
provides="wine-${version}"
conflicts="wine>=0"
subpackages="lib${pkgname} ${pkgname}-devel"

# XXX OpenCL
# XXX libcapi20 (ISDN support)
makedepends="flex gettext-devel autoconf lcms-devel zlib-devel ncurses-devel
 glu-devel libSM-devel libXext-devel libX11-devel libXpm-devel
 libXinerama-devel libXcomposite-devel libXmu-devel libXxf86vm-devel
 libXcursor-devel libXrandr-devel libXdamage-devel libXi-devel libldap-devel
 alsa-lib-devel libgphoto2-devel libxml2-devel libxslt-devel glib-devel
 gst-plugins-base-devel freetype-devel mpg123-devel libgsm-devel libopenal-devel
 giflib-devel libpng-devel v4l-utils-devel fontconfig-devel gnutls-devel
 dbus-devel cups-devel sane-devel prelink"

# libOSMesa is loaded with dlopen(3) at runtime
fulldepends="desktop-file-utils hicolor-icon-theme liberation-fonts-ttf
 fontconfig libOSMesa"

pre_configure() {
	autoreconf -fi
	sed -i 's/\(libncurses\)/\1w/g' configure
}
