# Template file for 'libunique1'.
pkgname=libunique1
version=1.1.6
wrksrc="libunique-${version}"
patch_args="-Np1"
distfiles="${GNOME_SITE}/libunique/1.1/libunique-$version.tar.bz2"
build_style=gnu-configure
configure_args="--disable-static --disable-dbus"
short_desc="Library for writing single instance applications (GTK+2)"
maintainer="xtraeme <xtraeme@gmail.org>"
homepage="http://live.gnome.org/LibUnique"
license="LGPL-2.1"
checksum=e5c8041cef8e33c55732f06a292381cb345db946cf792a4ae18aa5c66cdd4fbb
long_desc="
 Unique is a library for writing single instance application. If you launch a
 single instance application twice, the second instance will either just quit
 or will send a message to the running instance.

 Unique makes it easy to write this kind of applications, by providing a base
 class, taking care of all the IPC machinery needed to send messages to a
 running instance, and also handling the startup notification side.

 Unique aims to replace the BaconMessageConnection code that has been copied
 by many projects and the code using Bonobo and D-Bus.

 This package is built against GTK+2 toolkit, unlike libunique which uses
 the GTK+3 toolkit."

subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run gtk+
Add_dependency run atk
Add_dependency run glib
Add_dependency run pango
Add_dependency run gdk-pixbuf
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run libX11

Add_dependency build automake
Add_dependency build pkg-config
Add_dependency build gobject-introspection
Add_dependency build gtk+-devel

pre_configure() {
	# Fix build with glib 2.30.
	for f in $(find ${wrksrc} -name *.[ch]); do
		sed -i -s "s|G_CONST_RETURN|const|g" "$f"
	done
	autoreconf -fi
}
