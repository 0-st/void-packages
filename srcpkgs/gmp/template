# Template build file for 'gmp'
pkgname=gmp
version=5.0.3
homepage="http://gmplib.org/"
distfiles="${GNU_SITE}/gmp/gmp-${version}.tar.bz2"
build_style=gnu-configure
# Build with -fexceptions as suggested by ppl.
CPPFLAGS="-fexceptions"
if [ "${XBPS_MACHINE}" = "i686" ]; then
	configure_args="ABI=32"
fi
configure_args="${configure_args} --enable-cxx --enable-mpbsd
--build=${XBPS_MACHINE}-unknown-linux-gnu"
short_desc="Library for arbitrary precision arithmetic"
maintainer="Juan RP <xtraeme@gmail.com>"
license="LGPL-3"
checksum=dcafe9989c7f332b373e1f766af8e9cd790fc802fdec422a1910a6ef783480e3
long_desc="
 GNU MP is a library for arbitrary precision arithmetic, operating on signed
 integers, rational numbers, and floating point numbers.  It has a rich set
 of functions, and the functions have a regular interface.

 GNU MP is designed to be as fast as possible, both for small operands and for
 huge operands.  The speed is achieved by using fullwords as the basic
 arithmetic type, by using fast algorithms, by carefully optimized assembly
 code for the most common inner loops for a lots of CPUs, and by a general
 emphasis on speed (instead of simplicity or elegance).

 The speed of GNU MP is believed to be faster than any other similar library.
 The advantage for GNU MP increases with the operand sizes for certain
 operations, since GNU MP in many cases has asymptotically faster algorithms."

bootstrap=yes
subpackages="gmp-devel"
Add_dependency build m4

if [ -n "$BOOTSTRAP_PKG_REBUILD" ]; then
	Add_dependency build gettext
fi

post_install() {
	# Required for multilib build.
	if grep -q "\-m32" ${DESTDIR}/usr/include/gmp.h; then
		sed -i "s|\-m32 ||g" ${DESTDIR}/usr/include/gmp.h
	fi
}
