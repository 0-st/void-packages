# Template file for 'mdocml'
pkgname=mdocml
version=1.12.0
revision=1
homepage="http://mdocml.bsd.lv"
distfiles="${homepage}/snapshots/mdocml-$version.tar.gz"
build_style=gnu_makefile
make_build_args="DBLIB=-ldb"
make_install_args="MANDIR=/usr/share/man BINDIR=/usr/bin
EXAMPLEDIR=/usr/share/examples/mdocml PREFIX=/usr"
short_desc="mdoc macro compiler"
maintainer="Juan RP <xtraeme@gmail.com>"
license="ISC"
checksum=887dbe722e459ce60a6f1e29e278f68932fab9592768b9b324503ba80fe17a5e
long_desc="
 mdocml is a suite of tools compiling -mdoc, the roff macro package of
 choice for BSD manual pages, and -man, the predominant historical package
 for UNIX manuals. The mission of mdocml is to deprecate groff, the GNU roff
 implementation, for displaying -mdoc pages whilst providing token support
 for -man."

Add_dependency run glibc
Add_dependency build db-devel

post_install()
{
	# preconv conflicts with groff, rename it.
	mv ${DESTDIR}/usr/bin/preconv ${DESTDIR}/usr/bin/mandoc-preconv

	# roff.7 conflicts with groff, rename it.
	mv ${DESTDIR}/usr/share/man/man7/roff.7 \
		${DESTDIR}/usr/share/man/man7/mandoc_roff.7
	# preconv.1 conflicts with groff, rename it.
	mv ${DESTDIR}/usr/share/man/man1/preconv.1 \
		${DESTDIR}/usr/share/man/man1/mandoc_preconv.1
	# Remove unused stuff.
	rm -rf ${DESTDIR}/usr/{include,lib}
}
