# Template file for 'compiz-plugins-main'
pkgname=compiz-plugins-main
version=0.9.2.1
distfiles="http://releases.compiz.org/$version/$pkgname-$version.tar.bz2"
build_style=custom-install
short_desc="Compiz Main plugins"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=3fc3f96e9961805364f362b9926555259d55b2f1c69988f253b70f1085c652af
long_desc="
 Compiz is a compositing window manager that uses 3D graphics acceleration
 via OpenGL. It provides various new graphical effects and features on
 any desktop environment, including Gnome and KDE.

 This package contains the Compiz main plugins."

subpackages="$pkgname-devel"

gconf_schemas="
compiz-vpswitch.schemas
compiz-titleinfo.schemas
compiz-ezoom.schemas
compiz-workarounds.schemas
compiz-neg.schemas
compiz-winrules.schemas
compiz-shift.schemas
compiz-put.schemas
compiz-animation.schemas
compiz-scaleaddon.schemas
compiz-mousepoll.schemas
compiz-mag.schemas
compiz-text.schemas
compiz-ring.schemas
compiz-thumbnail.schemas
compiz-resizeinfo.schemas
compiz-colorfilter.schemas
compiz-opacify.schemas
compiz-snap.schemas
compiz-expo.schemas
compiz-staticswitcher.schemas
compiz-session.schemas
compiz-imgjpeg.schemas
compiz-wall.schemas
compiz-kdecompat.schemas"

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run boost
Add_dependency run compiz-core
Add_dependency run libX11
Add_dependency run MesaLib
Add_dependency run libxml2
Add_dependency run libXfixes
Add_dependency run jpeg
Add_dependency run libXext
Add_dependency run cairo
Add_dependency run libXrender
Add_dependency run pango
Add_dependency run glib
Add_dependency run GConf

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build cmake
Add_dependency build compiz-core-devel
Add_dependency build libstdc++-devel
Add_dependency build glibc-devel
Add_dependency build boost-devel
Add_dependency build compiz-core-devel
Add_dependency build libX11-devel
Add_dependency build MesaLib-devel
Add_dependency build libxml2-devel
Add_dependency build libXfixes-devel
Add_dependency build jpeg-devel
Add_dependency build libXext-devel
Add_dependency build cairo-devel
Add_dependency build libXrender-devel
Add_dependency build pango-devel
Add_dependency build glib-devel

do_build()
{
	mkdir -p ${wrksrc}/build && cd ${wrksrc}/build && \
	cmake	-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCOMPIZ_DISABLE_SCHEMAS_INSTALL=yes .. && \
	make ${makejobs} || return 1
}

do_install()
{
	cd ${wrksrc}/build && make DESTDIR=${DESTDIR} install || return 1
}
