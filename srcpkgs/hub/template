# Template file for 'hub'
pkgname=hub
version=2.2.0
revision=2
homepage="http://hub.github.com/"
distfiles="https://github.com/github/hub/archive/v${version}.tar.gz"
hostmakedepends="go"
if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" go-cross-linux"
fi
short_desc="command line tool for Github"
maintainer="Enno Boland <eb@s01.de>"
license="MIT"
checksum=2da1351197eb5696c207f22c69a5422af052d74277b73d0b8661efb9ec1d0eb1
nostrip=yes

do_build() {
	case "$XBPS_TARGET_MACHINE" in
		armv6*) export GOARCH=arm; export GOARM=6;;
		armv7*) export GOARCH=arm; export GOARM=7;;
		i686*) export GOARCH=386;;
		x86_64*) export GOARCH=amd64;;
	esac

	export GOPATH="$PWD/gopath"
	mkdir -p $GOPATH/src/github.com/github
	ln -sf $PWD $GOPATH/src/github.com/github/${pkgname}
	go build -v github.com/github/${pkgname}
}

do_install() {
	vbin ${pkgname}
	vman man/${pkgname}.1
	vlicense LICENSE
}
