# Template file for 'compiz-plugins-extra'
pkgname=compiz-plugins-extra
version=0.9.2
wrksrc=plugins-extra
distfiles="http://releases.compiz.org/$version/$pkgname-$version.tar.bz2"
build_style=custom-install
short_desc="Compiz Extra plugins"
extratainer="Juan RP <xtraeme@gmail.com>"
checksum=1cbf54427d5174fd36291c157bb2303bb3eb5767b0b4ee5409b0643c7f016797
long_desc="
 Compiz is a compositing window manager that uses 3D graphics acceleration
 via OpenGL. It provides various new graphical effects and features on
 any desktop environment, including Gnome and KDE.

 This package contains the Compiz extra plugins."

subpackages="$pkgname-devel"

gconf_schemas="
compiz-td.schemas
compiz-widget.schemas
compiz-reflex.schemas
compiz-scalefilter.schemas
compiz-gears.schemas
compiz-crashhandler.schemas
compiz-group.schemas
compiz-mblur.schemas
compiz-showdesktop.schemas
compiz-grid.schemas
compiz-notification.schemas
compiz-shelf.schemas
compiz-cubeaddon.schemas
compiz-wallpaper.schemas
compiz-maximumize.schemas
compiz-bicubic.schemas
compiz-extrawm.schemas
compiz-loginout.schemas
compiz-animationaddon.schemas
compiz-splash.schemas
compiz-trailfocus.schemas
compiz-showmouse.schemas
compiz-bench.schemas
compiz-firepaint.schemas
compiz-fadedesktop.schemas
compiz-addhelper.schemas"

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run libnotify
Add_dependency run glib
Add_dependency run boost
Add_dependency run libX11
Add_dependency run MesaLib
Add_dependency run compiz-core
Add_dependency run compiz-plugins-main
Add_dependency run libXext
Add_dependency run cairo
Add_dependency run libXfixes

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build cmake
Add_dependency build compiz-core-devel
Add_dependency build MesaLib-devel
Add_dependency build libstdc++-devel
Add_dependency build glibc-devel
Add_dependency build libnotify-devel
Add_dependency build glib-devel
Add_dependency build boost-devel
Add_dependency build libX11-devel
Add_dependency build compiz-plugins-main-devel
Add_dependency build libXext-devel
Add_dependency build cairo-devel
Add_dependency build libXfixes-devel

do_build()
{
	mkdir -p ${wrksrc}/build && cd ${wrksrc}/build && \
	cmake	-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCOMPIZ_DISABLE_SCHEMAS_INSTALL=yes .. && \
	make ${makejobs} || return 1
}

do_install()
{
	cd ${wrksrc}/build && make DESTDIR=${DESTDIR} install || return 1
}
