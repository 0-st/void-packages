# Template file for 'lilo'
pkgname=lilo
version=24.1
revision=1
only_for_archs="i686 x86_64"
hostmakedepends="bin86"
makedepends="device-mapper-devel"
conf_files="/etc/lilo.conf"
short_desc="Standard Linux boot loader"
maintainer="SÃ¶ren Tempel <soeren+void@soeren-tempel.net>"
homepage="https://alioth.debian.org/projects/lilo/"
license="BSD"
distfiles="${DEBIAN_SITE}/main/l/${pkgname}/${pkgname}_${version}.orig.tar.gz"
checksum=a15280edacb8bca31b9163d65e61270b8c06cb9ffea74374a3a42164a13d4532

pre_build() {
	# Don't install images
	sed '/images install/d' -i Makefile
	sed '/images all/d' -i Makefile
}

do_build() {
	# LILO needs LC_ALL=C
	LC_ALL=C make CC=$CC all
}

do_install() {
	make DESTDIR=${DESTDIR} install
	rm -r ${DESTDIR}/etc/initramfs ${DESTDIR}/etc/kernel
	mv ${DESTDIR}/sbin/* ${DESTDIR}/usr/sbin
	mv ${DESTDIR}/etc/lilo.conf_example ${DESTDIR}/etc/lilo.conf
}
