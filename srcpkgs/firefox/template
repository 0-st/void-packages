# Template build file for 'firefox'.
pkgname=firefox
version=4.0.1
_libxul_sdkver=2.0
wrksrc=mozilla-${_libxul_sdkver}
patch_args="-Np1"
#distfiles="${MOZILLA_SITE}/${pkgname}/releases/${version}/source/${pkgname}-${version}.source.tar.bz2"
distfiles="http://ftp.mozilla.org/pub/mozilla.org/mozilla.org/${pkgname}/releases/${version}/source/${pkgname}-${version}.source.tar.bz2"
build_style=gnu_configure
configure_args="--enable-application=browser --enable-default-toolkit=cairo-gtk2
--disable-crashreporter --disable-tests --disable-debug --enable-notify
--enable-optimize --disable-embedding-tests --disable-installer
--disable-javaxpcom --disable-necko-wifi --disable-oji --disable-updater
--disable-gnomevfs --disable-gnomeui --disable-gconf --disable-dbm
--with-system-zlib --with-system-bz2 --enable-system-cairo --with-pthreads
--with-system-png --with-system-jpeg --enable-jemalloc --enable-safe-browsing
--with-system-sqlite --with-system-nspr --with-system-nss --enable-libxul
--with-system-libevent --enable-system-hunspell --enable-extensions=default
--enable-pango --enable-svg --enable-canvas --enable-smil --enable-canvas3d
--enable-places --enable-shared-js --enable-url-classifier --enable-gio
--with-libxul-sdk=/usr/lib/xulrunner-devel-${_libxul_sdkver}"
short_desc="Lightweight gecko-based web browser"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=cf3a39877facc229a67760915341fe95095cca647faab3a7adcb70046105199c
long_desc="
 Mozilla Firefox is a free, open-source and cross-platform web browser
 for Windows, Linux, MacOS X and many other operating systems. It is
 small, fast and easy to use, and offers many advantages over other web
 browsers, such as tabbed browsing and the ability to block pop-up
 windows.

 Firefox also offers excellent bookmark and history management, and it
 can be extended by developers using industry standards such as XML,
 CSS, JavaScript, C++, etc. Many extensions are available."

Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run glib
Add_dependency run nspr
Add_dependency run gdk-pixbuf
Add_dependency run gtk+
Add_dependency run xulrunner

Add_dependency build zip
Add_dependency build perl	">=0"
Add_dependency build python	">=0"
Add_dependency build yasm
Add_dependency build glibc-devel
Add_dependency build libstdc++-devel
Add_dependency build xulrunner-devel
Add_dependency build nspr-devel
Add_dependency build gtk+-devel
Add_dependency build libevent-devel
Add_dependency build hunspell-devel

post_install()
{
	install -d ${DESTDIR}/usr/share/applications
	install -d ${DESTDIR}/usr/share/pixmaps
	install -m644 ${FILESDIR}/*.desktop \
		${DESTDIR}/usr/share/applications
	install -m644 ${wrksrc}/browser/branding/unofficial/default48.png \
		${DESTDIR}/usr/share/pixmaps/firefox.png
}
