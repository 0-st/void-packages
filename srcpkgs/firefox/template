# Template build file for 'firefox'.
pkgname=firefox
version=3.6.12
_libxul_sdkver=1.9.2
wrksrc=mozilla-${_libxul_sdkver}
distfiles="${MOZILLA_SITE}/${pkgname}/releases/${version}/source/${pkgname}-${version}.source.tar.bz2"
build_style=gnu_configure
configure_args="--enable-application=browser --enable-default-toolkit=cairo-gtk2
--disable-crashreporter --disable-tests --disable-debug
--enable-optimize --disable-embedding-tests --disable-installer
--disable-javaxpcom --disable-necko-wifi --disable-oji --disable-updater
--disable-gnomevfs --disable-gnomeui --disable-gconf --disable-dbm
--with-system-zlib --with-system-bz2 --enable-system-cairo --with-pthreads
--with-system-png --with-system-jpeg --enable-jemalloc --enable-safe-browsing
--with-system-sqlite --with-system-nspr --with-system-nss --enable-libxul
--with-libxul-sdk=/usr/lib/xulrunner-devel-${_libxul_sdkver}"
short_desc="Lightweight gecko-based web browser"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=dd478c653070f451b76befc798cfa1d6b61745d8badf831a3bae453c32e68c2d
long_desc="
 Mozilla Firefox is a free, open-source and cross-platform web browser
 for Windows, Linux, MacOS X and many other operating systems. It is
 small, fast and easy to use, and offers many advantages over other web
 browsers, such as tabbed browsing and the ability to block pop-up
 windows.

 Firefox also offers excellent bookmark and history management, and it
 can be extended by developers using industry standards such as XML,
 CSS, JavaScript, C++, etc. Many extensions are available."

Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run glib
Add_dependency run nspr
Add_dependency run gdk-pixbuf
Add_dependency run gtk+
Add_dependency run xulrunner

Add_dependency build zip
Add_dependency build perl
Add_dependency build python
Add_dependency build glibc-devel
Add_dependency build libstdc++-devel
Add_dependency build xulrunner-devel
Add_dependency build nspr-devel
Add_dependency build gtk+-devel

post_install()
{
	install -d ${DESTDIR}/usr/share/applications || return 1
	install -d ${DESTDIR}/usr/share/pixmaps || return 1
	install -m644 ${FILESDIR}/*.desktop \
		${DESTDIR}/usr/share/applications || return 1
	install -m644 ${wrksrc}/browser/branding/unofficial/default48.png \
		${DESTDIR}/usr/share/pixmaps/firefox.png || return 1
}
