# Template file for 'cracklib'
pkgname=cracklib
version=2.8.16
distfiles="${SOURCEFORGE_SITE}/cracklib/$pkgname-$version.tar.gz"
build_style=gnu_configure
short_desc="Password Checking Library"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=fc3aa492c2879e304bae30955ab8b37d6865d26f79d0493b8c36a9bc1b6475bc
long_desc="
 cracklib is a password checking library. It can check a given password
 against a dictionary file to find weak passwords (vulnerable to
 dictionary attacks)."

subpackages="$pkgname-devel $pkgname-python"
Add_dependency run glibc
Add_dependency run zlib
Add_dependency build gettext
Add_dependency build python
Add_dependency build zlib-devel

post_install()
{
	# Create default small wordlist.
	cd $wrksrc || exit 1
	install -v -D dicts/cracklib-small \
		${DESTDIR}/usr/share/dict/cracklib-small
	sh ./util/cracklib-format dicts/cracklib-small \
		| sh ./util/cracklib-packer ${DESTDIR}/usr/share/cracklib/pw_dict
	install -d ${DESTDIR}/lib/cracklib
	install ${DESTDIR}/usr/share/cracklib/pw_dict* ${DESTDIR}/lib/cracklib
	gzip -9 ${DESTDIR}/lib/cracklib/pw_dict.pwd
}
