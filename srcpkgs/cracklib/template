# Template file for 'cracklib'
pkgname=cracklib
version=2.8.22
revision=3
subpackages="libcracklib ${pkgname}-devel ${pkgname}-python"
create_wrksrc=yes
build_wrksrc="${pkgname}-${version}"
build_style=gnu-configure
configure_args="--disable-static"
makedepends="python-devel"
short_desc="Password Checking Library"
maintainer="Juan RP <xtraeme@gmail.com>"
license="LGPL-2.1"
homepage="http://cracklib.sourceforge.net/"
distfiles="
 ${SOURCEFORGE_SITE}/cracklib/${pkgname}-${version}.tar.gz
 ${SOURCEFORGE_SITE}/cracklib/${pkgname}-words-1.2.gz"
checksum="
 feaff49bfb513ec10b2618c00d2f7f60776ba93fcc5fa22dd3479dd9cad9f770
 9b323c100780f2a817ab3de082b8bfaa4478bfa174dcbd016810ed8be60cbe16"

if [ "$XBPS_CROSS_BUILD" ]; then
	hostmakedepends="automake gettext-devel"
	pre_configure() {
		sed -i "s|AM_CONFIG_HEADER|AC_CONFIG_HEADERS|g" -i configure.in
		autoreconf -fi
	}
fi

post_install() {
	[ -e ../cracklib-words-1.2.gz ] && gunzip ../cracklib-words-1.2.gz
	vinstall ../cracklib-words-1.2 644 usr/share/cracklib cracklib-words
}
