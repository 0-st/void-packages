# Template build file for 'sudo'.
pkgname=sudo
version=1.7.4p5
distfiles="http://www.courtesan.com/sudo/dist/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-ignore-dot -with-all-insults --with-env-editor
--enable-shell-sets-home --enable-noargs-shell --disable-setresuid
--disable-root-sudo --with-logfac=auth --without-sendmail --disable-root-mailer"
short_desc="Allow others to run commands as root"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=72e8e3545f314d342f178b0fee4b483e26d70ef132b081699be035da0f0acbba
long_desc="
 Sudo is a program designed to allow a sysadmin to give limited root
 privileges to users and log root activity. The basic philosophy is to
 give as few privileges as possible but still allow people to get their
 work done."

conf_files="/etc/pam.d/sudo /etc/sudoers"
nostrip=yes

Add_dependency run glibc
Add_dependency run zlib
Add_dependency run pam
Add_dependency build zlib-devel
Add_dependency build pam-devel
Add_dependency build diffutils

pre_install()
{
	# Use cmp from diffutils.
	export PATH="/usr/bin:$PATH"
}

post_install()
{
	install -D -m644 ${FILESDIR}/sudo.pam ${DESTDIR}/etc/pam.d/sudo
}
