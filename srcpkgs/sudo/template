# Template build file for 'sudo'.
pkgname=sudo
version=1.8.5p3
revision=1
build_style=gnu-configure
configure_args="--with-ignore-dot -with-all-insults --with-env-editor
--enable-shell-sets-home --enable-noargs-shell --without-sendmail
--disable-root-sudo --with-logfac=auth --disable-root-mailer"
nostrip=yes
makedepends="zlib-devel pam-devel"
conf_files="/etc/pam.d/sudo /etc/sudoers"
short_desc="Allow others to run commands as root"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gratisoft.us/sudo/"
license="ISC, BSD, zlib"
distfiles="http://www.courtesan.com/sudo/dist/$pkgname-$version.tar.gz"
checksum=00bbf27d53e8a74ef3e76b531c2b8a8d6dccab58e0d040c2a3a08171543bb1a7
long_desc="
 Sudo is a program designed to allow a sysadmin to give limited root
 privileges to users and log root activity. The basic philosophy is to
 give as few privileges as possible but still allow people to get their
 work done."

# Build PIE binaries by default.
CFLAGS="-fPIE"
LDFLAGS="-pie"
CPPFLAGS="-D_FORTIFY_SOURCE=2"

post_install() {
	vinstall ${FILESDIR}/sudo.pam 644 etc/pam.d sudo
	vmove usr/share/doc/sudo/LICENSE usr/share/licenses/sudo
	# remove unused stuff.
	rm -rf ${DESTDIR}/usr/share/doc
	rm -rf ${DESTDIR}/usr/include
}
