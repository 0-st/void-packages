# Template build file for "git".
pkgname=git
version=1.8.1
revision=1
short_desc="GIT Tree History Storage Tool"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://git-scm.com/"
license="GPL-2"
distfiles="http://git-core.googlecode.com/files/git-$version.tar.gz"
checksum=285cc1a9c8751ea62fa568e2462f286fa535e0d847f06ae686c8180e53360c2e

subpackages="git-docs git-perl git-python"
# Required by https://
depends="ca-certificates"
makedepends="xmlto>=0.0.25_2 asciidoc perl openssl-devel libcurl-devel
 expat-devel python-devel"

do_configure() {
	./configure ${CONFIGURE_SHARED_ARGS} --with-curl \
		--with-expat --without-tcltk
}

do_build() {
	make ${makejobs} && make ${makejobs} -C Documentation man
}

do_install() {
	make NO_INSTALL_HARDLINKS=1 DESTDIR=${DESTDIR} \
		install install-doc
	vinstall contrib/completion/git-completion.bash 644 \
		usr/share/bash-completion/completions git
}
