# Template build file for 'git".
pkgname=git
version=1.7.6
distfiles="http://www.kernel.org/pub/software/scm/git/git-$version.tar.bz2"
build_style=gnu_configure
configure_args="--with-curl --with-expat --without-tcltk"
make_install_args="install-doc"
short_desc="GIT Tree History Storage Tool"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://git-scm.com/"
license="GPL-2"
checksum=778795cece63cd758192378f3a999870cea290181b3a4c9de573c77192561082
long_desc="
 GIT is a \"directory content manager\" designed to handle absolutely massive
 projects with speed and efficiency, and the release of the 2.6.12 (and later)
 versions of the Linux kernel as well as more and more other projects switching
 to it would indicate that it does this task well.

 GIT falls in the category of distributed version control software, similar
 to e.g. GNU Arch or Monotone (or, in the commercial world, BitKeeper). Every
 GIT working directory is a full-fledged repository with full revision tracking
 capabilities, not dependent on network access to a central server."

subpackages="git-docs git-perl git-python"
Add_dependency run glibc
Add_dependency run zlib
Add_dependency run expat
Add_dependency run libssl
Add_dependency run libcurl

Add_dependency build perl
Add_dependency build libcurl-devel
Add_dependency build zlib-devel
Add_dependency build expat-devel
Add_dependency build openssl-devel
Add_dependency build asciidoc
Add_dependency build xmlto
Add_dependency build diffutils
Add_dependency build python-devel

post_build()
{
	# Build the manpages.
	make -C Documentation man
}

post_install()
{
	mkdir -p ${DESTDIR}/etc/bash_completion.d
	install -D -m644 contrib/completion/git-completion.bash  \
		${DESTDIR}/etc/bash_completion.d/git
}
