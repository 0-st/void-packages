# Template file for 'kdelibs'
pkgname=kdelibs
version=4.11.1
revision=1
short_desc="KDE core libraries"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL, LGPL, FDL"
homepage="http://www.kde.org"
distfiles="http://download.kde.org/stable/${version}/src/${pkgname}-${version}.tar.xz"
checksum=8ebf816732a4366d67611a63405135650acd9e5bf0f7594e7ffa9a14e92dfc68

build_style=cmake
configure_args="-DKDE4_BUILD_TESTS=OFF -DKDE_DISTRIBUTION_TEXT=Void
 -DSYSCONF_INSTALL_DIR=/etc -DHTML_INSTALL_DIR=/usr/share/doc/kde/html
 -DKDE_DEFAULT_HOME=.kde4 -DWITH_FAM=OFF -DWITH_HUpnp=OFF -DWITH_SOLID_UDISKS2=ON"

hostmakedepends="cmake perl automoc4 pkg-config docbook-xsl"
makedepends="openssl-devel libSM-devel libXext-devel libXScrnSaver-devel
 libXrender-devel phonon-devel strigi-devel pcre-devel libjpeg-turbo-devel
 libpng-devel giflib-devel acl-devel aspell-devel enchant-devel jasper-devel
 liblzma-devel mit-krb5-devel avahi-libs-devel libudev-devel libxslt-devel
 polkit-qt-devel libdbusmenu-qt-devel attica-devel grantlee-devel qca-devel
 libutempter-devel soprano-devel>=2.9.2_2 MesaLib-devel upower udisks2-devel
 shared-desktop-ontologies ca-certificates shared-mime-info media-player-info
 hicolor-icon-theme"

post_install() {
	rm -f ${DESTDIR}/usr/share/apps/kssl/ca-bundle.crt
	ln -sf /etc/ssl/certs/ca-certificates.crt \
		${DESTDIR}/usr/share/apps/kssl/ca-bundle.crt
}

kdelibs-devel_package() {
	depends="${sourcepkg}-${version}_${revision}"
	pkg_install() {
		vmove usr/include
		vmove usr/share/apps/cmake
		vmove usr/lib/cmake
	}
}

kdelibs_package() {
	depends="docbook-xsl media-player-info shared-mime-info
		shared-desktop-ontologies upower hicolor-icon-theme
		ca-certificates"
	pkg_install() {
		vmove all
	}
}
