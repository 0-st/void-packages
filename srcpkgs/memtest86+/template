# Template file for 'memtest86+'
pkgname=memtest86+
version=4.00
distfiles="http://www.memtest.org/download/$version/$pkgname-$version.tar.gz"
short_desc="An Advanced Memory Diagnostic Tool"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=6ec42f549da81b715bfc5c55b93b74774fb5c35f7578c7eecebab3ca37866ca4
long_desc="
 Memtest86+ scans your RAM for errors.

 It can output a list of bad RAM regions usable by the BadRAM kernel patch,
 so that you can still use you old RAM with one or two bad bits.

 Memtest86+ is based on memtest86 3.0, and adds support for recent hardware,
 as well as a number of general-purpose improvements, including many patches
 to memtest86 available from various sources."

nostrip=yes
noverifyrdeps=yes

if [ "${xbps_machine}" = "x86_64" ]; then
	Add_dependency build gcc-multilib
fi

do_build()
{
	make ${makejobs}
}

do_install()
{
	vinstall memtest.bin 755 boot memtest86+
	vinstall ${FILESDIR}/20_memtest86+ 755 etc/grub.d
}
