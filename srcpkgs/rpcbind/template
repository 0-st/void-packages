# Template file for 'rpcbind'
pkgname=rpcbind
version=0.2.1
revision=1
build_style=gnu-configure
configure_args="--enable-warmstarts --with-statedir=/run --with-rpcuser=rpc"
hostmakedepends="pkg-config"
makedepends="libtirpc-devel"
short_desc="Converts RPC program numbers into universal addresses"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://rpcbind.sourceforge.net"
license="BSD"
distfiles="${SOURCEFORGE_SITE}/$pkgname/$pkgname-$version.tar.bz2"
checksum=da169ff877a5a07581fad50a9a808ac6e96f0c277a3df49a7ef005778428496e
long_desc="
 The rpcbind utility is a server that converts RPC program numbers into
 universal address. It must be running on the host to be able to make
 RPC calls on a server on that machine."

if [ "$CROSS_BUILD" ]; then
	hostmakedepends+=" libtirpc-devel"
fi

post_install() {
	vinstall man/rpcbind.8 644 usr/share/man/man8
	vinstall man/rpcinfo.8 644 usr/share/man/man8
	vinstall ${FILESDIR}/${pkgname}.service 644 usr/lib/systemd/system
}

rpcbind_package() {
	depends="shadow"
	systemd_services="${pkgname}.service on"
	system_accounts="rpc"
	pkg_install() {
		vmove all
	}
}
