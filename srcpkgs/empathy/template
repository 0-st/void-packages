# Template file for 'empathy'
pkgname=empathy
version=3.10.1
revision=2
build_style=gnu-configure
configure_args="--enable-gst-1.0=yes --disable-schemas-compile --disable-static"
hostmakedepends="pkg-config intltool gnome-doc-utils itstool gobject-introspection"
makedepends="
 libcanberra-devel clutter-gst-devel>=2.0.8_2 clutter-gtk-devel>=1.4.4_2
 telepathy-glib-devel>=0.19.9 telepathy-logger-devel>=0.8 libnotify-devel
 telepathy-farstream-devel>=0.6.0 telepathy-mission-control-devel>=5:5.14.1
 evolution-data-server-devel>=3.10 geocode-glib-devel folks-devel>=0.9.5
 webkitgtk-devel>=2.1 libgudev-devel pulseaudio-devel cheese-devel>=3.10
 enchant-devel NetworkManager-devel libchamplain-devel>=0.12.5_2
 gnutls-devel>=3.1.5 gsettings-desktop-schemas-devel>=3.10 geoclue2 iso-codes"
short_desc="GNOME instant messaging client using the Telepathy framework"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://live.gnome.org/Empathy"
license="GPL-2"
distfiles="${GNOME_SITE}/$pkgname/${version%.*}/$pkgname-$version.tar.xz"
checksum=a5d96f1a408613b885fc254d8b6f33fceae01e212d2370cc77444d66fa945054

post_install() {
	# XXX
	# Remove telepathy-mission-control plugin, causes 100% cpu or crashes.
	# See https://bugs.freedesktop.org/show_bug.cgi?id=68946
	rm -rf ${DESTDIR}/usr/lib/mission-control-plugins.0
}

empathy_package() {
	depends="gsettings-desktop-schemas>=3.10 geoclue2 iso-codes"
	pkg_install() {
		vmove all
	}
}
