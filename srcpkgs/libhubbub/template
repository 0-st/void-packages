# Template build file for 'libhubbub'.
pkgname=libhubbub
version=0.1.1
revision=1
homepage="http://www.netsurf-browser.org"
distfiles="${homepage}/projects/releases/hubbub-${version}-src.tar.gz"
short_desc="HTML5 compliant parsing library, written in C."
maintainer="davehome <davehome@redthumb.info.tm>"
checksum=363f1acf1ca3b3362bb84fc8ed9544b2207e7cb706ac176477ad00dc0d56782b
license="MIT"
long_desc="
 Hubbub is an HTML5 compliant parsing library, written in C. It was
 developed as part of the NetSurf project and is available for use
 by other software under the MIT licence.

 The HTML5 specification defines a parsing algorithm, based on the
 behaviour of mainstream browsers, which provides instructions for
 how to parse all markup, both valid and invalid. As a result, Hubbub
 parses web content well.

 * Features
 	Parses HTML, good and bad
 	Simple C API
 	Fast
 	Character encoding detection
 	Well-tested (~90% test coverage)
 	Portable
 	Shared library"

subpackages="${pkgname}-devel"

Add_dependency build perl
Add_dependency build pkg-config
Add_dependency build libxslt-devel
Add_dependency build json-c-devel
Add_dependency build libparserutils-devel

wrksrc=hubbub-${version}

do_build() {
	make ${makejobs} COMPONENT_TYPE=lib-shared
	make ${makejobs} COMPONENT_TYPE=lib-static
}

do_install() {
	make ${makejobs} COMPONENT_TYPE=lib-shared \
		PREFIX=/usr DESTDIR=${DESTDIR} install
	make ${makejobs} COMPONENT_TYPE=lib-static \
		PREFIX=/usr DESTDIR=${DESTDIR} install

	vinstall "${wrksrc}/COPYING" 0644 "usr/share/licenses/${pkgname}"
}
