# Template file for 'xbmc'
pkgname=xbmc
version=11.0
revision=3
build_style=gnu-configure
configure_args="--disable-debug --enable-sdl --enable-vdpau --enable-vaapi
--disable-crystalhd --disable-tegra --disable-nfs --disable-afpclient
--disable-hal --disable-webserver --enable-udev --disable-ccache
--enable-external-libraries --enable-external-ffmpeg"
depends="dbus udisks upower hicolor-icon-theme desktop-file-utils mesa-demos librtmp"
makedepends="pkg-config gperf cmake zip unzip nasm yasm libudev-devel>=183
pcre-devel expat-devel libpng-devel>=1.5.10 jpeg-devel tiff-devel libXmu-devel
libXrandr-devel avahi-libs-devel pulseaudio-devel SDL_mixer-devel samba-devel
libmysqlclient-devel libmpeg2-devel wavpack-devel zlib-devel lzo-devel
MesaLib-devel glew-devel fribidi-devel sqlite-devel libcdio-devel freetype-devel
jasper-devel faac-devel SDL_image-devel faad2-devel libmodplug-devel openssl-devel
libmad-devel fontconfig-devel libXinerama-devel libsamplerate-devel libmms-devel
enca-devel boost-devel libcurl-devel libva-devel libvdpau-devel libass-devel
libbluetooth-devel yajl-devel libplist-devel ffmpeg-devel librtmp-devel"
broken_as_needed=yes
gtk_iconcache_dirs="/usr/share/icons/hicolor"
short_desc="XBMC Media Center"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.xbmc.org"
license="GPL-2"
distfiles="http://mirrors.xbmc.org/releases/source/xbmc-$version.tar.gz"
checksum=1fe5d310c16138f26e2b13bc545604e95f48ace6c8636f23e77da402cd7b0b19
long_desc="
 XBMC is an award-winning free and open source (GPL) software media player
 and entertainment hub for digital media. XBMC is available for Linux, OSX,
 Windows, and the original Xbox."

post_install() {
	vinstall tools/Linux/xbmc.desktop 644 usr/share/applications
	vinstall tools/Linux/xbmc-48x48.png 644 usr/share/pixmaps xbmc.png

	vinstall xbmc-xrandr 755 usr/share/xbmc
	vinstall tools/TexturePacker/TexturePacker 755 usr/share/xbmc

	rm -f ${DESTDIR}/usr/share/icons/hicolor/icon-theme.cache
}
