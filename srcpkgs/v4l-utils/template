# Template file for 'v4l-utils'
pkgname=v4l-utils
version=0.8.5
distfiles="http://linuxtv.org/downloads/$pkgname/$pkgname-$version.tar.bz2"
build_style=custom-install
short_desc="Userspace tools and libraries for Video 4 Linux"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://freshmeat.net/projects/libv4l"
license="GPL-2, LGPL-2.1"
checksum=c205848fbaf3489b97519dae04da31be4998bbc170a2ca9791357a8a549e594c
long_desc="
 v4l-utils is a collection of various video4linux (V4L) and DVB utilities.

 libv4l is an accompanying collection of libraries that adds a thin abstraction
 layer on top of video4linux2 (V4L2) devices. The purpose of this layer is to
 make it easy for application writers to support a wide variety of devices
 without having to write separate code for different devices in the same class.
 It consists of 3 different libraries. libv4lconvert offers functions to convert
 from any (known) pixel format to V4l2_PIX_FMT_BGR24 or V4l2_PIX_FMT_YUV420.
 
 libv4l1 offers the (deprecated) v4l1 API on top of v4l2 devices, independent
 of the drivers for those devices supporting v4l1 compatibility (which many
 v4l2 drivers do not).

 libv4l2 offers the v4l2 API on top of v4l2 devices, while adding support for
 the application transparent libv4lconvert conversion where necessary."

conf_files="/etc/rc_maps.cfg"
subpackages="$pkgname-devel"

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run jpeg
Add_dependency run sysfsutils

Add_dependency build jpeg-devel
Add_dependency build libsysfs-devel

do_build()
{
	sed -i 's|CFLAGS :=|CFLAGS ?=|' Make.rules
	make PREFIX=/usr ${makejobs}
}

do_install()
{
	make PREFIX=/usr DESTDIR=${DESTDIR} install
	rm -f ${DESTDIR}/usr/bin/ivtv-ctl
}
