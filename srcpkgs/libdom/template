# Template build file for 'libdom'.
pkgname=libdom
version="$(date -u +%Y%m%d)"
homepage="http://www.netsurf-browser.org"
short_desc="Implementation of the W3C DOM, written in C."
maintainer="davehome <davehome@redthumb.info.tm>"
license="MIT"
long_desc="
 LibDOM is an implementation of the W3C DOM, written in C. It is
 currently in development for use with NetSurf and is intended to
 be suitable for use in other projects too. For further details,
 see the readme."

subpackages="${pkgname}-devel"

nofetch=yes
noextract=yes

Add_dependency build pkg-config
Add_dependency build perl
Add_dependency build subversion
Add_dependency build libxml2-devel
Add_dependency build libparserutils-devel
Add_dependency build libwapcaplet-devel
Add_dependency build libhubbub-devel

do_fetch() {
	local url="svn://svn.netsurf-browser.org/trunk/libdom"
	msg_normal " Fetching source from $url ...\n"
	svn co ${url} ${pkgname}-${version}
}

do_build() {
	make ${makejobs} COMPONENT_TYPE=lib-shared
	make ${makejobs} COMPONENT_TYPE=lib-static
}

do_install() {
	make ${makejobs} COMPONENT_TYPE=lib-shared \
		PREFIX=/usr DESTDIR=${DESTDIR} install
	make ${makejobs} COMPONENT_TYPE=lib-static \
		PREFIX=/usr DESTDIR=${DESTDIR} install

	vinstall "${wrksrc}/COPYING" 644 "usr/share/license/${pkgname}"
}
