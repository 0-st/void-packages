# Template file for 'udev'
pkgname=udev
version=173
distfiles="${KERNEL_SITE}/utils/kernel/hotplug/udev-${version}.tar.bz2"
build_style=gnu_configure
configure_args="--sbindir=/sbin --without-selinux --libexecdir=/lib/udev
--with-rootlibdir=/lib --disable-introspection --enable-edd --enable-floppy
--with-systemdsystemunitdir=/lib/systemd/system --disable-gudev
--enable-udev_acl"
short_desc="/dev/ and hotplug management daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev.html"
license="GPL-2"
checksum=70a18315a12f8fc1131f7da5b4dae3606988b69d5c08f96f443b84b8486caaaf
long_desc="
 udev is a daemon which dynamically creates and removes device nodes from
 /dev/, handles hotplug events and loads drivers at boot time."

openrc_services="udev sysinit true"
conf_files="/etc/udev/udev.conf"
subpackages="libudev libudev-devel"

Add_dependency run glibc
Add_dependency run glib
Add_dependency run acl

Add_dependency build pkg-config
Add_dependency build gperf
Add_dependency build glib-devel
Add_dependency build acl-devel

Add_dependency full usbutils	">=0.82"
Add_dependency full pciutils

post_install()
{
	# Install some additional rules.
	install -m644 rules/misc/* ${DESTDIR}/lib/udev/rules.d

	# Install the OpenRC service
	vinstall ${FILESDIR}/udev.rc 755 etc/init.d udev

        # Install the initramfs-tools hook/scripts.
	vinstall ${FILESDIR}/udev.initramfs-hook 755 \
		usr/share/initramfs-tools/hooks udev
	vinstall ${FILESDIR}/udev.initramfs-inittop 755 \
		usr/share/initramfs-tools/scripts/init-top udev
	vinstall ${FILESDIR}/udev.initramfs-bottom 755 \
		usr/share/initramfs-tools/scripts/init-bottom udev
}
