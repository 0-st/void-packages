# Template file for 'libtirpc'
pkgname=libtirpc
version=0.2.2
revision=2
patch_args="-Np1"
conf_files="/etc/netconfig"
subpackages="$pkgname-devel"
build_style=gnu-configure
configure_args="--enable-gss --disable-static"
makedepends="automake pkg-config libgssglue-devel"
crossmakedepends="libgssglue-devel"
short_desc="Transport Independent RPC library (SunRPC replacement)"
maintainer="Juan RP <xtraeme@gmail.com>"
license="BSD"
homepage="http://libtirpc.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/$pkgname/$pkgname-$version.tar.bz2"
checksum=f05eb17c85d62423858b8f74512cfe66a9ae1cedf93f03c2a0a32e04f0a33705

pre_configure() {
	sed -i "s|AM_CONFIG_HEADER|AC_CONFIG_HEADERS|g" configure.ac
	autoreconf -fi
	# XXX fix cross pkg to provide these headers.
	if [ -n "$XBPS_CROSS_TRIPLET" ]; then
		for f in nis nis_tags nislib; do
			ln -fs /usr/include/rpcsvc/${f}.h \
				/usr/$XBPS_CROSS_TRIPLET/include/rpcsvc/${f}.h
		done
	fi
}

post_install() {
	vinstall doc/etc_netconfig 644 etc netconfig
}
