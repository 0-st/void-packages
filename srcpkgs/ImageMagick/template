# Template file for 'ImageMagick'
pkgname=ImageMagick
_distver=6.7.3
_distverpatch=8
version=${_distver}.${_distverpatch}
wrksrc=${pkgname}-${_distver}-${_distverpatch}
distfiles="http://ftp.nluug.nl/$pkgname/$pkgname-${_distver}-${_distverpatch}.tar.xz"
build_style=gnu-configure
configure_args="--without-gslib --without-jp2 --without-autotrace
--without-djvu --without-dps --without-fpx --without-gvc --without-jbig
--without-lqr --without-openexr --with-gs-font-dir=/usr/share/fonts/Type1
--with-magick-plus-plus --with-modules -with-perl --enable-shared"
short_desc="Package for display and interactive manipulation of images"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.imagemagick.org/"
license="${pkgname}, MIT"
checksum=e89a7113484bb90a226c44f9173271e8f77e24190ad73a83147ca0004c45ce49
long_desc="
 ImageMagick TM, is a package for display and interactive manipulation
 of images for the X Window System. It is written in C and interfaces
 to the X library, and therefore does not require any proprietary
 toolkit in order to compile. Although the software is copyrighted, it
 is available for free and can be redistributed without fee.

 The ImageMagick image display program can display an image on any
 workstation screen running an X server. It can read and write many of
 the more popular image formats including JPEG, TIFF, PNM, GIF, and
 Photo CD. In addition you can interactively resize, rotate, sharpen,
 color reduce, or add special effects to an image and save your
 completed work in the same or differing image format."

conf_files="
/etc/ImageMagick/coder.xml
/etc/ImageMagick/colors.xml
/etc/ImageMagick/delegates.xml
/etc/ImageMagick/log.xml
/etc/ImageMagick/magic.xml
/etc/ImageMagick/mime.xml
/etc/ImageMagick/policy.xml
/etc/ImageMagick/sRGB.icc
/etc/ImageMagick/thresholds.xml
/etc/ImageMagick/type.xml
/etc/ImageMagick/type-dejavu.xml
/etc/ImageMagick/type-ghostscript.xml
/etc/ImageMagick/type-windows.xml"

keep_libtool_archives=yes
subpackages="libmagick libmagick-devel libmagick-perl"

Add_dependency build pkg-config
Add_dependency build lcms2-devel
Add_dependency build libwebp-devel
Add_dependency build tiff-devel
Add_dependency build freetype-devel
Add_dependency build jpeg-devel
Add_dependency build fontconfig-devel
Add_dependency build libXext-devel
Add_dependency build libXt-devel
Add_dependency build bzip2-devel
Add_dependency build zlib-devel
Add_dependency build glibc-devel
Add_dependency build libltdl-devel
Add_dependency build libSM-devel
Add_dependency build libICE-devel
Add_dependency build libX11-devel
Add_dependency build libgomp
Add_dependency build libxml2-devel
Add_dependency build libpng-devel
Add_dependency build librsvg-devel
Add_dependency build gtk+-devel
Add_dependency build cairo-devel
Add_dependency build glib-devel
Add_dependency build libwmf-devel
Add_dependency build libstdc++-devel
Add_dependency build fftw-devel

post_install() {
	vinstall LICENSE 644 usr/share/licenses/${pkgname}
	vinstall NOTICE 644 usr/share/licenses/${pkgname}
	# we don't need the libtool archives anymore
	find ${DESTDIR} -type f -name *.la -delete
}
