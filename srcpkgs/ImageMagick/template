# Template file for 'ImageMagick'
pkgname=ImageMagick
_distver=6.7.5
_distverpatch=3
version=${_distver}.${_distverpatch}
revision=1
wrksrc=${pkgname}-${_distver}-${_distverpatch}
distfiles="http://ftp.nluug.nl/$pkgname/$pkgname-${_distver}-${_distverpatch}.tar.xz"
build_style=gnu-configure
configure_args="--without-gslib --without-jp2 --without-autotrace
--without-dps --without-fpx --without-gvc --without-jbig
--without-lqr --without-openexr --with-gs-font-dir=/usr/share/fonts/Type1
--with-magick-plus-plus --with-modules -with-perl --enable-shared"
makedepends="pkg-config perl>=5.16 jpeg-devel libpng-devel tiff-devel lcms2-devel freetype-devel libwebp-devel fontconfig-devel libXext-devel libXt-devel libltdl-devel libxml2-devel glib-devel cairo-devel librsvg-devel gtk+-devel libwmf-devel fftw-devel djvulibre-devel liblzma-devel libgomp-devel"
short_desc="Package for display and interactive manipulation of images"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.imagemagick.org/"
license="${pkgname}, MIT"
checksum=9a0526a0e7de50115c94e63b5a82a4a18d80ffa27f6e6793bba86edd25511a54
long_desc="
 ImageMagick TM, is a package for display and interactive manipulation
 of images for the X Window System. It is written in C and interfaces
 to the X library, and therefore does not require any proprietary
 toolkit in order to compile. Although the software is copyrighted, it
 is available for free and can be redistributed without fee.

 The ImageMagick image display program can display an image on any
 workstation screen running an X server. It can read and write many of
 the more popular image formats including JPEG, TIFF, PNM, GIF, and
 Photo CD. In addition you can interactively resize, rotate, sharpen,
 color reduce, or add special effects to an image and save your
 completed work in the same or differing image format."

conf_files="
/etc/ImageMagick/coder.xml
/etc/ImageMagick/colors.xml
/etc/ImageMagick/delegates.xml
/etc/ImageMagick/log.xml
/etc/ImageMagick/magic.xml
/etc/ImageMagick/mime.xml
/etc/ImageMagick/policy.xml
/etc/ImageMagick/sRGB.icc
/etc/ImageMagick/thresholds.xml
/etc/ImageMagick/type.xml
/etc/ImageMagick/type-dejavu.xml
/etc/ImageMagick/type-ghostscript.xml
/etc/ImageMagick/type-windows.xml"

keep_libtool_archives=yes
subpackages="libmagick libmagick-devel libmagick-perl"

post_install() {
	vinstall LICENSE 644 usr/share/licenses/${pkgname}
	vinstall NOTICE 644 usr/share/licenses/${pkgname}
	# we don't need the libtool archives anymore
	find ${DESTDIR} -type f -name *.la -delete
}
