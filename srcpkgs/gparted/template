# Template file for 'gparted'
pkgname=gparted
version=0.12.0
distfiles="${SOURCEFORGE_SITE}/$pkgname/$pkgname-$version.tar.bz2"
build_style=gnu-configure
configure_args="--disable-scrollkeeper --enable-libparted-dmraid"
short_desc="Gnome Partition Editor"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://gparted.sourceforge.net"
license="GPL-2"
checksum=2c2f4ac580f322abf5b028092a4316792e3f18ef4de4785c9d97fc9ad12d6a6d
long_desc="
 GParted is a free partition editor for graphically managing your disk
 partitions.

 GParted is useful for tasks such as: creating space for new operating
 systems, restructuring disk space to separate user and operating system
 data, and copying partitions to enable upgrading to a larger hard disk drive.

 Your hard disk drive or USB flash drive can be subdivided into one or more
 partitions. GParted enables you to reorganize your disk partitions while
 preserving the contents of these partitions."

gtk_iconcache_dirs="/usr/share/icons/hicolor"

Add_dependency run hicolor-icon-theme
Add_dependency run desktop-file-utils
Add_dependency run polkit

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libuuid-devel
Add_dependency build libparted-devel
Add_dependency build libsigc++-devel
Add_dependency build gnome-doc-utils
Add_dependency build glib-devel
Add_dependency build glibmm-devel
Add_dependency build atkmm-devel
Add_dependency build pangomm-devel
Add_dependency build gtk+-devel
Add_dependency build gtkmm2-devel

post_install() {
	vinstall ${FILESDIR}/org.void.pkexec.gparted.policy \
		644 /usr/share/polkit-1/actions
	vinstall ${FILESDIR}/gparted-pkexec 755 usr/bin
	sed -i -e "s/Exec=.*/Exec=gparted-pkexec/" \
		${DESTDIR}/usr/share/applications/gparted.desktop
}
