# Template file for 'xfce4-session'
pkgname=xfce4-session
version=4.8.1
revision=3
distfiles="http://archive.xfce.org/src/xfce/${pkgname}/4.8/$pkgname-$version.tar.bz2"
build_style=gnu-configure
configure_args="--disable-gnome --disable-libgnome-keyring --disable-hal
--enable-session-screenshots --enable-upower --enable-consolekit
--enable-polkit --enable-panel-plugin --disable-debug --disable-static"
short_desc="Xfce session manager"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=1df52a77d87ed4d27b4f40a2f03a0b6334422d64bdc4e31b9aac22e25e68b829
long_desc="
 xfce4-session is the session manager for the Xfce desktop environment."

conf_files="/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml"
gtk_iconcache_dirs="/usr/share/icons/hicolor"
subpackages="$pkgname-devel" 

Add_dependency run libpng
Add_dependency run ConsoleKit-x11

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libxfce4ui-devel
Add_dependency build gtk+-devel
Add_dependency build xfconf-devel
Add_dependency build dbus-glib-devel
Add_dependency build libwnck2-devel
Add_dependency build xfce4-panel-devel
Add_dependency build ConsoleKit-devel
Add_dependency build iceauth

Add_dependency full upower
Add_dependency full udisks
Add_dependency full hicolor-icon-theme
Add_dependency full desktop-file-utils

post_install()
{
	install -dm700 ${DESTDIR}/etc/polkit-1/localauthority
	install -dm755 ${DESTDIR}/etc/polkit-1/localauthority/50-local.d
	install -m644 ${FILESDIR}/org.freedesktop.consolekit.pkla \
		${DESTDIR}/etc/polkit-1/localauthority/50-local.d/
	install -m644 ${FILESDIR}/org.freedesktop.upower.pkla \
		${DESTDIR}/etc/polkit-1/localauthority/50-local.d/
}
