# Template file for 'xfce4-session'
pkgname=xfce4-session
version=4.9.2
homepage="http://xfce.org"
distfiles="http://archive.xfce.org/src/xfce/xfce4-session/4.9/$pkgname-$version.tar.bz2"
build_style=gnu-configure
configure_args="--disable-static --enable-libgnome-keyring"
short_desc="Xfce session manager"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
checksum=a7a3343ea25c6ea8c2a987a1189268a9467408218720ebfebd0f428a11c35567
long_desc="
 xfce4-session is the session manager for the Xfce desktop environment."

conf_files="/etc/xdg/xfce4/xfconf/xfce-perchannel-xml/xfce4-session.xml"
gtk_iconcache_dirs="/usr/share/icons/hicolor"
subpackages="$pkgname-devel" 
make_dirs="/etc/polkit-1/localauthority 0700 root root"

Add_dependency run ConsoleKit-x11

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libxfce4ui-devel
Add_dependency build gtk+-devel
Add_dependency build xfconf-devel
Add_dependency build dbus-glib-devel
Add_dependency build libwnck2-devel
Add_dependency build xfce4-panel-devel
Add_dependency build ConsoleKit-devel
Add_dependency build libgnome-keyring-devel
Add_dependency build iceauth

Add_dependency run upower
Add_dependency run udisks
Add_dependency run hicolor-icon-theme
Add_dependency run desktop-file-utils

post_install() {
	install -dm755 ${DESTDIR}/etc/polkit-1/localauthority/50-local.d
	install -m644 ${FILESDIR}/org.freedesktop.consolekit.pkla \
		${DESTDIR}/etc/polkit-1/localauthority/50-local.d/
	install -m644 ${FILESDIR}/org.freedesktop.upower.pkla \
		${DESTDIR}/etc/polkit-1/localauthority/50-local.d/
}
