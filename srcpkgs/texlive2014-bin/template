# Template file for 'texlive-bin'
pkgname=texlive2014-bin
version=2014
revision=5
maintainer="Christian Neukirchen <chneukirchen@gmail.com>"
homepage="http://tug.org/texlive/"
license="GPL-2"
short_desc="TeX Live Binary distribution through tl-install"
depends="cairo pixman graphite t1lib gd poppler libsigsegv
 zziplib libpng libjpeg-turbo freetype icu harfbuzz wget perl
 ghostscript xz"
distfiles="ftp://ftp.tug.org/texlive/historic/${version}/tlnet-final/install-tl-unx.tar.gz"
checksum=84e3cc7c1e4583fbdea6f8ad21eb9a4b5a112239dbbefffa388833f946d91aec
create_wrksrc=yes

broken="http://build.voidlinux.eu/builders/x86_64_builder/builds/13729/steps/shell_3/logs/stdio"

# Package build options
build_options="basic small medium full"
build_options_default="small"
desc_option_basic="Install TeXLive using scheme-basic"
desc_option_small="Install TeXLive using scheme-small"
desc_option_medium="Install TeXLive using scheme-medium"
desc_option_full="Install TeXLive using scheme-full"

pre_install(){
	rm -rf ${wrksrc}/install-tl*/tlpkg/installer/xz \
		${wrksrc}/install-tl*/tlpkg/installer/wget
}

do_install(){
	vmkdir opt/texlive${version}-installer
	vcopy "install-tl-*/*" /opt/texlive${version}-installer
	vinstall ${FILESDIR}/void.profile 644 opt/texlive${version}-installer
	if [ "$build_option_basic" ]; then
		echo "selected_scheme scheme-basic"
	elif [ "$build_option_small" ]; then
		echo "selected_scheme scheme-small"
	elif [ "$build_option_medium" = "medium" ];then
		echo "selected_scheme scheme-medium"
	elif [ "$build_option_full" ];then
		echo "selected_scheme scheme-full"
	fi >>${DESTDIR}/opt/texlive${version}-installer/void.profile
	vlicense ${DESTDIR}/opt/texlive${version}-installer/LICENSE.CTAN
	vlicense ${DESTDIR}/opt/texlive${version}-installer/LICENSE.TL
}
