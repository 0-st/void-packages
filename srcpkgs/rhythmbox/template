# Template file for 'rhythmbox'.
pkgname=rhythmbox
version="2.90.1.git$(date -u +%Y%m%d)"
homepage="http://www.rhythmbox.org"
#distfiles="${GNOME_SITE}/$pkgname/0.13/$pkgname-$version.tar.bz2"
build_style=gnu-configure
configure_args="--with-mdns=avahi --disable-scrollkeeper --disable-static
--disable-python --disable-schemas-install --enable-daap --with-webkit
--disable-schemas-compile --without-hal --disable-vala"
short_desc="GNOME integrated music management application, inspired by Apple's iTunes."
maintainer="davehome <davehome@redthumb.info.tm>"
license="GPL-2"
checksum=931d42e7fcad8e5ab76d52900fbbbe3d9de4099dc04e2b35f27e0e99121c4796
long_desc="
 Rhythmbox is an integrated music management application, originally inspired
 by Apple's iTunes. It is free software, designed to work well under the
 GNOME Desktop, and based on the powerful GStreamer media framework.
 
 Among the many features of Rhythmbox, you will find:
 
 * Easy to use music browser
 * Searching and sorting
 * Comprehensive audio format support through GStreamer
 * Internet Radio support including last.fm streams
 * Playlists
 * Display audio visualizations
 * Transfer music to and from iPod, MTP, and USB Mass Storage music players
 * Display album art and song lyrics downloaded from the internet
 * Play, rip, and burn audio CDs
 * Automatically download audio podcasts
 * Browse, preview, and download albums from Magnatune and Jamendo"

nofetch=yes
noextract=yes

gtk_iconcache_dirs="/usr/share/icons/hicolor"
subpackages="lib${pkgname} ${pkgname}-devel"

Add_dependency run glibc
Add_dependency run libpeas
Add_dependency run glib
Add_dependency run gstreamer
Add_dependency run gst-plugins-base
Add_dependency run zlib
Add_dependency run libnotify
Add_dependency run libSM
Add_dependency run libICE
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run libgudev
Add_dependency run webkit-gtk3
Add_dependency run libsoup-gnome
Add_dependency run libsoup
Add_dependency run gtk+3
Add_dependency run atk
Add_dependency run pango
Add_dependency run gdk-pixbuf
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run libgirepository
Add_dependency run libffi
Add_dependency run totem-pl-parser
Add_dependency run libxml2
Add_dependency run libmusicbrainz
Add_dependency run GConf
Add_dependency run brasero
Add_dependency run libmtp
Add_dependency run libusb-compat
Add_dependency run clutter-gst
Add_dependency run clutter-gtk
Add_dependency run mx
Add_dependency run clutter
Add_dependency run cogl
Add_dependency run json-glib
Add_dependency run MesaLib
Add_dependency run libXi
Add_dependency run libdrm
Add_dependency run libX11
Add_dependency run libXext
Add_dependency run libXdamage
Add_dependency run libXcomposite
Add_dependency run libXfixes
Add_dependency run grilo
Add_dependency run libdmapsharing
Add_dependency run libgnome-keyring
Add_dependency run librhythmbox

Add_dependency build git
Add_dependency build gnome-common
Add_dependency build gtk-doc
Add_dependency build gettext-devel
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gtk+3-devel
Add_dependency build totem-pl-parser-devel
Add_dependency build libsoup-devel
Add_dependency build libsoup-gnome-devel
Add_dependency build gst-plugins-base-devel
Add_dependency build json-glib-devel
Add_dependency build libgudev-devel
Add_dependency build libmusicbrainz-devel
Add_dependency build libdiscid-devel
Add_dependency build libmtp-devel
Add_dependency build avahi-glib-libs-devel
Add_dependency build webkit-gtk3-devel
Add_dependency build libpeas-devel
Add_dependency build brasero-devel
Add_dependency build libnotify-devel 
Add_dependency build grilo-devel
Add_dependency build json-glib-devel
Add_dependency build clutter-gtk-devel
Add_dependency build clutter-gst-devel
Add_dependency build mx-devel
Add_dependency build libdmapsharing-devel

Add_dependency full desktop-file-utils
Add_dependency full hicolor-icon-theme

do_fetch() {
	local url="git://git.gnome.org/rhythmbox"
	msg_normal "Fetching source from git repo at $url\n"
	git clone ${url} ${pkgname}-${version}
}

pre_configure() {
	./autogen.sh
}
