# Template build file for 'xulrunner'.
pkgname=xulrunner
_xulver=1.9.2
_xulpatchver=3
_ffver=3.6.3
# Current xulrunner version is available at $wrksrc/config/milestone.txt
if [ -n "${_xulpatchver}" ]; then
	version=${_xulver}.${_xulpatchver}
else
	version=${_xulver}
fi
wrksrc=mozilla-${_xulver}
distfiles="${MOZILLA_SITE}/firefox/releases/${_ffver}/source/firefox-${_ffver}.source.tar.bz2"
build_style=gnu_configure
LDFLAGS="-Wl,-R/usr/lib/${pkgname}-${_xulver}"
configure_args="--enable-application=xulrunner --enable-libxul
--disable-crashreporter --disable-tests --disable-debug --enable-dbus
--enable-startup-notification --enable-canvas --enable-svg
--disable-mochitest --enable-strip --enable-pango --enable-optimize
--disable-embedding-tests --disable-installer --disable-oji
--disable-javaxpcom --disable-necko-wifi --disable-updater
--disable-gnomevfs --disable-gnomeui --disable-dbm --with-pthreads
--with-system-zlib --with-system-bz2 --enable-system-cairo
--with-system-png --with-system-jpeg --with-system-sqlite
--with-system-nspr --with-system-nss --enable-safe-browsing"
short_desc="XML User Interface Language runtime environment"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=35a0b35d79baa502b6c5781ed3e9c4b5eb623bdaf1940460dcf465192848a2d0
long_desc="
 XULRunner is a runtime environment for applications using the
 XML User Interface Language, XUL. It is the successor of the Gecko
 runtime environment"

subpackages="$pkgname-devel"
Add_dependency run libgcc
Add_dependency run jpeg
Add_dependency run libpng
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run libXrender
Add_dependency run libX11
Add_dependency run zlib
Add_dependency run nspr
Add_dependency run dbus-libs
Add_dependency run glib
Add_dependency run pango
Add_dependency run atk
Add_dependency run libXt
Add_dependency run libXext
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run gtk+
Add_dependency run alsa-lib
Add_dependency run sqlite
Add_dependency run libIDL
Add_dependency run nss
Add_dependency run libnotify
Add_dependency run dbus-glib
Add_dependency run startup-notification
Add_dependency build zip
Add_dependency build python
Add_dependency build bison
Add_dependency build jpeg-devel
Add_dependency build libpng-devel
Add_dependency build cairo-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build libXrender-devel
Add_dependency build libX11-devel
Add_dependency build zlib-devel
Add_dependency build nspr-devel
Add_dependency build dbus-devel
Add_dependency build glib-devel
Add_dependency build pango-devel
Add_dependency build atk-devel
Add_dependency build libXt-devel
Add_dependency build libXext-devel
Add_dependency build gtk+-devel
Add_dependency build alsa-lib-devel
Add_dependency build sqlite-devel
Add_dependency build libIDL-devel
Add_dependency build nss-devel
Add_dependency build libnotify-devel
Add_dependency build dbus-glib-devel
Add_dependency build startup-notification-devel

post_install()
{
	# Remove libsqlite3, provided by sqlite.
	rm -f ${DESTDIR}/usr/lib/${pkgname}-${_xulver}/libsqlite3.so
	rm -f ${DESTDIR}/usr/lib/pkgconfig/mozilla-nss.pc
}
