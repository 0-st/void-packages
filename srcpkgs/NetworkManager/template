# Template file for 'NetworkManager'
pkgname=NetworkManager
version=0.9.4.0
revision=3
distfiles="${GNOME_SITE}/$pkgname/0.9/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--with-distro=gentoo
--with-dhcpcd=/usr/sbin/dhcpcd --with-dhclient=no --disable-wimax
--with-system-ca-path=/etc/ssl/certs --enable-more-warnings=no
--with-crypto=nss --disable-static --enable-ppp --enable-concheck
--with-systemdsystemunitdir=/lib/systemd/system
--with-session-tracking=systemd"
makedepends="pkg-config intltool gobject-introspection libuuid-devel nss-devel dbus-glib-devel libgudev-devel wireless_tools-devel libnl3-devel polkit-devel ppp-devel iptables-devel libsoup-devel systemd-devel"
fulldepends="dbus>=0 iproute2 dhcpcd>=5.5.4_1 wpa_supplicant"
systemd_services="${pkgname}.service on"
conf_files="/etc/${pkgname}/${pkgname}.conf"
subpackages="$pkgname-devel libnm"
short_desc="Network Management daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnome.org/projects/NetworkManager/"
license="GPL-2"
checksum=eb4f124008b3d855a37205d03ef035b7218639cd7332bdae5567095977e93e0f
long_desc="
 NetworkManager attempts to keep an active network connection available at all
 times. It is intended only for the desktop use-case, and is not intended for
 usage on servers. The point of NetworkManager is to make networking
 configuration and setup as painless and automatic as possible. If using DHCP,
 NetworkManager is _intended_ to replace default routes, obtain IP addresses
 from a DHCP server, and change nameservers whenever it sees fit."

post_install() {
	# Install config file.
	vinstall ${FILESDIR}/${pkgname}.conf 644 etc/${pkgname}
	vinstall ${FILESDIR}/${pkgname}.tmpfiles.d 644 \
		usr/lib/tmpfiles.d ${pkgname}.conf
	rm -rf ${DESTDIR}/etc/init.d
}
