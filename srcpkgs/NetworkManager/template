# Template file for 'NetworkManager'
pkgname=NetworkManager
version=0.9.6.4
revision=2
build_style=gnu-configure
configure_args="--with-distro=gentoo
 --with-dhcpcd=/usr/sbin/dhcpcd --with-dhclient=no --disable-wimax
 --with-system-ca-path=/etc/ssl/certs --enable-more-warnings=no
 --with-crypto=nss --disable-static --enable-ppp --enable-concheck
 --with-systemdsystemunitdir=/usr/lib/systemd/system
 --with-session-tracking=systemd --with-udev-dir=/usr/lib/udev
 --with-kernel-firmware-dir=/usr/lib/firmware
 --with-pppd-plugin-dir=/usr/lib/pppd/2.4.5"
makedepends="pkg-config intltool automake gobject-introspection libuuid-devel
 nss-devel dbus-glib-devel libgudev-devel wireless_tools-devel libnl3-devel
 polkit-devel ppp-devel iptables-devel libsoup-devel systemd-devel"
fulldepends="dbus>=0 iproute2 dhcpcd>=5.5.4_1 wpa_supplicant
 mobile-broadband-provider-info"
systemd_services="${pkgname}.service on"
conf_files="/etc/${pkgname}/${pkgname}.conf"
subpackages="$pkgname-devel libnm"
short_desc="Network Management daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnome.org/projects/NetworkManager/"
license="GPL-2"
distfiles="${GNOME_SITE}/$pkgname/0.9/$pkgname-$version.tar.xz"
checksum=511b411e055d187bc8f26c519fdb3e55e07fc40d4adecbbec623c0249380a7eb

make_dirs="
/etc/NetworkManager/dispatcher.d        0755    root    root
/etc/NetworkManager/system-connections  0755    root    root
/var/lib/NetworkManager                 0700    root    root"

pre_configure() {
	 AUTOPOINT="intltoolize -f -c --automake" autoreconf -fi
}

post_install() {
	# Install config file.
	vinstall ${FILESDIR}/${pkgname}.conf 644 etc/${pkgname}
	rm -rf ${DESTDIR}/etc/init.d
}
