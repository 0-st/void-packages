# Template file for 'libmp4v2'
pkgname=libmp4v2
version=1.6.1
wrksrc="mpeg4ip-${version}"
distfiles="http://repository.slacky.eu/slackware-12.1/multimedia/mpeg4ip/$version/src/mpeg4ip-$version.tar.gz"
build_style=custom-install
short_desc="MPEG-4 library from mpeg4ip"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=7049793ab18efc7d36b0581ecf137b59b1d9e4cee1df20a4241ffd37ce510214
long_desc="
 The MPEG4IP project provides a standards-based system for encoding,
 streaming, and playing encoded audio, video and text. To achieve
 this we've integrated a number of existing open source packages,
 and created some original code to fill in the gaps."

subpackages="$pkgname-devel mpeg4ip"
Add_dependency run glibc
Add_dependency run libstdc++

do_install()
{
	cd ${wrksrc} || return 1
	touch bootstrapped && echo "" > lib/rtp/configure && \
		echo "" > lib/SDLAudio/configure
	./configure --prefix=/usr USENASM=no || return 1
	for dir in lib/gnu lib/mp4av lib/mp4v2; do
		cd ${wrksrc}/${dir}
		make || return 1
		make DESTDIR=${DESTDIR} install || return 1
	done
	cd ${wrksrc}
	install -d ${DESTDIR}/usr/include
	install -m644 include/mpeg4ip.h ${DESTDIR}/usr/include || return 1
	install -m644 include/mpeg4ip_version.h \
		${DESTDIR}/usr/include || return 1
	install -m644 mpeg4ip_config.h ${DESTDIR}/usr/include || return 1
}
