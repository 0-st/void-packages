# Template file for 'plymouth'
pkgname=plymouth
version=20120111
homepage="http://cgit.freedesktop.org/plymouth"
#distfiles="${homepage}/snapshot/$pkgname-$version.tar.bz2"
distfiles="http://xbps.nopcode.org/distfiles/plymouth-$version.tar.xz"
build_style=gnu-configure
configure_args="--enable-pango --enable-libdrm_intel --enable-libdrm_radeon
--enable-libdrm_nouveau --enable-libkms --enable-gdm-transition
--enable-systemd-integration --with-system-root-install
--with-release-file=/etc/os-release --disable-tests --disable-static
--without-rhgb-compat-link --with-logo=/usr/share/void-artwork/splash.png
--with-background-color=0xffffff"
depends="void-artwork"
makedepends="automake pkg-config gtk+-devel libdrm-devel"
short_desc="Graphical boot animation and logger"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
checksum=f819a53d810633b2c93069d95681cf2440c65e411e360ab170eba36d76e46de3
long_desc="
 Plymouth is an application that runs very early in the boot process
 (even before the root filesystem is mounted!) that provides a graphical
 boot animation while the boot process happens in the background."

subpackages="libplymouth ${pkgname}-devel"
conf_files="/etc/plymouth/plymouthd.conf"
make_dirs="
/var/lib/plymouth 0755 root root
/var/spool/plymouth 0755 root root"



pre_configure() {
	autoreconf -fi
}

post_install() {
	rm -f ${DESTDIR}/usr/libexec/plymouth/*
	vinstall ${FILESDIR}/plymouth-update-initrd 755 usr/libexec/plymouth

	# initramfs-tools hook
	vinstall ${FILESDIR}/plymouth.hook 755 \
		usr/share/initramfs-tools/hooks plymouth
	vinstall ${FILESDIR}/plymouth.init-bottom 755 \
		usr/share/initramfs-tools/scripts/init-bottom plymouth
	vinstall ${FILESDIR}/plymouth.init-premount 755 \
		usr/share/initramfs-tools/scripts/init-premount plymouth
}
