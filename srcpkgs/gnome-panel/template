# Template file for 'gnome-panel'
pkgname=gnome-panel
version=2.91.91
distfiles="${GNOME_SITE}/$pkgname/2.91/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--disable-schemas-install --disable-scrollkeeper
--with-gconf-schema-file-dir=/usr/share/gconf/schemas
--localstatedir=/var --enable-eds=auto"
short_desc="GNOME Panel"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=bc9193f621bb72557ff9bf48f433dc99f041a927224dafe6d81936e084024670
long_desc="
 This packages the GNOME panel."

gconf_schemas="
panel-compatibility.schemas
panel-global.schemas
panel-general.schemas
panel-toplevel.schemas
panel-object.schemas
clock.schemas
fish.schemas
workspace-switcher.schemas
window-list.schemas"
gconf_entries="panel-default-setup.entries"

gtk_iconcache_dirs="/usr/share/icons/hicolor"
subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run dbus-libs
Add_dependency run dbus-glib
Add_dependency run glib
Add_dependency run atk
Add_dependency run pango
Add_dependency run cairo
Add_dependency run libpng
Add_dependency run gdk-pixbuf
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run libSM
Add_dependency run libICE
Add_dependency run libX11
Add_dependency run libXau
Add_dependency run libXrandr
Add_dependency run librsvg
Add_dependency run gtk+3
Add_dependency run libical
Add_dependency run GConf
Add_dependency run libgweather
Add_dependency run libwnck
Add_dependency run evolution-data-server
Add_dependency run gnome-menus
Add_dependency run gnome-desktop

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gnome-doc-utils
Add_dependency build libSM-devel
Add_dependency build libICE-devel
Add_dependency build gnome-desktop-devel
Add_dependency build GConf-devel
Add_dependency build gnome-menus-devel
Add_dependency build gtk+3-devel
Add_dependency build atk-devel
Add_dependency build glib-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build cairo-devel
Add_dependency build pango-devel
Add_dependency build dbus-glib-devel
Add_dependency build libXrandr-devel
Add_dependency build libX11-devel
Add_dependency build evolution-data-server-devel
Add_dependency build libical-devel
Add_dependency build librsvg-devel
Add_dependency build dbus-devel
Add_dependency build libgweather-devel
Add_dependency build libwnck-devel
Add_dependency build libpng-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build libXau-devel

Add_dependency full hicolor-icon-theme
Add_dependency full desktop-file-utils

post_install()
{
	local f

	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	for f in ${gconf_schemas}; do
		gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${f} \
                	--domain ${pkgname}-3.0 ${wrksrc}/${f}
	done
}
