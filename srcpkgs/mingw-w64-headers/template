# Template file for 'mingw-w64-headers'
_shortname=mingw-w64
pkgname=$_shortname-headers
_majversion=1.0
_snapshot=20110523
version=${_majversion}.$_snapshot
distfiles="${SOURCEFORGE_SITE}/$_shortname/$_shortname/$_shortname-v$_majversion-snapshot-$_snapshot.tar.bz2"
build_style=custom-install
short_desc="mingw-w64 headers"
maintainer="davehome <davehome@redthumb.info.tm>"
homepage="http://mingw-w64.sourceforge.net/"
license="Public Domain, BSD, LGPL, ZPL"
checksum=12dc02c40cb2d28dd70aeea792fe998e29acfc614589ecf7508cd1fbb93a4154
long_desc="
 These headers are reviewed as to find open documentation available on the
 internet -- without referencing existing properitery header-set of
 Microsoft VC.

 For API's, see general references on www.webtropy.com, google, and of course
 the Microsoft MSDN2 references, which are freely available.

 Additionally, this header set tries to provide most header names and their
 content as defined by Microsoft -- while keeping compatible, as far as it is
 possible, with POSIX source for gcc 4.3 and later."

nostrip=yes
noverifyrdeps=yes

wrksrc=$_shortname-v$_majversion-$_snapshot/$pkgname

_mingwprefix=/opt

do_build()
{
	if [ "${xbps_machine}" = "x86_64" ]; then
		_mingwtriplet="${xbps_machine}-w64-mingw32"
		_build_args="--build=${xbps_machine}-unknown-linux-gnu"
	else
		_mingwtriplet="${xbps_machine}-w32-mingw32"
		_build_args="--build=${xbps_machine}-pc-linux-gnu"
	fi

	./configure --prefix=${_mingwprefix} --bindir=${_mingwprefix}/bin \
		${_build_args} --host=${_mingwtriplet} --with-sdk=all

	make ${makejobs}
}

do_install()
{
	make DESTDIR=${DESTDIR} install
}
