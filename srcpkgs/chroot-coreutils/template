# Template file for 'chroot-coreutils'
pkgname=chroot-coreutils
version=8.17
revision=1
wrksrc=coreutils-${version}
distfiles="http://ftp.gnu.org/gnu/coreutils/coreutils-$version.tar.xz"
build_style=gnu-configure
configure_args="--without-gmp --disable-libcap --disable-xattr
--disable-acl --disable-rpath --disable-nls
--enable-no-install-program=stdbuf,arch,su
--enable-install-program=hostname"
short_desc="The GNU core utilities - for xbps-src use"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnu.org/software/coreutils"
license="GPL-3"
checksum=4e075a0d238072a5bd079046e1f024dc5e0d9133d43a39c73d0b86b0d1e2c5e5
long_desc="
 The GNU Core Utilities are the basic file, shell and text manipulation
 utilities of the GNU operating system. These are the core utilities
 which are expected to exist on every operating system.

 This package is not meant to be installed by any user, this must be
 installed as a dependency of base-chroot to create XBPS binary packages."

bootstrap=yes
conflicts="coreutils>=0"
provides="coreutils-${version}"

pre_configure() {
	sed -i 's/^\(SUBDIRS =\).*/\1 lib src/g' Makefile.in
}

post_install() {
	# Create symlinks in /bin.
	vmkdir bin
	for f in true false echo ls pwd; do
		cd ${DESTDIR}/bin && ln -sf ../usr/bin/$f .
	done
}
