# Template file for 'odroid-u2-uboot'
pkgname=bananapi-uboot
version=15.01
revision=1
hostmakedepends="uboot-mkimage"
short_desc="Banana Pi uboot module"
maintainer="necrophcodr <necrophcodr@necrophcodr.me>"
license="GPL-2"
homepage="https://github.com/hardkernel/u-boot"
distfiles="https://github.com/Bananian/u-boot-bananapi/archive/bananian-v${version}.tar.gz"
checksum="935ac90624cc00106a1547b8da2b3e59ab09db9cf658df7126a93738fac74fe5"
wrksrc="u-boot-bananapi-bananian-v${version}"

only_for_archs="armv7l"

do_configure() {
	make mrproper
	make Bananapi_config
}

do_build() {
	unset CFLAGS CXXFLAGS LDFLAGS
  
	if [ "$CROSS_BUILD" ]; then
		make ARCH=arm CROSS_COMPILE=${XBPS_CROSS_TRIPLET}-
	else
		make ARCH=arm
	fi
}

do_install() {
	vinstall u-boot.bin 600 boot
}
