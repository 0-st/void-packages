# Template file for 'cgminer'
pkgname=cgminer
version=2.10.4
revision=1
build_style=gnu-configure
configure_args="--disable-adl --enable-cpumining --enable-scrypt"
hostmakedepends="pkg-config yasm"
makedepends="libcurl-devel opencl-headers libudev-devel ncurses-devel nvidia-opencl"
short_desc="Multi-threaded multi-pool CPU and GPU miner for bitcoin"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-3"
homepage="https://github.com/ckolivas/cgminer"
distfiles="http://ck.kolivas.org/apps/cgminer/cgminer-${version}.tar.bz2"
checksum=ae80c863498b8cfa87cc0dc38c525d005df82b569e2a4a050802914ee01a1b3f

post_install() {
	vinstall example.conf 644 etc cgminer.conf
	sed -i -e 's#/usr/local/bin#/usr/bin#g' ${DESTDIR}/etc/cgminer.conf
	vinstall ${FILESDIR}/cgminer.service 644 usr/lib/systemd/system
}

cgminer_package() {
	conf_files="/etc/cgminer.conf"
	pkg_install() {
		vmove etc
		vmove usr
	}
}
