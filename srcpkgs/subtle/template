# Template file for 'subtle'
pkgname=subtle
version=0.11.3285
revision=1
hostmakedepends="mercurial ruby-devel python3 pkg-config"
makedepends="ruby-devel libX11-devel libXpm-devel libXft-devel
 libXinerama-devel libXrandr-devel libXtst-devel"
short_desc="Manual tiling window manager"
maintainer="Andrea Brancaleoni <abc@pompel.me>"
license="GPL-2"
homepage="http://subtle.subforge.org"
conf_files="/etc/xdg/subtle/subtle.rb"

do_fetch() {
	local url="http://hg.subforge.org/${pkgname}"
	msg_normal "Fetching source ${version%.*} from $url ...\n"
	hg clone --rev ${version##*.} ${url} ${pkgname}-${version}
}
do_configure() {
	mv /usr/bin/pkg-config{,.old}
	cp ${XBPS_WRAPPERDIR}/pkg-config /usr/bin
	sed -i 's|pkg-config|pkg-config.old|g' /usr/bin/pkg-config
	PATH=${XBPS_WRAPPERDIR}:$PATH DESTDIR=$PKGDESTDIR rake config
	mv /usr/bin/pkg-config{.old,}
}
do_build() {
	rake build
}
do_install() {
	rake install
}
