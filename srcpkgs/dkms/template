# Template file for 'dkms'
pkgname=dkms
version=2.2.0.0
revision=2
homepage="http://linux.dell.com/dkms"
distfiles="${homepage}/permalink/dkms-$version.tar.gz"
build_style=custom-install
short_desc="Dynamic Kernel Modules System"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
checksum=119b5aeaa4db0495116f14409367fc8f92d1147a25a75d72d59be471f366f7d6
long_desc="
 dkms is a framework which allows kernel modules to be dynamically built for
 each kernel on your system in a simplified and organized fashion."

conf_files="/etc/dkms/framework.conf"

noarch=yes
Add_dependency run bash
Add_dependency run module-init-tools
Add_dependency run gcc
Add_dependency run make
Add_dependency run coreutils
Add_dependency run kernel-headers

do_install()
{
	# We are only interested in the bare minimum.
	vinstall dkms 755 usr/sbin
	vinstall dkms.8 644 usr/share/man/man8
	vinstall dkms_dbversion 644 var/lib/dkms
	vinstall dkms.bash-completion etc/bash_completion.d dkms
	vinstall dkms_framework.conf 644 etc/dkms framework.conf
	# Kernel hooks.
	vinstall ${FILESDIR}/kernel.d/dkms.postinst 750 \
		etc/kernel.d/post-install 20-dkms
	vinstall ${FILESDIR}/kernel.d/dkms.prerm 750 \
		etc/kernel.d/pre-remove 20-dkms
}
