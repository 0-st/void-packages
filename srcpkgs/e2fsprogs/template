# Template file for 'e2fsprogs'
pkgname=e2fsprogs
version=1.41.14
revision=1
distfiles="$SOURCEFORGE_SITE/e2fsprogs/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--enable-htree --enable-elf-shlibs --enable-fsck
--enable-e2initrd-helper --disable-rpath --with-root-prefix=
-disable-uuidd --disable-libuuid --disable-libblkid
--enable-symlink-build --enable-symlink-install"
make_install_args="install-libs"
short_desc="Ext2/3/4 Filesystem Utilities"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=3f8ac1fedd7c4bec480afcbe4acabdd4ac59ec0446a0fd50c8975cd0aad7b176
long_desc="
 It provides the filesystem utilities for use with the ext2 filesystem.
 It also supports the ext3 filesystem with journaling support."

subpackages="$pkgname-devel $pkgname-libs"
conf_files="/etc/mke2fs.conf"
Add_dependency run glibc
Add_dependency run libuuid
Add_dependency run libblkid
Add_dependency run e2fsprogs-libs
Add_dependency build gettext
Add_dependency build libuuid-devel
Add_dependency build libblkid-devel
Add_dependency build pkg-config
Add_dependency build texinfo

post_install()
{
	# Remove stuff belonging to libblkid or libuuid pkgs.
	find ${DESTDIR} -name \*blkid\* -o -name \*findfs\* \
		-name \*uuidd\* -o -name \*uuidgen\* | \
		xargs rm -rf
	rm -f ${DESTDIR}/lib/libuuid*
	rm -f ${DESTDIR}/usr/share/man/man3/uuid*
	rm -f ${DESTDIR}/usr/lib/libuuid*
	rm -rf ${DESTDIR}/usr/include/uuid
	rm -f ${DESTDIR}/usr/lib/pkgconfig/uuid*
}
