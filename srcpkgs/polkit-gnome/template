# Template file for 'polkit-gnome'
pkgname=polkit-gnome
version=0.101
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--localstatedir=/var --with-gtk=3.0"
short_desc="PolicyKit integration for the GNOME desktop"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=f1452e37b6681a0ade2c0cbb3734e6f78c421b958ab4d4eb6a2cd3b9f50db8d0
long_desc="
 PolicyKit is an application-level toolkit for defining and handling the
 policy that allows unprivileged processes to speak to privileged processes.

 It is a framework for centralizing the decision making process with respect
 to granting access to privileged operations (like calling the HAL Mount()
 method) for unprivileged (desktop) applications.

 This package contains the glue to integrate with the GNOME desktop."

subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run polkit
Add_dependency run glib
Add_dependency run atk
Add_dependency run pango
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run gdk-pixbuf
Add_dependency run libpng
Add_dependency run gtk+3

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build polkit-devel
Add_dependency build glib-devel
Add_dependency build atk-devel
Add_dependency build pango-devel
Add_dependency build cairo-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build libpng-devel
Add_dependency build gtk+3-devel
Add_dependency build gobject-introspection

post_install()
{
	# Disabled for now, will check later.
	:
	# Start polkit-gnome-authentication-agent-1 via XDG autostart,
	# otherwise it will run with the GDM user and won't work.
	#install -D -m644 \
	#	${FILESDIR}/polkit-gnome-authentication-agent-1.desktop \
	#	${DESTDIR}/etc/xdg/autostart/polkit-gnome-authentication-agent-1.desktop
}
