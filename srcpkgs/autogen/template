# Template build file for 'autogen'.
pkgname=autogen
version=5.18.2
revision=1
build_style=gnu-configure
hostmakedepends="pkg-config which"
makedepends="guile-devel libxml2-devel gc-devel"
short_desc="The Automated Program Generator"
maintainer="davehome <davehome@redthumb.info.tm>"
license="GPL3"
homepage="http://autogen.sourceforge.net/"
distfiles="${GNU_SITE}/${pkgname}/rel${version}/${pkgname}-${version}.tar.gz"
checksum=cc2702dec21ba5b01144865163f6d1a54268d2b72aafc5520ad0e0cb57104068

replaces="autogen-docs>=0"

do_configure() {
	GUILE_CFLAGS="$(pkg-config --cflags guile-2.0)"
	GUILE_LDFLAGS="$(pkg-config --libs guile-2.0)"

	./configure ${configure_args} --with-libguile \
		--with-libguile-cflags="${GUILE_CFLAGS}" \
		--with-libguile-libs="${GUILE_LDFLAGS}"
}

post_install() {
	mv -v ${DESTDIR}/usr/share/pkgconfig ${DESTDIR}/usr/lib
}

autogen-devel_package() {
	short_desc+=" - development files"
	depends="autogen"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/share/aclocal
		vmove "usr/lib/*.a"
		vmove "usr/lib/*.so"
	}
}
