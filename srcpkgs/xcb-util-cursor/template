# Template build for 'xcb-util-cursor'.
pkgname=xcb-util-cursor
version=0.1.0
revision=2
build_style=gnu-configure
configure_args="--disable-static"
hostmakedepends="pkg-config gperf automake libtool xorg-util-macros"
makedepends="xcb-util-renderutil-devel xcb-util-image-devel"
short_desc="XCB cursor library (libxcursor port)"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://xcb.freedesktop.org"
license="MIT"

do_fetch() {
	git clone git://anongit.freedesktop.org/xcb/util-cursor ${pkgname}-${version}
	cd ${pkgname}-${version}
	# Post 0.1.0. Last commit from 20131013.
	git checkout 3097d12
	git submodule update --init
}

pre_configure() {
	NOCONFIGURE=1 ./autogen.sh
}

xcb-util-cursor-devel_package() {
	depends="libxcb-devel xcb-util-renderutil-devel xcb-util-image-devel ${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
	}
}

xcb-util-cursor_package() {
	pkg_install() {
		vmove all
	}
}
