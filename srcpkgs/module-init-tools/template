# Template file for 'module-init-tools'
pkgname=module-init-tools
version=3.16
#distfiles="${KERNEL_SITE}/utils/kernel/$pkgname/$pkgname-$version.tar.bz2"
distfiles="http://anduin.linuxfromscratch.org/sources/LFS/lfs-packages/conglomeration/module-init-tools/module-init-tools-3.16.tar.bz2"
revision=1
short_desc="Tools for managing kernel modules"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://kerneltools.org"
license="GPL-2"
checksum=e1f2cdcae64a8effc25e545a5e0bdaf312f816ebbcd0916e4e87450755fab64b
long_desc="
 The module-init-tools package provides many of the utilities
 needed by Linux systems for managing loadable Linux Kernel Modules. This
 includes depmod, insmod, rmmod, modprobe and tools like modinfo."

Add_dependency run zlib
Add_dependency build zlib-devel
Add_dependency build docbook2x

do_build()
{
	DOCBOOKTOMAN="docbook2man --sgml" ./configure \
		--prefix=/ --mandir=/usr/share/man --enable-zlib
	make ${makejobs}
}

do_install()
{
	make DESTDIR=${DESTDIR} install
	# Some apps expect /sbin/lsmod, so make a symlink.
	cd ${DESTDIR}/sbin && ln -sf ../bin/lsmod .
}
