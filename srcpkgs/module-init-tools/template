# Template file for 'module-init-tools'
pkgname=module-init-tools
version=3.13
distfiles="${KERNEL_SITE}//utils/kernel/$pkgname/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-zlib --prefix="
short_desc="Tools for managing kernel modules"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://kerneltools.org"
license="GPL-2"
checksum=6a29185d09fab7c30817d57994336bb2e1a9da5b80b82c8b282d2c08a221925b
long_desc="
 The module-init-tools package provides many of the utilities
 needed by Linux systems for managing loadable Linux Kernel Modules. This
 includes depmod, insmod, rmmod, modprobe and tools like modinfo."

Add_dependency run glibc
Add_dependency run zlib
Add_dependency build zlib-devel

pre_configure()
{
	# Don't regenerate manpages.
	touch ${wrksrc}/*.{5,8}
}

post_install()
{
	sed -i "s#mod#man5/mod#" ${DESTDIR}/usr/share/man/man5/modprobe.d.5
	# Some apps expect /sbin/lsmod, so make a symlink.
	cd ${DESTDIR}/sbin && ln -sf ../bin/lsmod .
}
