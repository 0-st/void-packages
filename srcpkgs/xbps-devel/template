# Template file for 'xbps'
pkgname=xbps-devel
version="$(date +%Y%m%d)"
build_style=configure
build_wrksrc="xbps"
configure_script="./configure"
configure_args="--prefix=/ --includedir=/usr/include
--datadir=/usr/share --mandir=/usr/share/man --with-pie
--with-external-proplib --with-external-libfetch"
short_desc="The XBPS package system (development branch)"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://code.google.com/p/xbps"
license="BSD"
long_desc="
 The XBPS package system. A new, fast, from scratch and simple
 binary package manager. This packages includes code from a development
 branch available from https://github.com/xtraeme/xbps"

broken_as_needed=yes
conf_files="/etc/xbps-conf.plist"
subpackages="$pkgname-static"
provides="xbps-9999"
replaces="xbps>=0"
nofetch=yes
noextract=yes

Add_dependency run glibc
Add_dependency run zlib
Add_dependency run proplib
Add_dependency run libarchive
Add_dependency run libssl
Add_dependency run libfetch

Add_dependency build git
Add_dependency build pkg-config
Add_dependency build zlib-devel
Add_dependency build proplib-devel
Add_dependency build libarchive-devel
Add_dependency build openssl-devel
Add_dependency build libfetch-devel

do_fetch()
{
	local url="git://github.com/xtraeme/xbps"
	msg_normal " Fetching source from $url ...\n"
	cd ${wrksrc} && git clone $url
}
