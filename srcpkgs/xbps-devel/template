# Template file for 'xbps'
pkgname=xbps-devel
version="$(date +%Y%m%d)"
build_style=gnu_makefile
make_build_args="DESTDIR=$XBPS_DESTDIR/$pkgname-$version PREFIX="
make_install_args="DESTDIR=$XBPS_DESTDIR/$pkgname-$version PREFIX="
short_desc="The XBPS package system (development branch)"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 The XBPS package system. A new, fast, from scratch and simple
 binary package manager. This packages includes code from a development
 branch available from https://launchpad.net/xbps"

subpackages="$pkgname-static"
replaces="xbps"
nofetch=yes
noextract=yes

Add_dependency full glibc
Add_dependency full libarchive
Add_dependency full proplib
Add_dependency full openssl
Add_dependency build bzr
Add_dependency build asciidoc

do_fetch()
{
	msg_normal "Fetching source from launchpad:xbps head branch..."
	bzr branch lp:xbps ${pkgname}-${version} || return 1
}

post_install()
{
	mkdir -p ${DESTDIR}/usr || return 1
	mv ${DESTDIR}/share ${DESTDIR}/usr || return 1
}
