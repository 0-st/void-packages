# Template file for 'intel-ucode'
pkgname=intel-ucode
version=20111110
create_wrksrc=yes
homepage="http://www.intel.com"
distfiles="http://downloadmirror.intel.com/20728/eng/microcode-${version}.tgz"
short_desc="Microcode update files for Intel CPUs"
maintainer="Juan RP <xtraeme@gmail.com>"
license="INTEL Software License Agreement"
checksum=16f532cdf9cce03e01e714619ad9406a465aa965bbd1288035398db79921cbc1
long_desc="
 This package contains the microcode updates for Intel CPUs for use 
 with the microcode linux kernel module."

noarch=yes

do_build() {
	cp ${FILESDIR}/*.c .
	gcc -Wall ${CFLAGS} -o intel-microcode2ucode intel-microcode2ucode.c
	./intel-microcode2ucode ./microcode.dat
}

do_install() {
	vmkdir lib/firmware/intel-ucode
	vcopy "intel-ucode/*" lib/firmware/intel-ucode
	vinstall ${FILESDIR}/LICENSE 644 usr/share/licenses/${pkgname}
}
