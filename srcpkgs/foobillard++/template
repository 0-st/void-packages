# Template file for 'foobillard'
pkgname=foobillard++
version=3.41beta
wrksrc=foobillardplus-${version}
homepage="http://foobillardplus.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/foobillardplus/foobillardplus-$version.tar.gz"
short_desc="An OpenGL billard game - fork of foobillard"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-2"
checksum=e69218d4458c2c769396d7e8583e7309b719f8a15e9965940cf8aec2aaeca69a
long_desc="
 It is not a new game, but an enhanced version of the great foobillard
 3.0a by Florian Berger."
 
Add_dependency run glibc
Add_dependency run freetype
Add_dependency run zlib
Add_dependency run bzip2
Add_dependency run SDL
Add_dependency run libGL
Add_dependency run libGLU
Add_dependency run libpng

Add_dependency build bzip2-devel
Add_dependency build freetype-devel
Add_dependency build libpng-devel
Add_dependency build MesaLib-devel
Add_dependency build SDL_net-devel

Add_dependency full desktop-file-utils

do_configure() {
	sed -i 's|$prefix/foobillardplus|$prefix|' configure
	sed -i 's|$prefix/data|$prefix/share/foobillardplus|' configure
	sed -i 's|"/data"|"/share/foobillardplus"|' src/language.c
	sed -i 's|/opt/foobillardplus/bin/||' foobillardplus.desktop
	sed -i 's|/opt/foobillardplus/||' foobillardplus.desktop
	./configure ${CONFIGURE_SHARED_ARGS}
}

do_build() {
	make ${makejobs}
}

do_install() {
	vinstall src/foobillardplus 755 usr/bin
	vmkdir usr/share/foobillardplus
	vcopy "data/*" usr/share/foobillardplus
	vinstall foobillardplus.desktop 644 usr/share/applications
	vinstall foobillardplus.png 644 usr/share/pixmaps
	vinstall foobillardplus.xbm 644 usr/share/pixmaps
	find ${DESTDIR} -depth  -type d -name .svn -exec rm -rf  {} \;
}
