# Template file for 'soundmodem'
pkgname=soundmodem
version=0.18
revision=1
build_style=gnu-configure
configure_args="--host=${XBPS_MACHINE} --target=${XBPS_TARGET_MACHINE}"
hostmakedepends="pkg-config"
makedepends="alsa-lib-devel audiofile-devel gtk+-devel libxml2-devel"
short_desc="Multiplatform Soundcard Packet Radio Modem"
maintainer="Michael Aldridge <aldridge.mac@gmail.com>"
license="GPL-2"
homepage="http://soundmodem.vk4msl.yi.org/"
distfiles="http://soundmodem.vk4msl.yi.org/soundmodem-${version}.tar.gz"
checksum=f033c1716df1378cda646dbb1c48ea9fb9a068772c6686f2ca411bfa64245c1c

pre_configure() {
	sed -i -e "s|/usr/local/cross/i686-pc-cygwin|${XBPS_CROSS_BASE}|g" configure
}

do_build() {
	make -I${XBPS_CROSS_BASE} CC=$CC CXX=$CXX LD=$CXX CFLAGS="$CFLAGS" CXXFLAGS="$CXXFLAGS" LDFLAGS="$LDFLAGS"
}

soundmodem-devel_package() {
	short_desc+=" - development files"
	depends="soundmodem>=${version}_${revision}"
	pkg_install() {
		vmove usr/include
	}
}
