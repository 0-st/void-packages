# Template file for 'xbps-go'
pkgname=xbps-go
version=0.0.1
build_style=custom-install
build_wrksrc=xbps-go
short_desc="xbps go programs"
maintainer="Mike Rosset <mike.rosset@gmail.com>"
homepage="https://github.com/vanilla/xbps-go"
license="BSD"
long_desc="
 Set of go programs used to interface with xbp-src and xbps.
"
nofetch=yes
noextract=yes
nostrip=yes

Add_dependency run glibc

Add_dependency build go
Add_dependency build git

do_fetch()
{
	local url="git://github.com/vanilla/xbps-go.git"
	cd $wrksrc
	git clone ${url} ${build_wrksrc}
}

do_build()
{
	. /etc/profile.d/go.sh
	GOPATH=${wrksrc}/${build_wrksrc}
	goinstall upstream
}

do_install() 
{
	cd ${wrksrc}/${build_wrksrc}
	vinstall bin/upstream 755 usr/bin
}
