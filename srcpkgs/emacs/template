# Template file for 'emacs'
pkgname=emacs
version=24.3
revision=1
maintainer="Philipp Hirsch <itself@hanspolo.net>"
license="GPL-3"
homepage="http://www.gnu.org/software/${pkgname}/"
distfiles="http://ftp.gnu.org/gnu/${pkgname}/${pkgname}-${version}.tar.gz"
checksum=0098ca3204813d69cd8412045ba33e8701fa2062f4bff56bedafc064979eef41
short_desc="GNU Emacs Editor"
long_desc="GNU Emacs is an extensible, customizable text editorâ€”and more."
makedepends="libxml2-devel>=2.7.0_1 ncurses-devel>=5.8_1"
build_style="gnu-configure"
configure_args=""

do_configure() {
  mkdir x nox

  cd ${wrksrc}/x
  ../configure ${configure_args}

  cd ${wrksrc}/nox
  ../configure ${configure_args} --without-x
}

do_build() {
  cd ${wrksrc}/x
  make ${makejobs}

  cd ${wrksrc}/nox
  make ${makejobs}
}

do_install() {
  cd ${wrksrc}/x
  make DESTDIR=${DESTDIR}/x install

  cd ${wrksrc}/nox
  make DESTDIR=${DESTDIR}/nox install
}

emacs_package() {
  pkg_install() {
    vmove "x/*"
  }
}

emacs-nox_package() {
  short_desc+=" without X support"
  pkg_install() {
    vmove "nox/*"
  }
}
