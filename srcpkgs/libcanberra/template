# Template build file for 'libcanberra'.
pkgname=libcanberra
version=0.30
revision=7
build_style=gnu-configure
configure_args="--enable-alsa --enable-null --disable-lynx
 --enable-gstreamer --disable-oss --with-builtin=dso"
hostmakedepends="libtool pkg-config intltool"
makedepends="
 gtk+-devel gtk+3-devel libvorbis-devel libltdl-devel
 gstreamer1-devel alsa-lib-devel tdb-devel pulseaudio-devel
 libudev-devel>=2.1 vala-devel"
short_desc="XDG Sound Theme and Name Specification library implementation"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://0pointer.de/lennart/projects/libcanberra/"
license="LGPL-2.1"
distfiles="http://pkgs.fedoraproject.org/repo/pkgs/libcanberra/libcanberra-${version}.tar.xz/34cb7e4430afaf6f447c4ebdb9b42072/libcanberra-${version}.tar.xz"
checksum=c2b671e67e0c288a69fc33dc1b6f1b534d07882c2aceed37004bf48c601afa72

build_options="systemd"
if [ "$build_option_systemd" ]; then
	configure_args+=" --with-systemdsystemunitdir=/usr/lib/systemd/system"
fi

pre_configure() {
	libtoolize -f
}

libcanberra-utils_package() {
	replaces="${sourcepkg}<0.30_6"
	short_desc+=" - utilities"
	pkg_install() {
		vmove usr/bin
	}
}
libcanberra-gtk_package() {
	replaces="${sourcepkg}<0.30_6"
	short_desc+=" - GTK+ (2.x) support"
	pkg_install() {
		vmove usr/lib/libcanberra-gtk.so.*
		vmove usr/lib/gtk-2.0
	}
}
libcanberra-gtk3_package() {
	replaces="${sourcepkg}<0.30_6"
	short_desc+=" - GTK+ (3.x) support"
	pkg_install() {
		vmove usr/lib/libcanberra-gtk3.so.*
		vmove usr/lib/gtk-3.0
	}
}
libcanberra-devel_package() {
	depends="gtk+-devel gtk+3-devel
		${sourcepkg}-gtk>=${version}_${revision}
		${sourcepkg}-gtk3>=${version}_${revision}
		${sourcepkg}>=${version}_${revision}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove "usr/lib/*.so"
		vmove usr/share/gtk-doc
		vmove usr/share/vala
	}
}
