# Template file for 'iproute2'
pkgname=iproute2
version=3.3.0
patch_args="-Np1"
distfiles="${KERNEL_SITE}/utils/net/$pkgname/$pkgname-$version.tar.xz"
makedepends="pkg-config perl>=0 db-devel bison flex libnl-devel iptables-devel"
revision=1
short_desc="IP Routing Utilities"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.linux-foundation.org/en/Net:Iproute2"
license="GPL-2"
checksum=e16d9ec1bd0bb2a3bb8be5ba0f0d9c53d39c0515a3ad58a58a89efe1748fb2a6
long_desc="
 Iproute2 is a collection of utilities for controlling TCP/IP networking
 and traffic control in Linux."

conf_files="
/etc/iproute2/ematch_map
/etc/iproute2/rt_dsfield
/etc/iproute2/rt_protos
/etc/iproute2/rt_realms
/etc/iproute2/rt_scopes
/etc/iproute2/rt_tables"


do_build() {
	sed -i -e "s|\/usr\/local\/lib|\/usr\/libexec|g" configure
	./configure ${CONFIGURE_SHARED_ARGS}
	make ${makejobs}
}

do_install() {
	make DESTDIR=${DESTDIR} install

	# Remove tex and sgml files.
	rm -f ${DESTDIR}/usr/share/doc/iproute2/*.{tex,sgml}
	# Remove devel manpages.
	rm -rf ${DESTDIR}/usr/share/man/man3
}
