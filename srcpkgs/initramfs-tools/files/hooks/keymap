#!/bin/sh

PREREQ=""

prereqs()
{
	echo "$PREREQ"
}

case $1 in
# get pre-requisites
prereqs)
	prereqs
	exit 0
	;;
esac

# Hook to load keymaps into the initramfs if requested by KEYMAP="y"
if [ "$KEYMAP" != "y" ] && [ "$KEYMAP" != "Y" ]; then
	exit 0
fi

[ ! -x ${ROOTDIR}/usr/sbin/loadkeys -a ! -x ${ROOTDIR}/usr/sbin/dumpkeys ] && exit 0

. ${ROOTDIR}/usr/share/initramfs-tools/hook-functions

${ROOTDIR}/usr/sbin/dumpkeys > ${DESTDIR}/kmap-tmp
${ROOTDIR}/usr/sbin/loadkeys -u -b ${DESTDIR}/kmap-tmp \
			> ${DESTDIR}/etc/bkeymap
rm -f ${DESTDIR}/kmap-tmp

exit 0
