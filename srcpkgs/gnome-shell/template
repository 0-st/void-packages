# Template file for 'gnome-shell'
pkgname=gnome-shell
version=3.2.1
distfiles="${GNOME_SITE}/$pkgname/3.2/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--disable-schemas-install --disable-schemas-compile
--with-gconf-schema-file-dir=/usr/share/gconf/schemas"
short_desc="GNOME core user interface"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://live.gnome.org/GnomeShell"
license="GPL-2"
checksum=ac05e3133bd279c84812d8d3d8e362f8b33563cdc3e7a6aefa9c0b1c2aeab0eb
long_desc="
 GNOME Shell provides core user interface functions for the GNOME 3 desktop,
 like switching to windows and launching applications. GNOME Shell takes
 advantage of the capabilities of modern graphics hardware and introduces
 innovative user interface concepts to provide a visually attractive and
 easy to use experience."

gconf_schemas="$pkgname.schemas"
gtk_iconcache_dirs="/usr/share/icons/hicolor"

Add_dependency run glibc
Add_dependency run mutter
Add_dependency run libgirepository
Add_dependency run telepathy-glib
Add_dependency run dbus-glib
Add_dependency run clutter
Add_dependency run gtk+3
Add_dependency run cairo
Add_dependency run glib
Add_dependency run evolution-data-server
Add_dependency run libical
Add_dependency run GConf
Add_dependency run gdk-pixbuf
Add_dependency run folks
Add_dependency run libgee
Add_dependency run gjs
Add_dependency run js
Add_dependency run nspr
Add_dependency run gnome-menus
Add_dependency run gstreamer
Add_dependency run libsoup
Add_dependency run startup-notification
Add_dependency run libffi
Add_dependency run libcanberra
Add_dependency run telepathy-logger
Add_dependency run polkit
Add_dependency run dbus-libs
Add_dependency run libgnome-keyring
Add_dependency run gnome-bluetooth
Add_dependency run cogl
Add_dependency run json-glib
Add_dependency run MesaLib
Add_dependency run libXi
Add_dependency run libdrm
Add_dependency run libXext
Add_dependency run libXdamage
Add_dependency run libXcomposite
Add_dependency run libXfixes
Add_dependency run libcroco
Add_dependency run libxml2
Add_dependency run gnome-desktop
Add_dependency run libX11
Add_dependency run atk
Add_dependency run pango
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run pulseaudio
Add_dependency run libpulseaudio
Add_dependency run libnm

Add_dependency run caribou
Add_dependency run mesa-demos
Add_dependency run desktop-file-utils

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gnome-doc-utils
Add_dependency build network-manager-applet-devel
Add_dependency build caribou-devel
Add_dependency build folks-devel
Add_dependency build gnome-menus-devel
Add_dependency build gnome-desktop-devel
Add_dependency build gnome-bluetooth-devel
Add_dependency build libcroco-devel
Add_dependency build gjs-devel
Add_dependency build mutter-devel
Add_dependency build telepathy-logger-devel
Add_dependency build json-glib-devel	">=0.14.0"
Add_dependency build libcanberra-devel
Add_dependency build pulseaudio-devel
Add_dependency build polkit-devel

Add_dependency full gir-freedesktop

post_install()
{
	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
		--domain ${pkgname} ${wrksrc}/*.schemas
}

