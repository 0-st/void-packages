# Template file for 'gnome-shell'
pkgname=gnome-shell
version=3.0.0.2
revision=1
distfiles="${GNOME_SITE}/$pkgname/3.0/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--disable-schemas-install --disable-schemas-compile
--localstatedir=/var --with-gconf-schema-file-dir=/usr/share/gconf/schemas"
short_desc="GNOME core user interface"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=5563b6374e84795526928ab398316611f94385ce0b278ef71769ff12498e4532
long_desc="
 GNOME Shell provides core user interface functions for the GNOME 3 desktop,
 like switching to windows and launching applications. GNOME Shell takes
 advantage of the capabilities of modern graphics hardware and introduces
 innovative user interface concepts to provide a visually attractive and
 easy to use experience."

triggers="gsettings-schemas"
gconf_schemas="$pkgname.schemas"
gtk_iconcache_dirs="/usr/share/icons/hicolor"

Add_dependency run glibc
Add_dependency run gjs
Add_dependency run xulrunner
Add_dependency run gnome-menus
Add_dependency run gstreamer
Add_dependency run libgirepository
Add_dependency run libffi
Add_dependency run libcanberra
Add_dependency run telepathy-glib
Add_dependency run polkit
Add_dependency run gnome-bluetooth
Add_dependency run clutter
Add_dependency run json-glib
Add_dependency run MesaLib
Add_dependency run libdrm
Add_dependency run libX11
Add_dependency run libXext
Add_dependency run libXdamage
Add_dependency run libXcomposite
Add_dependency run libXi
Add_dependency run libXfixes
Add_dependency run libcroco
Add_dependency run gnome-desktop
Add_dependency run startup-notification
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run libpulseaudio
Add_dependency run evolution-data-server
Add_dependency run libical
Add_dependency run gtk+3
Add_dependency run atk
Add_dependency run pango
Add_dependency run gdk-pixbuf
Add_dependency run libpng
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run nspr
Add_dependency run nss
Add_dependency run sqlite
Add_dependency run libxml2
Add_dependency run GConf
Add_dependency run libsoup
Add_dependency run glib
Add_dependency run telepathy-logger

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gnome-doc-utils
Add_dependency build gjs-devel
Add_dependency build xulrunner-devel
Add_dependency build gnome-menus-devel
Add_dependency build gstreamer-devel
Add_dependency build libgirepository-devel
Add_dependency build libffi-devel
Add_dependency build libcanberra-devel
Add_dependency build telepathy-glib-devel
Add_dependency build polkit-devel
Add_dependency build gnome-bluetooth-devel
Add_dependency build clutter-devel
Add_dependency build json-glib-devel
Add_dependency build MesaLib-devel
Add_dependency build libdrm-devel
Add_dependency build libX11-devel
Add_dependency build libXext-devel
Add_dependency build libXdamage-devel
Add_dependency build libXcomposite-devel
Add_dependency build libXi-devel
Add_dependency build libXfixes-devel
Add_dependency build libcroco-devel
Add_dependency build gnome-desktop-devel
Add_dependency build startup-notification-devel
Add_dependency build dbus-glib-devel
Add_dependency build dbus-devel
Add_dependency build pulseaudio-devel
Add_dependency build evolution-data-server-devel
Add_dependency build libical-devel
Add_dependency build gtk+3-devel
Add_dependency build atk-devel
Add_dependency build pango-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build libpng-devel
Add_dependency build cairo-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build nspr-devel
Add_dependency build nss-devel
Add_dependency build sqlite-devel
Add_dependency build libxml2-devel
Add_dependency build GConf-devel
Add_dependency build libsoup-devel
Add_dependency build glib-devel
Add_dependency build telepathy-logger-devel

Add_dependency full mesa-demos
Add_dependency full mutter
Add_dependency full pygobject
Add_dependency full dbus-python
Add_dependency full gir-freedesktop
Add_dependency full desktop-file-utils

pre_configure()
{
	export LD_LIBRARY_PATH="$LD_LIBRARY_PATH:/usr/lib/gnome-bluetooth"
}

post_install()
{
	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
		--domain ${pkgname} ${wrksrc}/*.schemas
}

