# Template file for 'network-manager-applet'
pkgname=network-manager-applet
version=0.8.999
distfiles="${GNOME_SITE}/$pkgname/0.8/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--disable-schemas-install --localstatedir=/var
--with-gconf-schema-file-dir=/usr/share/gconf/schemas --with-bluetooth
--disable-static"
short_desc="NetworkManager panel applet for GNOME"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=95249953fad924240fbe85ae7742405622c7edc3c6391dcb823346d5c37fd63b
long_desc="
 NetworkManager attempts to keep an active network connection available at all
 times. It is intended only for the desktop use-case, and is not intended for
 usage on servers. The point of NetworkManager is to make networking
 configuration and setup as painless and automatic as possible. If using DHCP,
 NetworkManager is _intended_ to replace default routes, obtain IP addresses
 from a DHCP server, and change nameservers whenever it sees fit.

 This package contains a systray applet for GNOME\'s notification area but it
 also works for other desktop environments which provide a systray like KDE or
 Xfce. It displays the available networks and allows to easily switch between
 them. For encrypted networks it will prompt the user for the key/passphrase
 and it can optionally store them in the gnome-keyring."

gconf_schemas="nm-applet.schemas"
gtk_iconcache_dirs="/usr/share/icons/hicolor"

# XXX: mobile-broadband-provier-info deps.
Add_dependency run glibc
Add_dependency run glib
Add_dependency run dbus-libs
Add_dependency run dbus-glib
Add_dependency run pango
Add_dependency run gdk-pixbuf
Add_dependency run cairo
Add_dependency run atk
Add_dependency run libpng
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run gtk+3
Add_dependency run NetworkManager
Add_dependency run libnotify
Add_dependency run GConf
Add_dependency run libgnome-keyring
Add_dependency run gnome-bluetooth

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build GConf-devel
Add_dependency build libgnome-keyring-devel
Add_dependency build gtk+3-devel
Add_dependency build NetworkManager-devel
Add_dependency build dbus-glib-devel
Add_dependency build dbus-devel
Add_dependency build glib-devel
Add_dependency build libnotify-devel
Add_dependency build pango-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build cairo-devel
Add_dependency build gnome-bluetooth-devel
Add_dependency build atk-devel
Add_dependency build libpng-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel

Add_dependency full notification-daemon
Add_dependency full hicolor-icon-theme
Add_dependency full polkit-gnome

post_install()
{
	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
		--domain nm-applet ${wrksrc}/*.schemas
}

