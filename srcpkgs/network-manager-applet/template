# Template file for 'network-manager-applet'
pkgname=network-manager-applet
version=0.9.4.1
distfiles="${GNOME_SITE}/$pkgname/0.9/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--disable-schemas-install --disable-static
--with-gconf-schema-file-dir=/usr/share/gconf/schemas --with-bluetooth"
short_desc="NetworkManager panel applet for GNOME"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnome.org/projects/NetworkManager/"
license="GPL-2"
checksum=b6b6de75e28d1fbcdfdbb51c0e40fcd6bc0ec0385bfecd16c457260491cd2ff7
long_desc="
 NetworkManager attempts to keep an active network connection available at all
 times. It is intended only for the desktop use-case, and is not intended for
 usage on servers. The point of NetworkManager is to make networking
 configuration and setup as painless and automatic as possible. If using DHCP,
 NetworkManager is _intended_ to replace default routes, obtain IP addresses
 from a DHCP server, and change nameservers whenever it sees fit.

 This package contains a systray applet for GNOME's notification area but it
 also works for other desktop environments which provide a systray like KDE or
 Xfce. It displays the available networks and allows to easily switch between
 them. For encrypted networks it will prompt the user for the key/passphrase
 and it can optionally store them in the gnome-keyring."

subpackages="libnm-gtk ${pkgname}-devel"
gconf_schemas="${pkgname}.schemas"
gtk_iconcache_dirs="/usr/share/icons/hicolor"

# XXX: mobile-broadband-provier-info deps.
Add_dependency run NetworkManager
Add_dependency run polkit-gnome
Add_dependency run notification-daemon
Add_dependency run hicolor-icon-theme

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build GConf-devel
Add_dependency build libgnome-keyring-devel
Add_dependency build NetworkManager-devel
Add_dependency build gnome-bluetooth-devel
Add_dependency build libnotify-devel
Add_dependency build polkit-devel

Add_dependency full iso-codes

post_install() {
	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
		--domain nm-applet ${wrksrc}/*.schemas
}

