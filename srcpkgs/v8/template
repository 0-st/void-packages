# Template file for 'v8'
pkgname=v8
version=3.14.5
revision=1
short_desc="V8 JavaScript Engine"
maintainer="davehome <davehome@redthumb.info.tm>"
homepage="http://code.google.com/p/v8/"
license="BSD"
distfiles="http://github.com/v8/v8/tarball/${version}"
checksum=e5e06d14cbb5b0cec9cfbbe5e87714d52a17f222b83875673157453cce6e6c5b
long_desc="
 V8 is Google's open source JavaScript engine. V8 is written in C++ and is
 used in Google Chrome, the open source browser from Google.
 
 V8 implements ECMAScript as specified in ECMA-262, 5th edition, and runs on
 Windows (XP or newer), Mac OS X (10.5 or newer), and Linux systems that use
 IA-32, x64, or ARM processors.

 V8 can run standalone, or can be embedded into any C++ application.
 
 This package contains v8 the utilities mksnapshot and the d8 shell."

subpackages="${pkgname}-devel lib${pkgname}"
makedepends="git which subversion python readline-devel"

noextract=yes
nofetch=yes

do_fetch() {
	git clone -b${version} git://github.com/v8/v8.git v8-${version}
}

do_build() {
	make dependencies

	make ${makejobs} native library=shared console=readline \
		disassembler=on liveobjectlist=on
}

do_install() {
	vinstall out/native/d8 755 usr/bin
	vinstall out/native/mksnapshot 755 usr/bin
	vinstall out/native/lib.target/lib${pkgname}.so 755 usr/lib
   	vinstall include/${pkgname}-debug.h 644 usr/include
	vinstall include/${pkgname}-preparser.h 644 usr/include
	vinstall include/${pkgname}-profiler.h 644 usr/include
	vinstall include/${pkgname}-testing.h 644 usr/include
	vinstall include/${pkgname}.h 644 usr/include
	vinstall include/${pkgname}stdint.h 644 usr/include
}
