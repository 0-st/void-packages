# Template file for 'bind'
pkgname=bind
version=9.9.1
homepage="http://www.isc.org/software/bind/"
distfiles="http://ftp.isc.org/isc/bind9/${version}/bind-${version}.tar.gz"
build_style=gnu-configure
configure_args="--disable-static --with-openssl --with-libxml2
--enable-threads --enable-largefile --enable-ipv6 --with-libtool
--enable-atomic --sysconfdir=/etc/named"
makedepends="perl>=0 openssl-devel mit-krb5-devel libxml2-devel libcap-devel"
revision=1
short_desc="Berkeley Internet Name Domain server"
maintainer="Juan RP <xtraeme@gmail.com>"
license="ISC"
checksum=7599ae5a7d945707926019a6b191d06775e9657c68ced00e09af5bc751dad524
long_desc="
 BIND is by far the most widely used DNS software on the Internet. It provides
 a robust and stable platform on top of which organizations can build
 distributed computing systems with the knowledge that those systems are fully
 compliant with published DNS standards."

subpackages="bind-libs bind-utils bind-devel"

make_dirs="
/var/named	0770	root	named
/var/run/named	0770	root	named"

systemd_services="named.service true"
conf_files="/etc/named/named.conf"
system_accounts="named"
named_desc="BIND DNS server"
named_homedir="/var/named"
named_shell="/bin/false"


post_install() {
	vinstall ${FILESDIR}/named.service 644 lib/systemd/system
	vinstall ${FILESDIR}/named.logrotate 600 etc/logrotate.d named
	vinstall ${FILESDIR}/named.conf 640 etc/named

	vinstall bin/tests/system/common/root.hint 640 var/named
	vinstall ${FILESDIR}/127.0.0.zone 640 var/named
	vinstall ${FILESDIR}/localhost.zone 640 var/named
}
