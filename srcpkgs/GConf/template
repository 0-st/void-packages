# Template file for 'GConf'
pkgname=GConf
version=2.32.2
distfiles="${GNOME_SITE}/GConf/2.32/GConf-$version.tar.bz2"
build_style=gnu_configure
configure_args="--without-openldap --with-gtk=3.0 --enable-defaults-service"
short_desc="A process-transparent configuration system"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=6bff392b9d1ca52502f0c6dac5506260800e43d72ca1fa77a4524af1a3cc1330
long_desc="
 GConf is a process-transparent configuration database API used to
 store user preferences. It has pluggable backends and features to
 support workgroup administration."

triggers="gio-modules"
conf_files="/etc/gconf/2/path"
subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run glib
Add_dependency run dbus-libs
Add_dependency run gtk+3
Add_dependency run dbus-glib
Add_dependency run ORBit2
Add_dependency run polkit
Add_dependency run libxml2

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build glib-devel
Add_dependency build dbus-devel
Add_dependency build atk-devel
Add_dependency build pango-devel
Add_dependency build cairo-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build libpng-devel
Add_dependency build gtk+-devel			">=2.22.0_1"
Add_dependency build dbus-glib-devel
Add_dependency build ORBit2-devel
Add_dependency build polkit-devel
Add_dependency build libxml2-devel
Add_dependency build gobject-introspection

post_install()
{
	# Create GCONF_SCHEMAS_DIR
	install -d ${DESTDIR}/usr/share/gconf/schemas
	touch -f ${DESTDIR}/usr/share/gconf/schemas/.empty_on_purpose
	# Create required sysconfdir dirs.
	for d in defaults mandatory system; do
		install -d ${DESTDIR}/etc/gconf/gconf.xml.${d}
		touch -f ${DESTDIR}/etc/gconf/gconf.xml.${d}/.empty_on_purpose
	done
}
