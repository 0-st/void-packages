# Template file for 'GConf'
pkgname=GConf
version=3.2.5
distfiles="${GNOME_SITE}/GConf/3.2/GConf-$version.tar.xz"
build_style=gnu-configure
configure_args="--without-openldap --enable-gtk --enable-defaults-service
--disable-orbit --enable-gsettings-backend"
short_desc="A process-transparent configuration system"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://projects.gnome.org/gconf"
license="GPL-2"
checksum=4ddea9503a212ee126c5b46a0a958fd5484574c3cb6ef2baf38db02e819e58c6
long_desc="
 GConf is a process-transparent configuration database API used to
 store user preferences. It has pluggable backends and features to
 support workgroup administration."

conf_files="/etc/gconf/2/path"
subpackages="$pkgname-devel"

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gobject-introspection
Add_dependency build gtk+3-devel
Add_dependency build dbus-glib-devel
Add_dependency build polkit-devel
Add_dependency build libxml2-devel

post_install() {
	# Create GCONF_SCHEMAS_DIR
	install -d ${DESTDIR}/usr/share/gconf/schemas
	touch -f ${DESTDIR}/usr/share/gconf/schemas/.empty_on_purpose
	# Create required sysconfdir dirs.
	for d in defaults mandatory system; do
		install -d ${DESTDIR}/etc/gconf/gconf.xml.${d}
		touch -f ${DESTDIR}/etc/gconf/gconf.xml.${d}/.empty_on_purpose
	done
}
