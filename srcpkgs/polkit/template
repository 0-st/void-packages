# Template file for 'polkit'
pkgname=polkit
version=0.95
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-static --localstatedir=/var"
short_desc="Authorization Toolkit"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=b484248ed8fa7419170cf98d7cba51d68290783c3c7cac7c5dab7605dfe3c79c
long_desc="
 PolicyKit is an application-level toolkit for defining and handling the
 policy that allows unprivileged processes to speak to privileged processes.

 It is a framework for centralizing the decision making process with respect
 to granting access to privileged operations (like calling the HAL Mount()
 method) for unprivileged (desktop) applications."

subpackages="$pkgname-devel"
Add_dependency full eggdbus
Add_dependency full pam
Add_dependency build intltool
Add_dependency build libxslt
Add_dependency build gobject-introspection

post_install()
{
	mkdir -p ${DESTDIR}/etc/pam.d
	cat >> ${DESTDIR}/etc/pam.d/polkit-1 <<_EOF
auth		requisite	pam_nologin.so
auth		required	pam_env.so
auth		required	pam_unix.so
account		required	pam_unix.so
session		required	pam_limits.so
session		required	pam_unix.so
password	required	pam_unix.so
_EOF
	chmod 644 ${DESTDIR}/etc/pam.d/polkit-1
}
