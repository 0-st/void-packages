# Template file for 'polkit'
pkgname=polkit
version=0.99
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-static --localstatedir=/var --with-os-type=gentoo"
short_desc="Authorization Toolkit"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=f612c7c26ec822f67751420057a4ae113fc50ab51070758faacf2ad30bb3583f
long_desc="
 PolicyKit is an application-level toolkit for defining and handling the
 policy that allows unprivileged processes to speak to privileged processes.

 It is a framework for centralizing the decision making process with respect
 to granting access to privileged operations (like calling the HAL Mount()
 method) for unprivileged (desktop) applications."

replaces="PolicyKit>=0"
subpackages="gir-polkit polkit-devel"
Add_dependency run glib
Add_dependency run glibc
Add_dependency run expat
Add_dependency run eggdbus
Add_dependency run pam
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libxslt
Add_dependency build gobject-introspection
Add_dependency build glib-devel
Add_dependency build expat-devel
Add_dependency build eggdbus-devel
Add_dependency build pam-devel

post_install()
{
	mkdir -p ${DESTDIR}/etc/pam.d
	cat > ${DESTDIR}/etc/pam.d/polkit-1 <<_EOF
auth		requisite	pam_nologin.so
auth		required	pam_env.so
auth		required	pam_unix.so
account		required	pam_unix.so
session		required	pam_limits.so
session		required	pam_unix.so
password	required	pam_unix.so
_EOF
	chmod 644 ${DESTDIR}/etc/pam.d/polkit-1
}
