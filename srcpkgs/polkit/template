# Template file for 'polkit'
pkgname=polkit
version=0.102
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-static --localstatedir=/var --with-os-type=gentoo"
short_desc="Authorization Toolkit"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.freedesktop.org/wiki/Software/PolicyKit"
license="GPL-2"
checksum=0a6573da841c6f5c428218f1456aed45724a0127932af0de563d568bb9058641
long_desc="
 PolicyKit is an application-level toolkit for defining and handling the
 policy that allows unprivileged processes to speak to privileged processes.

 It is a framework for centralizing the decision making process with respect
 to granting access to privileged operations (like calling the HAL Mount()
 method) for unprivileged (desktop) applications."

replaces="PolicyKit>=0"
subpackages="polkit-devel"
Add_dependency run glib
Add_dependency run glibc
Add_dependency run expat
Add_dependency run pam
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libxslt
Add_dependency build docbook-xsl
Add_dependency build gobject-introspection
Add_dependency build glib-devel
Add_dependency build expat-devel
Add_dependency build pam-devel

post_install()
{
	mkdir -p ${DESTDIR}/etc/pam.d
	cat > ${DESTDIR}/etc/pam.d/polkit-1 <<_EOF
auth		requisite	pam_nologin.so
auth		required	pam_env.so
auth		required	pam_unix.so
account		required	pam_unix.so
session		required	pam_limits.so
session		required	pam_unix.so
password	required	pam_unix.so
_EOF
	chmod 644 ${DESTDIR}/etc/pam.d/polkit-1
}
