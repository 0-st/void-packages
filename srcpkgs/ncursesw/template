# Template build file for 'ncursesw'.
pkgname=ncursesw
version=5.7
revision=1
wrksrc="ncurses-${version}"
distfiles="http://ftp.gnu.org/pub/gnu/ncurses/ncurses-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-shared --without-debug --enable-widec
--includedir=/usr/include/ncursesw"
make_install_target="DESTDIR=$XBPS_DESTDIR/$pkgname-$version install.includes install.libs"
short_desc="Shared libraries for terminal handling (wide character)"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=0a9bdea5c7de8ded5c9327ed642915f2cc380753f12d4ad120ef7da3ea3498f4
long_desc="
 The ncurses (new curses) library is a freeware emulation of System V Release
 4.0 curses. It uses terminfo format, supports pads and color and multiple
 highlights and forms characters and function-key mapping, and has all the
 other SYSV-curses enhancements over BSD curses. The distribution includes
 the library and support utilities, including a terminfo compiler tic, a 
 ecompiler infocmp, clear, tput, tset, and a termcap conversion tool captoinfo.
 Full manual pages are provided for the library and tools."

subpackages="$pkgname-devel"
Add_dependency run glibc

post_install()
{
	rm -f ${DESTDIR}/usr/lib/lib*.so
	rm -f ${DESTDIR}/usr/lib/libncursesw.so.5
	mkdir -p ${DESTDIR}/lib
	mv ${DESTDIR}/usr/lib/lib*.so.5.7 ${DESTDIR}/lib
	for f in panelw formw ncursesw menuw; do
		cd ${DESTDIR}/usr/lib && \
			ln -sf ../../lib/lib${f}.so.5.7 lib${f}.so.5 && \
			ln -sf ../../lib/lib${f}.so.5.7 lib${f}.so
	done
}
