# Template file for 'rtkit'
pkgname=rtkit
version=0.10
revision=2
homepage="http://git.0pointer.de/?p=rtkit.git"
distfiles="http://0pointer.de/public/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-systemdsystemunitdir=/lib/systemd/system"
short_desc="Realtime Policy and Watchdog Daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
license="BSD, GPL-2"
checksum=74ea93ac09d9d5a7cb85bf57ec92090311c9fb105a41bdd633adcf3b94472120
long_desc="
 RealtimeKit is a D-Bus system service that changes the scheduling policy of
 user processes/threads to SCHED_RR (i.e. realtime scheduling mode) on request.
 It is intended to be used as a secure mechanism to allow real-time scheduling
 to be used by normal user processes."

system_accounts="rtkit"
rtkit_homedir="/proc"
systemd_services="rtkit-daemon.service"

Add_dependency run glibc
Add_dependency run libcap
Add_dependency run dbus-libs
Add_dependency build pkg-config
Add_dependency build dbus-devel
Add_dependency build libcap-devel

post_install()
{
	# DBus configuration
	install -d ${DESTDIR}/usr/share/dbus-1/interfaces
	./rtkit-daemon --introspect > \
		${DESTDIR}/usr/share/dbus-1/interfaces/org.freedesktop.RealtimeKit1.xml
}
