# Template file for 'tor'
pkgname=tor
version=0.2.2.35
homepage="http://www.torproject.org/"
distfiles="http://www.torproject.org/dist/tor-$version.tar.gz"
build_style=gnu-configure
short_desc="Anonymity Online"
maintainer="Juan RP <xtraeme@gmail.com>"
license="BSD"
checksum=f141a41fffd31494a0f96ebbb6b999eab33ce62d5c31f81222a0acd034adbf3a
long_desc="
 Tor is a network of virtual tunnels that allows people and groups to improve
 their privacy and security on the Internet. It also enables software developers
 to create new communication tools with built-in privacy features. Tor provides
 the foundation for a range of applications that allow organizations and
 individuals to share information over public networks without compromising
 their privacy."

conf_files="/etc/tor/tor-tsocks.conf /etc/tor/torrc"
make_dirs="/var/lib/tor 0700 tor tor"
systemd_services="tor.service on"
system_accounts="tor"
tor_homedir="/var/lib/tor"

Add_dependency build zlib-devel
Add_dependency build openssl-devel
Add_dependency build libevent-devel
Add_dependency full ca-certificates
Add_dependency full tsocks

post_install() {
	# Use our own default config file.
	vinstall ${FILESDIR}/torrc 640 etc/tor
	rm -f ${DESTDIR}/etc/tor/torrc.sample
	# Install systemd service.
	vinstall ${FILESDIR}/tor.service 644 lib/systemd/system
}
