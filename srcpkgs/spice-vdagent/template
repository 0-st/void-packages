# Template file for 'spice-vdagent'
pkgname=spice-vdagent
version=0.6.3
distfiles="http://www.spicespace.org/download/releases/$pkgname-$version.tar.bz2"
build_style=gnu_makefile
short_desc="Spice agent for Linux"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=6553254b1b73cc2f2ff9ca4c1f4986b7efefca264158a16301098421bdae2498
long_desc="
Features:
 * Client mouse mode (no need to grab mouse by client, no mouse lag)
   this is handled by the daemon by feeding mouse events into the kernel
   via uinput. This will only work if the active X-session is running a
   spice-vdagent process so that its resolution can be determined.
 * Automatic adjustment of the X-session resolution to the client resolution
 * Support of copy and paste (text and images) between the active X-session
   and the client"

keep_empty_dirs=yes
openrc_services="${pkgname}d default true"

Add_dependency run glibc
Add_dependency run dbus-libs
Add_dependency run libXfixes
Add_dependency run libX11
Add_dependency run libXrandr
Add_dependency build pkg-config
Add_dependency build desktop-file-utils
Add_dependency build dbus-devel
Add_dependency build libXfixes-devel
Add_dependency build libX11-devel
Add_dependency build libXrandr-devel
Add_dependency build spice-protocol
Add_dependency full dbus
Add_dependency full ConsoleKit-x11

post_install()
{
	# Install the OpenRC service.
	vinstall ${FILESDIR}/${pkgname}d.rc 755 etc/init.d ${pkgname}d
}
