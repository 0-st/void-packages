# Build template file for 'vim-x11'.
#
# Source vim template and overwrite some vars, it's stupid
# to duplicate all this stuff again!
#
. ${XBPS_SRCPKGDIR}/vim/template
unset subpackages
pkgname=vim-x11
revision=5
configure_args="${configure_args} --enable-gui=no --with-x"
short_desc="${short_desc} (x11)"
long_desc="${long_desc}

 This packages contains vim-x11, the x11 capable version of vim."

provides="vim-${version}"
replaces="vim>=${version}"

Add_dependency run libXt
Add_dependency run libX11
Add_dependency run libSM
Add_dependency run libICE

Add_dependency build pkg-config
Add_dependency build libXt-devel

post_install()
{
	vmkdir etc/xbps/virtualpkg.d.wants
	vinstall ${FILESDIR}/${pkgname}.virtualpkgd \
		644 etc/xbps/virtualpkg.d ${pkgname}.plist
	sed -i "s|@@PKGNAME@@|${pkgname}|;s|@@VERSION@@|${version}|" \
		${DESTDIR}/etc/xbps/virtualpkg.d/${pkgname}.plist
	cd ${DESTDIR}/etc/xbps/virtualpkg.d.wants && \
		ln -sf ../virtualpkg.d/${pkgname}.plist .
	rm -rf ${DESTDIR}/usr/share
}
