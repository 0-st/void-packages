# Template file for 'sv-helper'
pkgname=sv-helper
version=1.0.2
revision=1
depends="bash runit"
short_desc="Utilities to help administer a runit-as-pid1 system"
maintainer="bougyman <tj@rubyists.com>"
license="MIT"
homepage="https://github.com/rubyists/sv-helper"
distfiles="https://api.github.com/repos/rubyists/sv-helper/tarball/${version}>${pkgname}-${version}.tar.gz"
checksum=3997895a65ee688dc1c7b071052f822c0b097c873aeea09081ec933df3140b13

system_accounts="rsvlog"
rsvlog_homedir="/var/log"
rsvlog_descr="User for logging"

do_extract() {
	mkdir -p ${wrksrc}
	tar x --strip-components=1 -f ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}-${version}.tar.gz -C ${wrksrc}
}

do_install() {
	_commands="sv-list svls sv-find sv-enable sv-disable"
	vbin sv-helper.sh sv-helper
	vbin rsvlog.sh rsvlog
	for cmd in $_commands; do
		ln -s sv-helper $DESTDIR/usr/bin/$cmd
	done
	vdoc README.md
}
