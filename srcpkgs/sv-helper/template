# Template file for 'sv-helper'
pkgname=sv-helper
version=1.0.2
revision=1
build_style="fetch"
depends="bash runit"
short_desc="Utilities to help administer a runit-as-pid1 system"
maintainer="bougyman <tj@rubyists.com>"
license="MIT"
homepage="https://github.com/rubyists/sv-helper"
distfiles="https://api.github.com/repos/rubyists/sv-helper/tarball/${version}>${pkgname}-${version}.tar.gz"
checksum=3997895a65ee688dc1c7b071052f822c0b097c873aeea09081ec933df3140b13

system_accounts="rsvlog"
log_homedir="/var/log"
log_descr="User for logging"
_commands="sv-list svls sv-find sv-enable sv-disable"

do_extract() {
	tar xv --xform="s|rubyists-sv-helper-[^/]*/|sv-helper-${version}/|" -f ${XBPS_SRCDISTDIR}/${pkgname}-${version}/${pkgname}-${version}.tar.gz
	mv ${pkgname}-${version}/* .
}

do_install() {
	vbin sv-helper.sh sv-helper
	vbin rsvlog.sh rsvlog
	for cmd in $_commands; do
		ln -s sv-helper $DESTDIR/usr/bin/$cmd
	done
	vdoc README.md
}
