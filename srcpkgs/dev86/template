# Template file for 'dev86'
pkgname=dev86
version=0.16.18
patch_args="-Np1"
distfiles="http://www.debath.co.uk/dev86/Dev86src-$version.tar.gz"
short_desc="8086 cross development compiler, assembler and linker"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=049852a83898d3ee0ba97b88e526897ec6eaf0a051f4af1e9e073b1151178ff1
long_desc="
 This package provides a cross development C compiler, assembler and linker
 environment for the production of 8086 executables (Optionally MSDOS COM)."

nostrip=yes
Add_dependency run glibc
Add_dependency full bin86

do_build()
{
	for f in libc/bcc libc/misc libc/msdos libc/string libc/syscall \
		libc/bios; do
		sed -i -e "s|\$(CCFLAGS) ||g" ${wrksrc}/${f}/Makefile
	done
	make DIST=${DESTDIR}
}

do_install()
{
	make DIST=${DESTDIR} MANDIR=/usr/share/man \
		install install-man

	# Remove stuff supplied by bin86
	rm -f ${DESTDIR}/usr/bin/{as,ld,nm,objdump,size}86
	rm -f ${DESTDIR}/usr/share/man/man1/{as,ld}86.1
}
