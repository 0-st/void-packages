#! /bin/sh

PREREQ=""
DESCRIPTION="Setting up system locale"

[ -r /scripts/casper-functions ] && . /scripts/casper-functions

prereqs()
{
       echo "$PREREQ"
}

case $1 in
# get pre-requisites
prereqs)
       prereqs
       exit 0
       ;;
esac

log_begin_msg "$DESCRIPTION"

# commandline
for x in $(cat /proc/cmdline); do
    case $x in
	locale=*)
	    locale=${x#locale=}
	    set_locale="true"
	    ;;
    esac
done

if [ "${set_locale}" ]; then
	echo "system_locale=\"$locale\"" > ${rootmnt}/etc/conf.d/locale
fi

log_end_msg
