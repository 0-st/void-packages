# Template build file for 'ruby'.
pkgname=ruby
_ruby_ver="1.9.3"
_ruby_distpatchver="p0"
_ruby_distver="${_ruby_ver}-${_ruby_distpatchver}"
version=${_ruby_ver}${_ruby_distpatchver}
wrksrc="${pkgname}-${_ruby_distver}"
distfiles="ftp://ftp.ruby-lang.org/pub/ruby/1.9/$pkgname-${_ruby_distver}.tar.bz2"
build_style=gnu-configure
configure_args="--enable-shared --disable-rpath
DOXYGEN=/usr/bin/doxygen DOT=/usr/bin/dot PKG_CONFIG=/usr/bin/pkg-config"
short_desc="Ruby programming language"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=ca8ba4e564fc5f98b210a5784e43dfffef9471222849e46f8e848b37e9f38acf
long_desc="
 Ruby is the interpreted scripting language for quick and easy object
 oriented programming. It has many features to process text files and to
 do system management tasks (as in Perl). It is simple, straight-forward
 and extensible."

subpackages="ruby-devel ruby-gems ruby-irb ruby-rdoc ruby-ri"

Add_dependency build pkg-config
Add_dependency build coreutils
Add_dependency build bison
Add_dependency build groff
Add_dependency build doxygen
Add_dependency build graphviz
Add_dependency build zlib-devel
Add_dependency build ncurses-devel
Add_dependency build readline-devel
Add_dependency build libffi-devel
Add_dependency build openssl-devel
Add_dependency build db-devel
Add_dependency build gdbm-devel
Add_dependency build libyaml-devel
Add_dependency build pango-devel

pre_build() {
	# Execute manually the pango trigger for doc graphs.
	cd / && ${FAKEROOT_CMD} ${FAKEROOT_CMD_ARGS} \
		${XBPS_TRIGGERSDIR}/pango-modules run post-install && \
		cd ${wrksrc}
}
