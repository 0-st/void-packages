# Template file for 'qemu'
pkgname=qemu
_distver=0.14.1
#_patchver=rc1
#version=${_distver}${_patchver}
#wrksrc=qemu-${_distver}-${_patchver}
version=${_distver}
distfiles="http://download.savannah.gnu.org/releases/qemu/qemu-${version}.tar.gz"
build_style=configure
configure_args="--prefix=/usr --enable-sdl --sysconfdir=/etc --enable-spice
--enable-curses --disable-curl --enable-bluez --enable-io-thread
--enable-kvm --enable-nptl --enable-uuid --enable-mixemu --disable-vnc-sasl
--audio-drv-list=alsa,sdl --kerneldir=/usr/include --disable-xen"
short_desc="Open Source Processor Emulator"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=33ceae3fbe516f2cbb151dc98d16c8ccfec74b1056674ad715e75a2f7fed45c3
long_desc="
 QEMU is a generic and open source machine emulator and virtualizer.

 When used as a machine emulator, QEMU can run OSes and programs made for
 one machine (e.g. an ARM board) on a different machine (e.g. your own PC).
 By using dynamic translation, it achieves very good performances.

 When used as a virtualizer, QEMU achieves near native performances by
 executing the guest code directly on the host CPU. A host driver called the
 QEMU accelerator (also known as KQEMU) is needed in this case. The
 virtualizer mode requires that both the host and guest machine use x86
 compatible processors."

conf_files="/etc/qemu/target-${xbps_machine}.conf"
nostrip=yes
disable_parallel_build=yes

Add_dependency run glibc
Add_dependency run alsa-lib
Add_dependency run gnutls
Add_dependency run libbluetooth
Add_dependency run libidn
Add_dependency run libssl
Add_dependency run zlib
Add_dependency run ncurses-libs
Add_dependency run libuuid
Add_dependency run libX11
Add_dependency run attr
Add_dependency run libpng
Add_dependency run jpeg
Add_dependency run SDL
Add_dependency run spice

Add_dependency build coreutils # /bin/od
Add_dependency build attr-devel
Add_dependency build libpng-devel
Add_dependency build jpeg-devel
Add_dependency build libidn-devel
Add_dependency build openssl-devel
Add_dependency build zlib-devel
Add_dependency build ncurses-devel
Add_dependency build libuuid-devel
Add_dependency build libX11-devel
Add_dependency build alsa-lib-devel
Add_dependency build gnutls-devel
Add_dependency build SDL-devel
Add_dependency build libbluetooth-devel
Add_dependency build spice-devel
