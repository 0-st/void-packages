# Template file for 'acl'
pkgname=acl
version=2.2.51
distfiles="${NONGNU_SITE}/acl/acl-${version}.src.tar.gz"
build_style=gnu_configure
make_install_target="prefix=$XBPS_DESTDIR/$pkgname-$version/usr
 PKG_MAN_DIR=$XBPS_DESTDIR/$pkgname-$version/usr/share/man install
 install-lib install-dev"
short_desc="Access Control List filesystem support"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://savannah.nongnu.org/projects/acl"
license="LGPL-2.1"
checksum=06854521cf5d396801af7e54b9636680edf8064355e51c07657ec7442a185225
long_desc="
 This package includes support for Access Control Lists support for supported
 filesystems."

keep_libtool_archives=yes
subpackages="acl-devel acl-progs"
Add_dependency run glibc
Add_dependency run attr
Add_dependency build gettext
Add_dependency build gawk
Add_dependency build attr-devel

post_install()
{
	mkdir ${DESTDIR}/lib
	mv ${DESTDIR}/usr/lib/libacl.so.* ${DESTDIR}/lib
	mv ${DESTDIR}/usr/libexec/libacl.* ${DESTDIR}/usr/lib
	chmod 755 ${DESTDIR}/lib/libacl.so.*
	rm -rf ${DESTDIR}/usr/libexec
	rm -f ${DESTDIR}/usr/lib/libacl.so
	cd ${DESTDIR}/usr/lib && ln -sf ../../lib/libacl.so.1 libacl.so
}
