# Template build file for 'xorg-server'.
pkgname=xorg-server
version=1.12.3
revision=1
build_style=gnu-configure
configure_args="--enable-ipv6 --enable-xcsecurity --enable-record
--enable-xnest --enable-xephyr --enable-composite --enable-xvfb
--enable-glx-tls --disable-static --disable-config-hal
--disable-config-dbus --enable-config-udev --sysconfdir=/etc/X11
--with-xkb-path=/usr/share/X11/xkb --with-xkb-output=/var/lib/xkb
--with-fontrootdir=/usr/share/fonts/X11 --with-sha1=libcrypto
--disable-dmx --disable-xfree86-utils --enable-dga
--enable-install-setuid"
conf_files="/etc/udev/rules.d/75-x11-input.rules"
subpackages="$pkgname-devel"
# Not a direct dependency, but it's required for DRI to work.
depends="MesaLib"
makedepends="pkg-config perl flex inputproto>=2.2 glproto>=1.4.15 xproto>=7.0.22
dri2proto>=2.1 xf86driproto randrproto videoproto compositeproto scrnsaverproto
resourceproto xineramaproto xcmiscproto bigreqsproto libudev-devel>=183
openssl-devel libX11-devel libXext-devel libdmx-devel libpciaccess-devel
libXfont-devel libXmu-devel libXrender-devel libXfixes-devel libXi-devel
libXaw-devel libdrm-devel libXtst-devel libXres-devel libxkbui-devel
libxkbfile-devel libXxf86dga-devel pixman-devel MesaLib-devel"
fulldepends="xkeyboard-config"
short_desc="X11 server from X.org"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://xorg.freedesktop.org"
license="MIT/X11, BSD"
distfiles="${XORG_SITE}/xserver/$pkgname-$version.tar.bz2"
checksum=3654b613393734ce0c7c23e81ca4ceb6e8afefb5f0649233ffd105c1220544fe
long_desc="
 The X11 server from the modularized source tree of X.org."

post_install() {
	vinstall ${FILESDIR}/x11-input.rules 644 \
		etc/udev/rules.d 75-x11-input.rules
	vinstall ${FILESDIR}/11-quirks.conf 644 etc/X11/xorg.conf.d
	vinstall COPYING 644 usr/share/licenses/${pkgname}
}
