# Template file for 'atom'
pkgname=atom
version=0.186.0
revision=1
build_style=meta
hostmakedepends="git nodejs>=0.10.0 pkg-config libgnome-keyring-devel"
makedepends="nodejs>=0.10.0 python<3.0.0 GConf-devel libgnome-keyring-devel"
short_desc="Chrome-based text editor from Github"
maintainer="Andrea Brancaleoni <miwaxe@gmail.com>"
license="MIT"
homepage="https://atom.io"

do_fetch() {
	local url="git://github.com/${pkgname}/${pkgname}"
	msg_normal "Fetching source from $url ...\n"
	git clone --branch v${version} ${url} ${pkgname}-${version}
}

do_build() {
	msg_normal "Building ${pkgname} in $(pwd)\n"
	script/build
}

do_install() {
	msg_normal "Installing ${pkgname} in ${PKGDESTDIR}/usr\n"
	script/grunt install --install-dir ${PKGDESTDIR}/usr
	sed -i "s|${PKGDESTDIR}||" ${PKGDESTDIR}/usr/share/applications/atom.desktop
}
