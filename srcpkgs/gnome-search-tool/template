# Template file for 'gnome-search-tool'
pkgname=gnome-search-tool
version=3.4.0
distfiles="${GNOME_SITE}/$pkgname/3.4/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--disable-schemas-compile --disable-scrollkeeper
--with-gconf-schema-file-dir=/usr/share/gconf/schemas
--disable-schemas-install"
short_desc="Search utility for GNOME"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnome.org"
license="GPL-2"
checksum=6c4ed39ab1196d118e5e0d2a7faa07fbbb257831454ee92ff0c6f28c0942e69c
long_desc="
 This package contains $pkgname, a search utility for the GNOME desktop."

gconf_schemas="${pkgname}.schemas"
replaces="gnome-utils>=3.0"

Add_dependency run desktop-file-utils

Add_dependency build which
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build itstool
Add_dependency build gnome-doc-utils
Add_dependency build gtk+3-devel
Add_dependency build GConf-devel

Add_dependency full gsettings-desktop-schemas

post_install() {
	mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
	gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
		--domain ${pkgname} ${wrksrc}/*.schemas
}
