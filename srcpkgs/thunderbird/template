# Template build file for 'thunderbird'.
pkgname=thunderbird
version=3.0
revision=2
wrksrc=comm-1.9.1
distfiles="${MOZILLA_SITE}/${pkgname}/releases/${version}/source/${pkgname}-${version}.source.tar.bz2"
build_style=gnu_configure
configure_args="--enable-application=mail --enable-default-toolkit=cairo-gtk2
--disable-dbus --disable-crashreporter --disable-tests --disable-debug
--enable-optimize --disable-embedding-tests --disable-installer
--disable-embedding-tests --disable-necko-wifi --disable-libnotify
--with-system-zlib --with-system-bz2 --enable-system-cairo
--with-system-png --with-system-nspr --with-system-nss
--disable-javaxpcom --with-system-jpeg --with-system-sqlite"
short_desc="Mozilla mail client"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=750fc955e4474eef9ec36e8193df2811bcafb2b8cf27ecc0ebe65cec2eb33067
long_desc="
 Mozilla Thunderbird is a redesign of the Mozilla mail component. The
 goal is to produce a cross platform stand alone mail application using
 the XUL user interface language. This version uses the gtk2 toolkit."

Add_dependency run glibc
Add_dependency run xulrunner
Add_dependency run nspr
Add_dependency run alsa-lib
Add_dependency run libstdc++
Add_dependency run libgcc
Add_dependency run gtk+
Add_dependency run atk
Add_dependency run glib
Add_dependency run pango
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run cairo
Add_dependency run zlib
Add_dependency run sqlite
Add_dependency run libXrender
Add_dependency run libX11
Add_dependency run libXt
Add_dependency run jpeg
Add_dependency run libpng
Add_dependency run nss
Add_dependency run bzip2
Add_dependency build zip
Add_dependency build python
Add_dependency build glibc-devel
Add_dependency build xulrunner-devel
Add_dependency build nspr-devel
Add_dependency build alsa-lib-devel
Add_dependency build libstdc++-devel
Add_dependency build gtk+-devel
Add_dependency build atk-devel
Add_dependency build glib-devel
Add_dependency build pango-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build cairo-devel
Add_dependency build zlib-devel
Add_dependency build sqlite-devel
Add_dependency build libXrender-devel
Add_dependency build libX11-devel
Add_dependency build libXt-devel
Add_dependency build jpeg-devel
Add_dependency build libpng-devel
Add_dependency build nss-devel
Add_dependency build bzip2-devel

post_install()
{
	# Remove libsqlite3 shlib provided by sqlite.
	rm -f ${DESTDIR}/usr/lib/$pkgname-$version/libsqlite3.so || return 1

	install -d ${DESTDIR}/usr/share/applications || return 1
	install -d ${DESTDIR}/usr/share/pixmaps || return 1
	install -m644 ${FILESDIR}/*.desktop \
		${DESTDIR}/usr/share/applications || return 1
	install -m644 ${wrksrc}/mail/branding/nightly/mailicon48.png \
		${DESTDIR}/usr/share/pixmaps/thunderbird.png || return 1
}
