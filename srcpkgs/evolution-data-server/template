# Template file for 'evolution-data-server'
pkgname=evolution-data-server
version=2.32.1
revision=1
distfiles="${GNOME_SITE}/$pkgname/2.32/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--localstatedir=/var --enable-gnome-keyring
--enable-ssl --enable-smime --enable-ipv6=yes --enable-calendar=yes
--enable-largefile --disable-schemas-install --with-libdb=/usr
--with-gconf-schema-file-dir=/usr/share/gconf/schemas
--with-krb5=/usr --with-nspr-includes=/usr/include/nspr
--with-nss-includes=/usr/include/nss --with-openldap"
short_desc="Evolution data server"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=de6a724504a9d72ca550a5a157df1e27dbb951a673f281106171c2345912fc79
long_desc="
 Evolution Data Server is responsible for managing calendar and addressbook
 information within the GNOME desktop."

subpackages="$pkgname-devel"
Add_dependency run glibc
Add_dependency run zlib
Add_dependency run glib
Add_dependency run libxml2
Add_dependency run sqlite
Add_dependency run mit-krb5-libs
Add_dependency run e2fsprogs-libs
Add_dependency run nss
Add_dependency run nspr
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run atk
Add_dependency run pango
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run libpng
Add_dependency run gdk-pixbuf
Add_dependency run gtk+
Add_dependency run libdb
Add_dependency run libldap
Add_dependency run libical
Add_dependency run libsoup
Add_dependency run libgnome-keyring
Add_dependency run libgweather
Add_dependency run GConf
Add_dependency run libgdata

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gperf
Add_dependency build glib-devel
Add_dependency build zlib-devel
Add_dependency build libsoup-devel
Add_dependency build libxml2-devel
Add_dependency build sqlite-devel
Add_dependency build mit-krb5-devel
Add_dependency build e2fsprogs-devel
Add_dependency build nss-devel
Add_dependency build nspr-devel
Add_dependency build dbus-glib-devel
Add_dependency build dbus-devel
Add_dependency build GConf-devel
Add_dependency build gdk-pixbuf-devel
Add_dependency build gtk+-devel
Add_dependency build atk-devel
Add_dependency build pango-devel
Add_dependency build cairo-devel
Add_dependency build freetype-devel
Add_dependency build fontconfig-devel
Add_dependency build libgnome-keyring-devel
Add_dependency build db-devel
Add_dependency build libical-devel
Add_dependency build libgweather-devel
Add_dependency build libldap-devel
Add_dependency build libgdata-devel

pre_configure()
{
	# Fix up pkgconfig file!
	sed -i -e "s|@mozilla_nss@|mozilla-nss|g" \
	    -e "s|@mozilla_nspr@|mozilla-nspr|g" \
		${wrksrc}/evolution-data-server.pc.in
}

