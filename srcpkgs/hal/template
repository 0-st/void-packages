# Template file for 'hal'
pkgname=hal
version=0.5.14
revision=3
distfiles="http://hal.freedesktop.org/releases/hal-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-static=no --disable-console-kit
 --disable-policy-kit --disable-acpi-ibm --disable-parted
 --disable-acl-management --disable-smbios --enable-umount-helper
 --disable-docbook-docs --with-udev-prefix=/lib --localstatedir=/var
 --with-hal-user=hal --with-hal-group=hal"
short_desc="Hardware Abstraction Layer"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=c4c5ecc5d50d5d9c061dc06c405461b1f71c12f2c60ed062350b2e6db2f1c51e
long_desc="
 HAL is daemon for collecting and maintaining information from several
 sources about the hardware on the system."

subpackages="libhal libhal-devel"
keep_empty_dirs=yes
conf_files="
/etc/dbus-1/system.d/hal.conf
/etc/hal/fdi/policy/10-keymap.fdi"
openrc_services="hal default true"

# Create hal system account.
system_accounts="hal"
hal_groups="optical,floppy,storage"

Add_dependency run glibc
Add_dependency run libblkid
Add_dependency run dbus-libs
Add_dependency run dbus-glib
Add_dependency run expat
Add_dependency run glib
Add_dependency run pciutils
Add_dependency run ConsoleKit-x11
Add_dependency run dbus
Add_dependency run libhal

Add_dependency build pkg-config
Add_dependency build libblkid-devel
Add_dependency build dbus-devel
Add_dependency build dbus-glib-devel
Add_dependency build expat-devel
Add_dependency build glib-devel
Add_dependency build pciutils-devel
Add_dependency build ConsoleKit

Add_dependency full udev
Add_dependency full bash
Add_dependency full hal-info
Add_dependency full eject
Add_dependency full usbutils
Add_dependency full dmidecode
Add_dependency full pm-utils

post_install()
{
	rm -rf ${DESTDIR}/var
	install -D -m755 ${FILESDIR}/hal.rc ${DESTDIR}/etc/init.d/hal
	install -D -m644 ${FILESDIR}/10-keymap.fdi \
		${DESTDIR}/etc/hal/fdi/policy/10-keymap.fdi
}
