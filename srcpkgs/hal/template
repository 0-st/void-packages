# Template file for 'hal'
pkgname=hal
version=0.5.13
revision=4
distfiles="http://hal.freedesktop.org/releases/hal-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-static=no --disable-console-kit
 --disable-policy-kit --disable-acpi-ibm --disable-parted
 --disable-acl-management --disable-smbios --enable-umount-helper
 --disable-docbook-docs --with-udev-prefix=/lib --localstatedir=/var
 --with-hal-user=hal --with-hal-group=hal"
short_desc="Hardware Abstraction Layer"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=d47c9799c18929cffbce5bfa48f35c89657d7f630c6da682f193928697c71ab5
long_desc="
 HAL is daemon for collecting and maintaining information from several
 sources about the hardware on the system."

keep_empty_dirs=yes
conf_files="/etc/dbus-1/system.d/hal.conf
 /etc/hal/fdi/policy/10-keymap.fdi"
openrc_services="hal default"

# Create hal system account.
system_accounts="hal"
hal_groups="optical,floppy,storage"

Add_dependency full glibc
Add_dependency full udev
Add_dependency full dbus
Add_dependency full dbus-glib
Add_dependency full expat
Add_dependency full bash
Add_dependency full hal-info
Add_dependency full eject
Add_dependency full ConsoleKit
Add_dependency run  ConsoleKit-x11
Add_dependency full pciutils
Add_dependency full usbutils
Add_dependency full dmidecode
Add_dependency full pm-utils
Add_dependency full libblkid
Add_dependency build pkg-config

post_install()
{
	rm -rf ${DESTDIR}/var
	install -D -m755 ${FILESDIR}/hal.rc ${DESTDIR}/etc/init.d/hal
	install -D -m644 ${FILESDIR}/10-keymap.fdi \
		${DESTDIR}/etc/hal/fdi/policy/10-keymap.fdi
}
