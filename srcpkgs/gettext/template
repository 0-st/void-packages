# Template build file for 'gettext'.
pkgname=gettext
version=0.18
distfiles="http://ftp.gnu.org/pub/gnu/$pkgname/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-java --disable-native-java --disable-csharp
--disable-libasprintf --enable-threads=posix --disable-rpath
--disable-acl --with-included-glib --with-included-libcroco
--with-included-libxml --without-included-regex --without-emacs
--without-cvs"
short_desc="Internationalized Message Handling Library and tools"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=02342c1de18c03c601f8b91cbd896b70486a4b945bd816f34541e0d7b5a96fe5
long_desc="
 GNU gettext provides the necessary tools and libraries for handling
 messages in different languages, as one of the steps to
 internationalisation (or i18n) of a utility."

subpackages="$pkgname-devel $pkgname-libs"
Add_dependency run glibc
Add_dependency run ncurses-libs
Add_dependency run gettext-libs
Add_dependency run libgomp
Add_dependency build ncurses-devel
Add_dependency build diffutils

post_configure()
{
	# Disable ACL.
	sed -i 's@#define.*_ACL.*@/*&*/@g' ${wrksrc}/gettext-tools/config.h
	for f in $(find ${wrksrc} -name Makefile); do
		sed -i 's@-lacl@@g' ${f}
	done
}
