# Build template for 'kernel-snapshot'. To test the latest and greatest
# kernel available from www.kernel.org.
. ${XBPS_SRCPKGDIR}/kernel/template

# Reset some stuff.
unset revision triggers build_depends run_depends

# Override required vars.
pkgname=kernel-snapshot
#revision=1
_kernel_headers_revision=${revision}
_kernel_snapshot=yes
_kernel_ver=3.0
_kernel_ver_minor=0
_kernel_patch_ver=rc4
version=${_kernel_ver}.${_kernel_ver_minor}${_kernel_patch_ver}
short_desc="The Linux kernel and modules"
wrksrc="linux-${_kernel_ver}-${_kernel_patch_ver}"
distfiles="${KERNEL_SITE}/kernel/v3.0/testing/linux-${_kernel_ver}-${_kernel_patch_ver}.tar.bz2"
checksum=b3b0aa31f6a461562157aefefcb2b6651a9d0550da96996cfb1b8c87ac77c3ac
subpackages="$pkgname-headers"
noverifyrdeps=yes

if [ -n "${_kernel_snapshot}" ]; then
	_kernver="${_kernel_ver}.${_kernel_ver_minor}-${_kernel_patch_ver}"
else
	_kernver=${version}
fi

if [ -n "$revision" ]; then
	_kernver="${_kernver}_${revision}"
fi

Add_dependency run linux-firmware
Add_dependency run initramfs-tools
Add_dependency build perl		">=0"
Add_dependency full module-init-tools
