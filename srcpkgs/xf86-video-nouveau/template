# Template build file for 'xf86-video-nouveau'.
pkgname=xf86-video-nouveau
_distver=0.0.16
_gitver="$(date +%Y%m%d)"
version=${_distver}.${_gitver}
build_wrksrc=nouveau
build_style=gnu_configure
short_desc="Xorg OpenSource NVIDIA video driver"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://nouveau.freedesktop.org/wiki/"
license="GPL-2, MIT"
checksum=017974b622eea3b4483405368492b0c6f178854a9b9753d50e13c578b8a328dc
long_desc="
 This is the video driver for NVIDIA cards for the Xorg by using the
 free software stack, nouveau."

nofetch=yes
noextract=yes

Add_dependency run glibc
Add_dependency run libdrm
Add_dependency run libudev
Add_dependency run xorg-server

Add_dependency build git
Add_dependency build automake
Add_dependency build pkg-config
Add_dependency build libdrm-devel
Add_dependency build libudev-devel
Add_dependency build xorg-server-devel
Add_dependency build xorg-util-macros

do_fetch()
{
	local gitrepo="git://anongit.freedesktop.org/nouveau/xf86-video-nouveau"

	msg_normal "Fetching source from git repo at: $gitrepo\n"
	cd ${wrksrc} && git clone -v --depth 1 $gitrepo ${build_wrksrc}
}

pre_configure()
{
	cd ${build_wrksrc} && autoreconf -fi
}
