# Template file for 'libgphoto2'
pkgname=libgphoto2
version=2.4.9
revision=1
distfiles="${SOURCEFORGE_SITE}/gphoto/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--disable-rpath --localstatedir=/var udevscriptdir=/lib/udev"
short_desc="Digital camera access library"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=d4bd7da50f073c121ebca2832a7eeb23d2f7a493e902d80a0ab7f7f0f4eb110a
long_desc="
 libgphoto2 is the core library designed to allow access to digital
 camera by external programs. Here is an overview of the global
 architecture:

 It abstracts communication ports and camera protocol, to allow a
 complete modularity. To support a new communication physical layer
 (like IEEE1394), just add a new port to libgphoto2_port. To support
 a new kind a digital camera, just provide a new camlib with the
 required callbacks. All of this will be transparent to client
 programs that call libgphoto2."

subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run libltdl
Add_dependency run libusb-compat
Add_dependency run jpeg
Add_dependency run gd
Add_dependency run libexif
Add_dependency run dbus-libs
Add_dependency run libhal

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build doxygen
Add_dependency build libltdl-devel
Add_dependency build libusb-compat-devel
Add_dependency build jpeg-devel
Add_dependency build gd-devel
Add_dependency build libexif-devel
Add_dependency build dbus-devel
Add_dependency build libhal-devel

post_install()
{
	install -d ${DESTDIR}/lib/udev/rules.d

	LD_LIBRARY_PATH="${DESTDIR}/usr/lib${LD_LIBRARY_PATH:+:}$LD_LIBRARY_PATH" \
		CAMLIBS="${DESTDIR}/usr/lib/libgphoto2/${version}" \
		"${DESTDIR}/usr/lib/libgphoto2/print-camera-list" \
		udev-rules version 136 group plugdev mode 0660 > \
		"${DESTDIR}/lib/udev/rules.d/54-gphoto.rules" || return 1
}
