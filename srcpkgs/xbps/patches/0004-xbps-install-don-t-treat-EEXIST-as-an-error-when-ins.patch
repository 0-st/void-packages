From fa40928026bd31ebc398a91066efe6709838f9a3 Mon Sep 17 00:00:00 2001
From: Juan RP <xtraeme@gmail.com>
Date: Wed, 16 Jan 2013 11:47:52 +0100
Subject: [PATCH] xbps-install: don't treat EEXIST as an error when installing
 pkgs.

Thanks to pancake for the bug hunting.
---
 NEWS                           | 3 +++
 bin/xbps-install/transaction.c | 1 +
 2 files changed, 4 insertions(+)

diff --git a/bin/xbps-install/transaction.c b/bin/xbps-install/transaction.c
index b91448b..480faeb 100644
--- bin/xbps-install/transaction.c
+++ bin/xbps-install/transaction.c
@@ -218,6 +218,7 @@ install_new_pkg(struct xbps_handle *xhp, const char *pkg, bool reinstall)
 	if ((rv = xbps_transaction_install_pkg(xhp, pkg, reinstall)) != 0) {
 		if (rv == EEXIST) {
 			printf("Package `%s' already installed.\n", pkg);
+			rv = 0;
 		} else if (rv == ENOENT) {
 			fprintf(stderr, "Unable to locate '%s' in "
 			    "repository pool.\n", pkg);
-- 
1.8.1.1

