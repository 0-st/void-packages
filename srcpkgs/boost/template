# Template file for 'boost'
pkgname=boost
version=1.50.0
revision=1
_boostver="$(echo $version|sed 's|\.|_|g')"
wrksrc="${pkgname}_${_boostver}"
subpackages="boost-build boost-devel boost-jam boost-python"
makedepends="zlib-devel icu-devel python-devel"
short_desc="Free peer-reviewed portable C++ source libraries"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.boost.org/"
license="Boost Software License 1.0"
distfiles="${SOURCEFORGE_SITE}/$pkgname/${pkgname}_${_boostver}.tar.bz2"
checksum=c9ace2b8c81fa6703d1d17c7e478de3bc51101c5adbdeb3f6cb72cf3045a8529
long_desc="
 boost is a library for applications dealing with netlink sockets.
 The library provides an interface for raw netlink messaging and various
 netlink family specific interfaces."

do_build() {
	./bootstrap.sh -prefix=${DESTDIR}/usr
	./bjam cflags=-fno-strict-aliasing ${makejobs}
}

do_install() {
	# Install bjam
	_bindir="bin.linuxx86"
	[ "${XBPS_MACHINE}" = "x86_64" ] && _bindir="bin.linuxx86_64"
	vinstall bjam 755 usr/bin

	# Install headers/libs
	./bjam --prefix=${DESTDIR}/usr install

	# Install Boost.Build stuff.
	install -d ${DESTDIR}/usr/share/boost-build
	cd $wrksrc/tools/build/v2 && cp -a . ${DESTDIR}/usr/share/boost-build
	find ${DESTDIR}/usr/share/boost-build \
		-type f -name \*.orig -exec rm -f {} \;
	( echo '# System wide configuration file for Boost.Build.' ; \
	  echo ; \
	  echo 'using gcc ;' ; ) >${wrksrc}/site-config.jam
	cd $wrksrc
	vinstall site-config.jam 644 etc

	# license
	vinstall LICENSE_1_0.txt 644 usr/share/licenses/boost
}
