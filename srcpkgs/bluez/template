# Template file for 'bluez'
pkgname=bluez
version=4.101
revision=3
build_style=gnu-configure
configure_args="--libexecdir=/usr/lib --enable-gstreamer --enable-dund
 --enable-alsa --enable-usb --enable-tools --enable-bccmd
 --enable-hid2hci --enable-dfutool --enable-hidd --enable-pand
 --enable-cups --enable-pnat --enable-wiimote --disable-test
 --with-systemdunitdir=/usr/lib/systemd/system --enable-sap
 --enable-datafiles --enable-dbusoob --enable-health"
subpackages="bluez-alsa bluez-compat bluez-gstreamer
 libbluetooth libbluetooth-devel"
makedepends="pkg-config flex libudev-devel>=183 readline-devel
 dbus-devel glib-devel libusb-compat-devel libcap-ng-devel
 gst-plugins-base-devel libsndfile-devel cups-devel"
short_desc="Bluetooth tools and daemons"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.bluez.org/"
license="GPL-2"
distfiles="${KERNEL_SITE}/bluetooth/$pkgname-$version.tar.xz"
checksum=41f9578bef39b8c94a2d6ddeaa556afd22d136936d0f03100e422fe970a45a7d
long_desc="
 This package contains tools and system daemons for using Bluetooth devices.

 BlueZ is the official Linux Bluetooth protocol stack. It is an Open Source
 project distributed under GNU General Public License (GPL)."

systemd_services="bluetooth.service on"
make_dirs="/var/lib/bluetooth 0755 root root"
conf_files="
/etc/bluetooth/main.conf
/etc/bluetooth/rfcomm.conf
/etc/bluetooth/network.conf
/etc/bluetooth/input.conf
/etc/bluetooth/audio.conf
/etc/bluetooth/serial.conf"

post_install() {
	for f in network input audio serial; do
		vinstall ${f}/${f}.conf 644 etc/bluetooth
	done
	vinstall scripts/bluetooth_serial 755 lib/udev
	for f in simple-agent test-device test-input; do
		vinstall test/${f} 755 usr/bin bluez-${f}
	done
	# systemd takes care of bluetoothd initialization.
	rm -f ${DESTDIR}/usr/lib/udev/rules.d/97-bluetooth.rules

	# Switch to /usr.
	vmove "lib/*" usr/lib

}
