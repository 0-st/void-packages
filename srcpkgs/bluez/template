# Template file for 'bluez'
pkgname=bluez
version=4.96
distfiles="${KERNEL_SITE}/bluetooth/$pkgname-$version.tar.bz2"
build_style=gnu-configure
configure_args="--libexecdir=/lib --enable-gstreamer
--enable-alsa --enable-usb --enable-tools --enable-bccmd
--enable-hid2hci --enable-dfutool --enable-hidd --enable-pand --enable-dund
--disable-cups --enable-capng --enable-pnat
--with-systemdunitdir=/lib/systemd/system"
revision=1
short_desc="Bluetooth tools and daemons"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.bluez.org/"
license="GPL-2"
checksum=7b34aa28c831d77e92d348951653bc58347f4b6177e2f89cd5ffb8ffc37142ae
long_desc="
 This package contains tools and system daemons for using Bluetooth devices.

 BlueZ is the official Linux Bluetooth protocol stack. It is an Open Source
 project distributed under GNU General Public License (GPL)."

conf_files="
/etc/bluetooth/main.conf
/etc/bluetooth/rfcomm.conf
/etc/bluetooth/network.conf
/etc/bluetooth/input.conf
/etc/bluetooth/audio.conf
/etc/bluetooth/serial.conf"

subpackages="$pkgname-alsa $pkgname-compat $pkgname-gstreamer libbluetooth"
subpackages="$subpackages libbluetooth-devel"


Add_dependency build pkg-config
Add_dependency build flex
Add_dependency build libudev-devel
Add_dependency build readline-devel
Add_dependency build gst-plugins-base-devel
Add_dependency build alsa-lib-devel
Add_dependency build dbus-devel
Add_dependency build glib-devel
Add_dependency build libusb-compat-devel
Add_dependency build libcap-ng-devel
Add_dependency build libsndfile-devel

post_install()
{
	install -d ${DESTDIR}/lib/udev/rules.d
	install -m644 network/network.conf input/input.conf audio/audio.conf \
		serial/serial.conf ${DESTDIR}/etc/bluetooth
	install -m755 scripts/bluetooth_serial ${DESTDIR}/lib/udev
	install -m755 test/simple-agent \
		${DESTDIR}/usr/bin/bluez-simple-agent

	# systemd takes care of bluetoothd initialization.
	rm -f ${DESTDIR}/lib/udev/rules.d/97-bluetooth.rules
}
