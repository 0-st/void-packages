# Template file for 'bluez'
pkgname=bluez
version=4.58
distfiles="${KERNEL_SITE}/bluetooth/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--localstatedir=/var --libexecdir=/lib --enable-gstreamer
 --enable-alsa --enable-usb --enable-netlink --enable-tools --enable-bccmd
 --enable-hid2hci --enable-dfutool --enable-hidd --enable-pand --enable-dund
 --disable-cups --enable-configfiles"
short_desc="Bluetooth tools and daemons"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=b3f034f9c1697c6563ee047ff2ea6809c684a3fc11486de6c3e8141a0d5c0136
long_desc="
 This package contains tools and system daemons for using Bluetooth devices.

 BlueZ is the official Linux Bluetooth protocol stack. It is an Open Source
 project distributed under GNU General Public License (GPL)."

conf_files="
/etc/conf.d/bluetooth
/etc/bluetooth/audio.conf
/etc/bluetooth/input.conf
/etc/bluetooth/main.conf
/etc/bluetooth/network.conf
/etc/bluetooth/rfcomm.conf"
openrc_services="bluetooth default"

subpackages="$pkgname-alsa $pkgname-compat $pkgname-gstreamer libbluetooth"
subpackages="$subpackages libbluetooth-devel"

Add_dependency full glibc
Add_dependency full dbus
Add_dependency full libnl
Add_dependency full libusb
Add_dependency full udev
Add_dependency full libcap-ng
Add_dependency run  libbluetooth
Add_dependency build pkg-config
Add_dependency build flex
Add_dependency build gst-plugins-base
Add_dependency build alsa-lib

post_install()
{
	cd ${wrksrc} || return 1
	install -m644 network/network.conf input/input.conf audio/audio.conf \
		${DESTDIR}/etc/bluetooth || return 1
	install -m755 scripts/bluetooth_serial ${DESTDIR}/lib/udev || return 1
	install -m755 test/simple-agent \
		${DESTDIR}/usr/bin/bluez-simple-agent || return 1
	install -d ${DESTDIR}/etc/init.d ${DESTDIR}/etc/conf.d || return 1
	install -m755 ${FILESDIR}/bluetooth.rc \
		${DESTDIR}/etc/init.d/bluetooth || return 1
	install -m644 ${FILESDIR}/bluetooth.confd \
		${DESTDIR}/etc/conf.d/bluetooth || return 1
}	
