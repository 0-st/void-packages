# Template file for 'glibc32'
pkgname=glibc32
version=2.11_2
distfiles="http://xbps.nopcode.org/repos/stable/i686/glibc-${version}.i686.xbps"
build_style=custom-install
short_desc="The GNU C library (32 bits)"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=57e3be723f12626479e54451f56460335ccbca8a1270c92638b4e423502deeb1
long_desc="
 The GNU C Library is the standard system C library for all GNU systems,
 and is an important part of what makes up a GNU system.  It provides the
 system API for all programs written in C and C-compatible languages such
 as C++ and Objective C; the runtime facilities of other programming
 languages use the C library to access the underlying operating system.

 This package installs the 32 bit libraries for x86_64 systems."

nostrip=yes
noextract=yes
noverifyrdeps=yes
only_for_archs=x86_64

Add_dependency build libarchive-devel

do_install()
{
	local srcfile="${XBPS_SRCDISTDIR}/$(basename ${distfiles})"
	bsdtar xf ${srcfile} -C ${wrksrc} || return 1

	install -d ${DESTDIR}/lib32 ${DESTDIR}/usr/lib32/gconv
	cp -a ${wrksrc}/lib/*.so* ${DESTDIR}/lib32
	cp -a ${wrksrc}/usr/lib/gconv/* ${DESTDIR}/usr/lib32/gconv
	install -d ${DESTDIR}/lib
	cd ${DESTDIR}/lib && ln -sf ../lib32/ld-${version}.so ld-linux.so.2
}
