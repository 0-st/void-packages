# Template build file for 'xf86-video-fbturbo-git'.
# Latest commit as of 20140124
_githash=8dec039ed5f2205cb1306f57e0af27a1d4f2dfec

pkgname=xf86-video-fbturbo-git
version=20140124
revision=3
build_style=gnu-configure
create_srcdir=yes
distfiles="https://github.com/ssvb/xf86-video-fbturbo/archive/${_githash}.tar.gz"
checksum="5470d35dc726f37dbcd6cbf0fb02b0d8aa1bbe42270375b07564647181bcc918"
wrksrc="xf86-video-fbturbo-${_githash}"
short_desc="Xorg DDX driver for Allwinner A10/A13 and other ARM devices"
homepage="http://github.com/ssvb/xf86-video-fbturbo"
license="MIT, GPL"
maintainer="Juan RP <xtraeme@gmail.com>"

only_for_archs="armv6l armv7l"
hostmakedepends="automake libtool pkg-config xorg-util-macros xorg-server-devel"
makedepends="libump-devel-git libXrandr-devel xorg-server-devel>=1.14"
depends="xserver-abi-video-14_1"
provides="xf86-video-fbturbo-${version}_${revision}"
replaces="xf86-video-fbturbo>=0"

pre_configure() {
	cp /usr/include/xorg/dri2.h src
	autoreconf -fi
}

post_install() {
	vinstall xorg.conf 644 etc/X11/xorg.conf.d 99-fbturbo.conf
}
