# Template file for 'libffi'
pkgname=libffi
version=3.0.10
distfiles="ftp://sourceware.org/pub/$pkgname/$pkgname-$version.tar.gz"
build_style=gnu-configure
configure_args="--includedir=/usr/include"
short_desc="Library supporting Foreign Function Interfaces"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://sourceware.org/libffi"
license="MIT"
checksum=f01eb9027e9eb56aeaeef636649877756d475d714ef8b47f627f65bc5f3b492f
long_desc="
 The libffi library provides a portable, high level programming
 interface to various calling conventions. This allows a programmer to
 call any function specified by a call interface description at run-time.

 Some programs may not know at the time of compilation what arguments
 are to be passed to a function. For instance, an interpreter may be
 told at run-time about the number and types of arguments used to call
 a given function. Libffi can be used in such programs to provide a
 bridge from the interpreter program to compiled code.

 Ffi stands for Foreign Function Interface. A foreign function
 interface is the popular name for the interface that allows code
 written in one language to call code written in another language.
 The libffi library really only provides the lowest, machine dependent
 layer of a fully featured foreign function interface.  A layer must
 exist above libffi that handles type conversions for values passed
 between the two languages."

subpackages="$pkgname-devel"
Add_dependency run glibc
Add_dependency build texinfo

post_install()
{
	# Fix includedir for pkg-config file.
	sed -i -e "s|\${libdir}/libffi-${version}|/usr|" \
		${DESTDIR}/usr/lib/pkgconfig/libffi.pc
	vinstall LICENSE 644 usr/share/licenses/libffi
}
