# Template file for 'libldap'
pkgname=libldap
version=2.4.24
wrksrc="openldap-${version}"
distfiles="ftp://ftp.openldap.org/pub/OpenLDAP/openldap-release/openldap-$version.tgz"
build_style=gnu_configure
configure_args="--localstatedir=/var --enable-dynamic --enable-proctitle
--enable-ipv6 --enable-local --with-cyrus-sasl --with-threads --with-tls
--enable-syslog --disable-slapd"
short_desc="OpenLDAP libraries"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=fdcecb64082a0d8e124f13b31fccf4765901e29decaf4224b28d4cff90a14614
long_desc="
 These are the run-time libraries for the OpenLDAP (Lightweight Directory
 Access Protocol) servers and clients."

conf_files="/etc/openldap/ldap.conf" 
subpackages="libldap-devel"

Add_dependency run glibc
Add_dependency run libsasl
Add_dependency run libssl
Add_dependency build pkg-config
Add_dependency build libsasl-devel
Add_dependency build openssl-devel
Add_dependency build groff

post_install()
{
	# Remove unused stuff.
	rm -rf ${DESTDIR}/usr/bin
	rm -rf ${DESTDIR}/usr/share/man/man[18]
	rm -f ${DESTDIR}/etc/openldap/*.default
	mv ${DESTDIR}/usr/share/man/man5/ldap.conf.5 ${DESTDIR}/usr/share/man
	rm -f ${DESTDIR}/usr/share/man/man5/*
	mv ${DESTDIR}/usr/share/man/ldap.conf.5 ${DESTDIR}/usr/share/man/man5
}
