# Template file for 'accountsservice'
pkgname=accountsservice
version=0.6.15
revision=5
distfiles="http://www.freedesktop.org/software/$pkgname/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--with-systemdsystemunitdir=/lib/systemd/system"
short_desc="D-Bus interfaces for querying and manipulating user account information"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://cgit.freedesktop.org/accountsservice/"
license="GPL-3"
checksum=9feb3d58c5c739f2df4b5410404b29f16e3f4aa6739b685ceb12903f4d5ea867
long_desc="
 The accountsservice project provides a set of D-Bus interfaces for
 querying and manipulating user account information and an implementation
 of these interfaces, based on the useradd, usermod and userdel commands."

systemd_services="accounts-daemon.service on"
subpackages="$pkgname-devel"

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gobject-introspection
Add_dependency build dbus-glib-devel
Add_dependency build polkit-devel

Add_dependency run ConsoleKit-x11 # uses ConsoleKit dbus stuff.

post_install() {
	for d in users icons; do
		vmkdir var/lib/AccountsService/${d}
		touch ${DESTDIR}/var/lib/AccountsService/${d}/.owned
	done
}
