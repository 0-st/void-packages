# Template file for 'accountsservice'
pkgname=accountsservice
version=0.6.18
distfiles="http://www.freedesktop.org/software/$pkgname/$pkgname-$version.tar.xz"
build_style=gnu-configure
configure_args="--disable-static --with-systemdsystemunitdir=/lib/systemd/system"
short_desc="D-Bus interfaces for querying and manipulating user account information"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://cgit.freedesktop.org/accountsservice/"
license="GPL-3"
checksum=190153d5c2a24e324afd2d89dbeee22e833341fbe7155f9dd805b24a8273c6d1
long_desc="
 The accountsservice project provides a set of D-Bus interfaces for
 querying and manipulating user account information and an implementation
 of these interfaces, based on the useradd, usermod and userdel commands."

systemd_services="accounts-daemon.service on"
subpackages="$pkgname-devel"

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gobject-introspection
Add_dependency build polkit-devel
Add_dependency build systemd-devel

Add_dependency run ConsoleKit-x11 # uses ConsoleKit dbus stuff.

post_install() {
	for d in users icons; do
		vmkdir var/lib/AccountsService/${d}
		touch ${DESTDIR}/var/lib/AccountsService/${d}/.owned
	done
}
