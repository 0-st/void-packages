# Template file for 'folks'
pkgname=folks
version=0.9.5
revision=1
build_style=gnu-configure
configure_args="--disable-static --disable-fatal-warnings --enable-eds-backend
 --enable-vala --enable-inspect-tool --enable-tracker-backend
 --disable-libsocialweb-backend --disable-schemas-compile"
hostmakedepends="pkg-config intltool which gobject-introspection"
# XXX needs zeitgeist >= 2.0
makedepends="readline-devel vala-devel>=0.22 telepathy-glib-devel>=0.21
 libgee08-devel>=0.12 evolution-data-server-devel>=3.10 tracker-devel>=0.16_2"
short_desc="GObject Library to aggregate people into metacontacts"
maintainer="Juan RP <xtraeme@gmail.com>"
license="LGPL-2.1"
homepage="http://telepathy.freedesktop.org/wiki/Folks"
distfiles="${GNOME_SITE}/$pkgname/0.9/$pkgname-$version.tar.xz"
checksum=924c440f16a8c9b0d0d832588fa77a1553fa2a5d2659c4c7d3178a7ef42222af
long_desc="
 libfolks is a library that aggregates people from multiple sources (eg,
 Telepathy connection managers and eventually evolution data server, Facebook,
 etc.) to create metacontacts. It's written in Vala (in part to evaluate Vala).
 The initial goal is for GObject/C support, though the Vala bindings should
 basically automatic."

pre_build() {
	export PKG_CONFIG_PATH="${wrksrc}/folks"
}

folks-devel_package() {
	depends="telepathy-glib-devel>=0.21
		 libgee08-devel>=0.12
		 evolution-data-server-devel>=3.10
		 folks>=${version}"
	short_desc+=" - development files"
	pkg_install() {
		vmove usr/include
		vmove usr/lib/pkgconfig
		vmove usr/share/gir-1.0
		vmove usr/share/vala
		vmove "usr/lib/*.so"
	}
}

folks_package() {
	depends="zeitgeist"
	pkg_install() {
		vmove all
	}
}
