# Template file for 'gnome-settings-daemon'
pkgname=gnome-settings-daemon
version=3.6.2
revision=1
patch_args="-Np1"
build_style=gnu-configure
subpackages="$pkgname-devel"
configure_args="--disable-static --enable-cups
 --disable-schemas-compile --enable-systemd --disable-packagekit"
depends="pulseaudio hicolor-icon-theme"
makedepends="automake pkg-config intltool libxslt docbook-xsl
 colord-devel>=0.1.23_3 libxklavier-devel libnotify-devel
 gtk+3-devel>=3.6.0_3 libcanberra-devel pulseaudio-devel nss-devel
 startup-notification-devel gnome-desktop-devel>=3.6.0 libgnomekbd-devel
 libxkbfile-devel xf86-input-wacom-devel libwacom-devel systemd-devel
 ibus-devel>=1.4.99 cups-devel libgudev-devel upower-devel"
fulldepends="gsettings-desktop-schemas"
short_desc="GNOME settings daemon"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.gnome.org"
license="GPL-3"
distfiles="${GNOME_SITE}/$pkgname/3.6/$pkgname-$version.tar.xz"
checksum=d718f9fdf3bb26fc71861548f834364955d37532871ec2e89a5ad0d63857215f
long_desc="
 This package provides a daemon to handle settings on the GNOME desktop."

pre_configure() {
	aclocal && automake
}

post_install() {
	# Plugins that aren't installed still have schema references
	# and cause gsettings errors - remove the references we're not using
	sed -i '/org\.gnome\.settings-daemon\.plugins\.updates/d' \
		${DESTDIR}/usr/share/glib-2.0/schemas/org.gnome.settings-daemon.plugins.gschema.xml
}
