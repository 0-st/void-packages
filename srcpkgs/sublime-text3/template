# Template file for 'sublime-text3'
pkgname=sublime-text3
_subl_distver=3
_subl_patchlevel=3043
version=${_subl_distver}.${_subl_patchlevel}
revision=1
short_desc="Sublime Text is a sophisticated text editor for code, markup and prose"
maintainer="Steven R <strob AT styez DOT com>"
license="Custom"
homepage="http://www.sublimetext.com/3dev"
distfiles="http://c758482.r82.cf2.rackcdn.com/sublime_text_3_build_${_subl_patchlevel}_x64.tar.bz2"
checksum="11bd229093abd6bfac371bf9ca90dcbe093de658290b4d21e8d382dc6f6334ff"
long_desc="
Sublime Text is a sophisticated text editor for code, markup and prose.
You'll love the slick user interface, extraordinary features and amazing performance."
wrksrc="sublime_text_3"
only_for_archs="x86_64"

do_install() {
	vmkdir "opt/sublime_text"
	vmkdir "usr/sbin"

	cp --preserve=mode -r ./* "${DESTDIR}/opt/sublime_text"

	vinstall "sublime_text.desktop" 644 "usr/share/applications/"

	for size in 128 16 256 32 48; do
		vinstall "Icon/${size}x${size}/sublime-text.png" 644 "usr/share/icons/hicolor/${size}x${size}/apps/"
	done

	ln -s /opt/sublime_text/sublime_text ${DESTDIR}/usr/sbin/subl3
}

sublime-text3_package() {
	nonfree="yes"
	nostrip="yes"
	depends="libpng gtk+ hicolor-icon-theme desktop-file-utils"
	pkg_install() {
		vmove all
	}
}
