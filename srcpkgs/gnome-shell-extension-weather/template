# Template file for 'gnome-shell-extension-weather'
pkgname=gnome-shell-extension-weather
version="$(date +%Y%m%d)"
build_style=custom-install
wrksrc=	${pkgname}-${version}
short_desc="Simple extension for displaying weather notifications in GNOME Shell."
maintainer="davehome <davehome@redthumb.info.tm>"
homepage="https://github.com/simon04/gnome-shell-extension-weather"
license="GPL-3"
long_desc="
 gnome-shell-extension-weather is a simple extension for displaying weather
 notifications in GNOME Shell.
 
 Currently, the weather report including forecast for today and tomorrow is
 fetched from Yahoo! Weather."
nofetch=yes
noextract=yes

Add_dependency run gnome-shell ">=3.2"
Add_dependency build autoconf
Add_dependency build automake
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gettext-devel
Add_dependency build gnome-common
Add_dependency build gnome-desktop-devel
Add_dependency build git

do_fetch()
{
	local url="git://github.com/simon04/${pkgname}.git"
	msg_normal " Fetching source from $url ...\n"
	git clone -b gnome3.2 $url ${wrksrc}
}

do_configure()
{
	cd ${wrksrc} && ./autogen.sh --prefix=/usr
}

do_build()
{
	cd ${wrksrc} && make DESTDIR=${DESTDIR}
}

do_install()
{
	cd ${wrksrc} && make DESTDIR=${DESTDIR} install
}
