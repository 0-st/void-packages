# Template file for 'gnome-shell-extension-weather'
pkgname=gnome-shell-extension-weather
version="$(date -u +%Y%m%d)"
build_style=gnu-configure
noarch=yes
nofetch=yes
noextract=yes
depends="gnome-shell>=3.4"
makedepends="which gnome-common>=3.4.0.1 pkg-config intltool gettext-devel glib-devel git"
short_desc="Simple extension for displaying weather notifications in GNOME Shell."
maintainer="davehome <davehome@redthumb.info.tm>"
homepage="https://github.com/simon04/gnome-shell-extension-weather"
license="GPL-3"
long_desc="
 gnome-shell-extension-weather is a simple extension for displaying weather
 notifications in GNOME Shell.
 
 Currently, the weather report including forecast for today and tomorrow is
 fetched from Yahoo! Weather."

do_fetch() {
	local url="git://github.com/simon04/${pkgname}.git"
	msg_normal " Fetching source from $url ...\n"
	git clone -b gnome3.4 $url ${pkgname}-${version}
}

pre_configure() {
	./autogen.sh
}

post_install() {
	local _ext_dir=weather\@gnome-shell-extensions.gnome.org

	cp weather-extension-configurator.py \
		${DESTDIR}/usr/share/gnome-shell/extensions/${_ext_dir}/

	mkdir -p ${DESTDIR}/usr/bin && cd ${DESTDIR}/usr/bin && \
	ln -s ../share/gnome-shell/extensions/${_ext_dir}/weather-extension-configurator.py \
		weather-extension-configurator
}
