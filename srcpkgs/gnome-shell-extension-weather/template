# Template file for 'gnome-shell-extension-weather'
pkgname=gnome-shell-extension-weather
version="$(date -u +%Y%m%d)"
build_style=gnu-configure
short_desc="Simple extension for displaying weather notifications in GNOME Shell."
maintainer="davehome <davehome@redthumb.info.tm>"
homepage="https://github.com/simon04/gnome-shell-extension-weather"
license="GPL-3"
long_desc="
 gnome-shell-extension-weather is a simple extension for displaying weather
 notifications in GNOME Shell.
 
 Currently, the weather report including forecast for today and tomorrow is
 fetched from Yahoo! Weather."

noarch=yes
nofetch=yes
noextract=yes

Add_dependency run gnome-shell-extensions ">=3.2.0"
Add_dependency build automake
Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gettext-devel
Add_dependency build glib-devel
Add_dependency build gnome-common
Add_dependency build git

do_fetch()
{
	local url="git://github.com/simon04/${pkgname}.git"
	msg_normal " Fetching source from $url ...\n"
	git clone $url ${pkgname}-${version}
}

pre_configure()
{
	gnome-autogen.sh
}

post_install()
{
	local _ext_dir=weather\@gnome-shell-extensions.gnome.org

	cp ${wrksrc}/weather-extension-configurator.py \
		${DESTDIR}/usr/share/gnome-shell/extensions/${_ext_dir}/

	mkdir -p ${DESTDIR}/usr/bin && cd ${DESTDIR}/usr/bin && \
	ln -s ../share/gnome-shell/extensions/${_ext_dir}/weather-extension-configurator.py \
		weather-extension-configurator
}
