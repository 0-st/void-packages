# Template file for 'adobe-flash-plugin'
pkgname=adobe-flash-plugin
_distver=080811
version=11.beta2.${_distver}
#revision=1
# The EULA file
_eula="http://www.adobe.com/products/eulas/pdfs/Reader_Player_WWEULA-Combined-20060724_1430.pdf"
_eulacksum=986c3ddacfee18946fbef7b76485922f8f36e61f790776ce82a87afff3008427
if [ "$xbps_machine" = "x86_64" ]; then
	# There is no x86_64 version for 10.1beta yet.
	_disttarball="http://download.macromedia.com/pub/labs/flashplatformruntimes/flashplayer11"
	_disttarball="${_disttarball}/flashplayer11_b2_install_lin_64_${_distver}.tar.gz"
	_distcksum=5b2d8c3744031adad49121c959f2e899cbca2e91592c6773b1ba61d0ff2bafd1
else
	_disttarball="http://download.macromedia.com/pub/labs/flashplatformruntimes/flashplayer11"
	_disttarball="${_disttarball}/flashplayer11_b2_install_lin_32_${_distver}.tar.gz"
	_distcksum=9d821c3619a0a7f1f5769d6a7c57684d83a1c565896c354f9fcd7fb3f3620eec
fi
distfiles="${_eula} ${_disttarball}"
checksum="${_eulacksum} ${_distcksum}"
noextract=yes
build_style=custom-install
short_desc="Adobe Flash Player plugin"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 This is the Adobe Flash Player plugin for Netscape compatible browsers."

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run libX11
Add_dependency run libXext
Add_dependency run libXt
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run gdk-pixbuf
Add_dependency run gtk+
Add_dependency run atk
Add_dependency run pango
Add_dependency run cairo
Add_dependency run glib
Add_dependency run nss
Add_dependency run nspr
Add_dependency run libcurl

Add_dependency build libXext-devel
Add_dependency build libXt-devel
Add_dependency build gtk+-devel
Add_dependency build nss-devel
Add_dependency build libcurl-devel

do_install()
{
	tar xfz "${XBPS_SRCDISTDIR}/$(basename ${_disttarball})"
	if [ "${xbps_machine}" = "x86_64" ]; then
		vinstall libflashplayer.so 755 usr/lib/mozilla/plugins
	else
		vinstall install_flash_player_10_linux/libflashplayer.so 755 \
			usr/lib/mozilla/plugins
	fi
	vinstall "${XBPS_SRCDISTDIR}/$(basename ${_eula})" 644 \
		usr/share/doc/${pkgname}
}
