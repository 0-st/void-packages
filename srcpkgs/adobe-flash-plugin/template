# Template file for 'adobe-flash-plugin'
pkgname=adobe-flash-plugin
version=10.1beta
revision=2
# The EULA file
_eula="http://www.adobe.com/products/eulas/pdfs/Reader_Player_WWEULA-Combined-20060724_1430.pdf"
_eulacksum=986c3ddacfee18946fbef7b76485922f8f36e61f790776ce82a87afff3008427
if [ "$xbps_machine" = "x86_64" ]; then
	# FIXME: not yet updated, update ${_disttarball} and add missing
	# ${_distcksum} if fixing for x86_64.
	_disttarball="http://download.macromedia.com/pub/labs/flashplayer10"
	_disttarball="${_disttarball}/libflashplayer-${version}.linux-x86_64.so.tar.gz"
else
	_disttarball="http://download.macromedia.com/pub/labs/flashplayer10"
	_disttarball="${_disttarball}/flashplayer10_1_p1_linux_111709.tar.gz"
	_distcksum="b63cf3b98370c4ead94ad9ce81697c4f288bddd29118e47455f36446b3239b70"
fi
distfiles="${_eula} ${_disttarball}"
checksum="${_eulacksum} ${_distcksum}"
noextract=yes
build_style=custom-install
short_desc="Adobe Flash Player plugin"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 This is the Adobe Flash Player plugin for Netscape compatible browsers."

# Direct requirements as per objdump -p.
Add_dependency run  glibc
Add_dependency run  libstdc++
Add_dependency full libX11
Add_dependency full libXext
Add_dependency full libXt
Add_dependency full freetype
Add_dependency full fontconfig
Add_dependency full gtk+
Add_dependency full atk
Add_dependency full pango
Add_dependency full glib
Add_dependency full nspr
Add_dependency full nss
Add_dependency full curl-libs

do_install()
{
	cd ${wrksrc} || retuyrn 1
	install -d ${DESTDIR}/usr/lib/mozilla/plugins \
		   ${DESTDIR}/usr/share/doc/${pkgname} || return 1
	tar xfz "${XBPS_SRCDISTDIR}/$(basename ${_disttarball})" || return 1
	install -m755 install_flash_player_10_linux/libflashplayer.so \
		${DESTDIR}/usr/lib/mozilla/plugins || return 1
	install -m644 "${XBPS_SRCDISTDIR}/$(basename ${_eula})" \
		${DESTDIR}/usr/share/doc/${pkgname} || return 1
}
