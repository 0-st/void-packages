# Template file for 'adobe-flash-plugin'
pkgname=adobe-flash-plugin
version=11.0.1.152
revision=1
# The EULA file
_eula="http://www.adobe.com/products/eulas/pdfs/PlatformClients_PC_WWEULA_Combined_20100108_1657.pdf"
_eulacksum=3cb0a5f4576be735abcff7189ed18eda17c70b762c3a78a3379b6f44395fbc10
if [ "$xbps_machine" = "x86_64" ]; then
	# There is no x86_64 version for 10.1beta yet.
	_disttarball="http://fpdownload.macromedia.com/get/flashplayer/current/install_flash_player_11_linux.x86_64.tar.gz"
	_distcksum=5756a4ac9811e0362da2b0c208a458b417883e9f9c3773c70e61c935609b64dc
else
	_disttarball="http://fpdownload.macromedia.com/get/flashplayer/current/install_flash_player_11_linux.i386.tar.gz"
	_distcksum=3532ee49eda0845597084a805e11985f9fd9c5f7b5b72f592ceb18529da918c1
fi
distfiles="${_eula} ${_disttarball}"
checksum="${_eulacksum} ${_distcksum}"
noextract=yes
build_style=custom-install
short_desc="Adobe Flash Player plugin"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 This is the Adobe Flash Player plugin for Netscape compatible browsers."

gtk_iconcache_dirs="/usr/share/icons/hicolor"

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run libX11
Add_dependency run libXext
Add_dependency run libXt
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run gdk-pixbuf
Add_dependency run gtk+
Add_dependency run atk
Add_dependency run pango
Add_dependency run cairo
Add_dependency run glib
Add_dependency run nss
Add_dependency run nspr
Add_dependency run libcurl

Add_dependency run hicolor-icon-theme
Add_dependency run desktop-file-utils

Add_dependency build libXext-devel
Add_dependency build libXt-devel
Add_dependency build gtk+-devel
Add_dependency build nss-devel
Add_dependency build libcurl-devel

do_install()
{
	tar xfz "${XBPS_SRCDISTDIR}/$(basename ${_disttarball})"

	vinstall libflashplayer.so 755 usr/lib/mozilla/plugins
	#vinstall usr/lib/kde4/kcm_adobe_flash_player.so 755 usr/lib/kde4
	vinstall usr/bin/flash-player-properties 755 usr/bin
	for i in 16x16 22x22 24x24 32x32 48x48; do
		vinstall usr/share/icons/hicolor/${i}/apps/flash-player-properties.png \
		644 usr/share/icons/hicolor/${i}/apps
	done
	vinstall usr/share/applications/flash-player-properties.desktop 644 \
		usr/share/applications
	vinstall usr/share/kde4/services/kcm_adobe_flash_player.desktop 644 \
		usr/share/kde4/services
	vinstall "${XBPS_SRCDISTDIR}/$(basename ${_eula})" 644 \
		usr/share/licenses/${pkgname} LICENSE.pdf
}
