# Template file for 'ConsoleKit'
pkgname=ConsoleKit
version=0.4.1
distfiles="http://www.freedesktop.org/software/$pkgname/dist/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-docbook-docs --enable-pam-module
 --libexecdir=/usr/lib/ConsoleKit --localstatedir=/var"
short_desc="Framework for defining and tracking users, login sessions and seats"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=f032adc6146d745034315054c5822a7a09f30e20a40d6e802221fa977354403e
long_desc="
 ConsoleKit is a framework for keeping track of the various users, sessions,
 and seats present on a system. It provides a mechanism for software to react
 to changes of any of these items or of any of the metadata associated with
 them."

conf_files="/etc/dbus-1/system.d/ConsoleKit.conf
 /etc/ConsoleKit/seats.d/00-primary.seat"

subpackages="$pkgname-devel $pkgname-x11"
Add_dependency full polkit
Add_dependency full zlib
Add_dependency build libX11
Add_dependency build pkg-config
Add_dependency build xmlto

post_install()
{
	install -d ${DESTDIR}/usr/lib/ConsoleKit/run-session.d
	install -m755 ${FILESDIR}/pam-foreground-compat.ck \
		${DESTDIR}/usr/lib/ConsoleKit/run-session.d
	install -d ${DESTDIR}/etc/ConsoleKit/run-seat.d
	install -d ${DESTDIR}/etc/ConsoleKit/run-session.d
}
