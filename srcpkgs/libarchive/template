# Template file for 'libarchive'
pkgname=libarchive
version=3.0.4
revision=2
subpackages="bsdtar bsdcpio $pkgname-devel"
build_style=gnu-configure
configure_args="--without-xml2 --without-nettle"
makedepends="acl-devel openssl-devel liblzma-devel expat-devel"
short_desc="Library to read/write several different streaming archive formats"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://libarchive.github.com/"
license="BSD"
distfiles="https://github.com/downloads/libarchive/libarchive/libarchive-$version.tar.gz"
checksum=76e8d7c7b100ec4071e48c1b7d3f3ea1d22b39db3e45b7189f75b5ff4df90fac

if [ -n "${XBPS_CROSS_TRIPLET}" ]; then
	makedepends="automake perl"
fi
crossmakedepends="zlib-devel bzip2-devel acl-devel openssl-devel liblzma-devel expat-devel"

pre_configure() {
	./build/autogen.sh
}

pre_build() {
	rm -f /usr/${XBPS_CROSS_TRIPLET}/lib/*.la
}
