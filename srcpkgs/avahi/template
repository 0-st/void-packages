# Template file for 'avahi'
pkgname=avahi
version=0.6.29
distfiles="http://www.avahi.org/download/avahi-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-qt3 --disable-qt4 --disable-mono --disable-monodoc
--disable-doxygen-doc --enable-compat-libdns_sd --enable-compat-howl
--with-xml=expat --with-avahi-user=avahi --with-avahi-group=avahi
--with-avahi-priv-access-group=netdev --with-autoipd-user=avahi
--with-autoipd-group=avahi --with-distro=gentoo --disable-xmltoman
--disable-dbm --localstatedir=/var"
short_desc="Multicast DNS Service Discovery"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=4eb1a6bdc93f1b245fc1b26ff6a79f5f958c1135c04bff60d36d374d98cc14d8
long_desc="
 Avahi is a fully LGPL framework for Multicast DNS Service Discovery.
 It allows programs to publish and discover services and hosts running on a
 local network with no specific configuration. For example you can plug into
 a network and instantly find printers to print to, files to look at and
 people to talk to."

# Create avahi and netdev system accounts.
system_accounts="avahi netdev"
openrc_services="avahi-daemon default true avahi-dnsconfd default true"
conf_files="/etc/avahi/avahi-daemon.conf /etc/avahi/hosts.conf"

subpackages="$pkgname-autoipd $pkgname-discover $pkgname-compat-libs"
subpackages="$subpackages $pkgname-compat-libs-devel $pkgname-libs"
subpackages="$subpackages $pkgname-libs-devel $pkgname-glib-libs"
subpackages="$subpackages $pkgname-glib-libs-devel $pkgname-ui-libs"
subpackages="$subpackages $pkgname-ui-libs-gtk3"
subpackages="$subpackages $pkgname-ui-libs-devel $pkgname-utils"
subpackages="$subpackages $pkgname-ui-utils $pkgname-python-utils"
subpackages="$subpackages $pkgname-python"

Add_dependency run glibc
Add_dependency run dbus
Add_dependency run expat
Add_dependency run libcap
Add_dependency run libdaemon
Add_dependency run avahi-libs
Add_dependency run libssp
Add_dependency run dbus-libs
Add_dependency build pkg-config
Add_dependency build libssp-devel
Add_dependency build dbus-devel
Add_dependency build libcap-devel
Add_dependency build libdaemon-devel
Add_dependency build gdbm-devel
Add_dependency build glib-devel
Add_dependency build expat-devel
Add_dependency build pygtk
Add_dependency build dbus-python
Add_dependency build libglade-devel
Add_dependency build intltool
