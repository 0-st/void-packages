# Template file for 'avahi'
pkgname=avahi
version=0.6.30
revision=5
homepage="http://www.avahi.org"
distfiles="$homepage/download/avahi-$version.tar.gz"
build_style=gnu-configure
configure_args="--disable-qt3 --disable-qt4 --disable-mono --disable-monodoc
--disable-doxygen-doc --enable-compat-libdns_sd --enable-compat-howl
--with-xml=expat --with-avahi-user=avahi --with-avahi-group=avahi
--with-avahi-priv-access-group=netdev --with-autoipd-user=avahi
--with-autoipd-group=avahi --with-distro=gentoo --disable-xmltoman
--disable-dbm
--with-systemdsystemunitdir=/lib/systemd/system"
short_desc="Multicast DNS Service Discovery"
maintainer="Juan RP <xtraeme@gmail.com>"
license="LGPL-2.1"
checksum=f9e4316c2339d0020726edd846d01bee0c39980906db0c247479e5807457ff1f
long_desc="
 Avahi is a fully LGPL framework for Multicast DNS Service Discovery.
 It allows programs to publish and discover services and hosts running on a
 local network with no specific configuration. For example you can plug into
 a network and instantly find printers to print to, files to look at and
 people to talk to."

# Create avahi and netdev system accounts.
system_accounts="avahi netdev"
systemd_services="avahi-daemon.service on avahi-dnsconfd.service on"
conf_files="/etc/avahi/avahi-daemon.conf /etc/avahi/hosts.conf"

subpackages="$pkgname-autoipd $pkgname-discover $pkgname-compat-libs"
subpackages="$subpackages $pkgname-compat-libs-devel $pkgname-libs"
subpackages="$subpackages $pkgname-libs-devel $pkgname-glib-libs"
subpackages="$subpackages $pkgname-glib-libs-devel $pkgname-ui-libs"
subpackages="$subpackages $pkgname-ui-libs-gtk3"
subpackages="$subpackages $pkgname-ui-libs-devel $pkgname-utils"
subpackages="$subpackages $pkgname-ui-utils $pkgname-python-utils"
subpackages="$subpackages $pkgname-python"

Add_dependency run dbus

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libssp-devel
Add_dependency build dbus-devel
Add_dependency build libcap-devel
Add_dependency build libdaemon-devel
Add_dependency build gdbm-devel
Add_dependency build expat-devel
Add_dependency build pygtk-devel
Add_dependency build dbus-python
Add_dependency build gtk+3-devel
Add_dependency build gobject-introspection

post_install()
{
	rm -rf ${DESTDIR}/etc/init.d
}
