# Template file for 'ibus'
pkgname=ibus
version=1.4.2
revision=1
subpackages="ibus-devel"
build_style=gnu-configure
configure_args="--with-gconf-schema-file-dir=/usr/share/gconf/schemas
--enable-gtk3 --disable-python --disable-schemas-compile --enable-memconf
--disable-schemas-install --disable-dconf --enable-gconf"
makedepends="pkg-config intltool GConf-devel librsvg-devel
gobject-introspection gtk+-devel gtk+3-devel"
fulldepends="iso-codes dbus-x11"
short_desc="Intelligent Input Bus for Linux / Unix OS"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://ibus.googlecode.com"
license="LGPL-2.1"
distfiles="http://ibus.googlecode.com/files/ibus-${version}.tar.gz"
checksum=2418d9960d177c0ce7d3dc5ef8ab75cfc00e30f5e2c730b7d82f4f22666a04d7
long_desc="
 IBus means Intelligent Input Bus. It is an open source input framework
 for Linux/Unix OS."

triggers="gtk-immodules gtk3-immodules"
gconf_schemas="ibus.schemas"

post_install() {
	vmkdir etc/xdg/autostart
	ln -sf /usr/share/applications/ibus.desktop \
		${DESTDIR}/etc/xdg/autostart/ibus.desktop

	# Register gconf schema.
        mv ${DESTDIR}/usr/share/gconf/schemas/*.schemas ${wrksrc}
        gconf-merge-schema ${DESTDIR}/usr/share/gconf/schemas/${gconf_schemas} \
                --domain ${pkgname} ${wrksrc}/*.schemas
}
