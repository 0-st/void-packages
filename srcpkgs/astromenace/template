# Template file for 'astromenace'
pkgname=astromenace
version=1.3.2
revision=1
wrksrc=AstroMenace
build_style=cmake
hostmakedepends="cmake pkg-config"
makedepends="SDL-devel libopenal-devel freealut-devel libvorbis-devel
 fontconfig-devel freetype-devel libXinerama-devel"
depends="astromenace-data>=${version}_${revision}"
nocross=yes
short_desc="Hardcore 3D space shooter"
maintainer="Jürgen Buchmüller <pullmoll@t-online.de>"
license="GPL-3 OFL-1.1 CC-BY-SA-3.0"
homepage="http://www.viewizard.com/"
distfiles="${SOURCEFORGE_SITE}/openastromenace/${version}/${pkgname}-src-${version}.tar.bz2"
checksum=9b775df2b157565b97aca008dd879b867cd3377c07b829cee6b5342639357fe6

do_install() {
	vbin build/AstroMenace ${pkgname}
	vdoc ReadMe.txt README
	vlicense License.txt LICENSE
	for size in 64 128; do
		vinstall ${wrksrc}/${pkgname}_${size}.png 644 \
			usr/share/icons/hicolor/${size}x${size}/apps ${pkgname}.png
	done
	vinstall ${FILESDIR}/${pkgname}.desktop 644 usr/share/applications
	build/AstroMenace --pack --rawdata=RAW_VFS_DATA
	vinstall build/gamedata.vfs 644 usr/share/${pkgname}
}

astromenace-data_package() {
	short_desc+=" - data file"
	noarch="yes"
	pkg_install() {
		vmove usr/share/astromenace
	}
}
