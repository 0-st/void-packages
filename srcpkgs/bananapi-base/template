# Template file for 'bananapi-base'
# Based on odroid-u2-base
pkgname=bananapi-base
version=1.0
revision=1
build_style=meta
homepage="http://www.voidlinux.eu"
short_desc="Void Linux Banana Pi platform package"
maintainer="necrophcodr <necrophcodr@necrophcodr.me>"
license="Public Domain"

only_for_archs="armv7l"
depends="virtual?ntp-daemon sun7i-kernel bananapi-uboot"
hostmakedepends="sunxi-tools"

do_install() {
	# Set proper perms to some devices.
	vmkdir usr/lib/udev/rules.d
	echo 'KERNEL=="disp|cedar_dev|mali|ump", MODE="0660", GROUP="video"' > ${DESTDIR}/usr/lib/udev/rules.d/50-bpi-video.rules

	# Certain files in `files` directory *NEED* to be installed.
	# uEnv.txt: The boot configuration file, in pure text for readability.
	# script.fex: Pure text board configuration, compiled to script.bin.
	vmkdir boot
	cp ${FILESDIR}/uEnv.txt ${DESTDIR}/boot/
	fexc ${FILESDIR}/script.fex ${DESTDIR}/boot/script.bin
}
