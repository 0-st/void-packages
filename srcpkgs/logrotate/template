# Template file for 'logrotate'
pkgname=logrotate
version=3.8.7
revision=1
makedepends="popt-devel"
conf_files="/etc/logrotate.conf"
short_desc="Log file rotation and periodic maintenance"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="https://fedorahosted.org/logrotate/"
license="GPL-2"
distfiles="https://fedorahosted.org/releases/l/o/$pkgname/${pkgname}-${version}.tar.gz"
checksum=f6ba691f40e30e640efa2752c1f9499a3f9738257660994de70a45fe00d12b64

do_build() {
	sed -i "s|CFLAGS = -Wall|CFLAGS += -Wall|" Makefile
	sed -i 's|$(BASEDIR)/man|$(BASEDIR)/share/man|' Makefile
	sed -i "s|/bin/\(g.*zip\)|/usr/bin/\1|g" config.h
	make CPP=$CC ${makejobs}
}

do_install() {
	make PREFIX=${DESTDIR} install

	vconf ${FILESDIR}/logrotate.conf
	vinstall ${FILESDIR}/logrotate.cron-daily 744 etc/cron.daily logrotate
}
