# Template file for 'redshift'
pkgname=redshift
version=1.10
revision=1
build_style=gnu-configure
hostmakedepends="pkg-config automake libtool gettext-devel git intltool"
configure_args="--enable-gui $(vopt_if geoclue --enable-geoclue)"
makedepends="libXxf86vm-devel $(vopt_if geoclue geoclue-devel) $(vopt_if geoclue GConf-devel) python3.4 pygtk-devel python-xdg"
short_desc="Adjusts the color temperature of your screen to your surroundings"
maintainer="Juan RP <xtraeme@gmail.com>"
license="GPL-3"
homepage="http://jonls.dk/redshift/"

do_fetch() {
	git clone -b v${version} git://github.com/jonls/redshift.git redshift-${version}
}

# Package build options
build_options="geoclue"

pre_configure() {
	./bootstrap
}
redshift-gtk_package() {
	depends="python3.4 pygtk python-xdg hicolor-icon-theme desktop-file-utils ${sourcepkg}>=${version}_${revision}"
	pycompile_module="redshift_gtk"
	short_desc+=" - GTK+ UI"
	pkg_install() {
		vmove usr/bin/redshift-gtk
		vmove usr/lib
		vmove usr/share/applications
		vmove usr/share/icons
	}
}
