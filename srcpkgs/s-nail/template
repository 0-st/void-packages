# Template file for 's-nail'
pkgname=s-nail
version=14.4.5
_version="14_4_5"
revision=1
makedepends="openssl-devel"
short_desc="Mail processing system with a command syntax reminiscent of ed"
maintainer="Ypnose <linuxienATlegtuxDOTorg>"
license="BSD"
homepage="http://s-nail.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-${_version}.tar.gz"
checksum=b4a90a1e32141fbf3ab528f0d8a3e25e12103aa9104e3c6aa177b8730c69c66c

do_build() {
	# rename s-nail to mail
	sed 's/s-nail/mail/g' -i cc-test.sh
	make CC=$CC PREFIX=/usr SYSCONFDIR=/etc SID= NAIL=mail BINDIR=/usr/bin \
		MANDIR=/usr/share/man MAILSPOOL=/var/spool/mail XPAGER=less config
	make CC=$CC ${makejobs} build
}

do_install() {
	make DESTDIR=$DESTDIR packager-install
	vinstall COPYING 644 usr/share/licenses/${pkgname}
}

s-nail_package() {
	conf_files="/etc/mail.rc"
	provides="mail-${version}"
	replaces="mail>=0"
	pkg_install() {
		vmove all
	}
}
