# Template file for 's-nail'
pkgname=s-nail
version=14.5
_version="14_5"
revision=1
makedepends="openssl-devel"
short_desc="Mail processing system with a command syntax reminiscent of ed"
maintainer="Ypnose <linuxienATlegtuxDOTorg>"
license="BSD"
homepage="http://s-nail.sourceforge.net/"
distfiles="${SOURCEFORGE_SITE}/${pkgname}/${pkgname}-${_version}.tar.gz"
checksum=f87eec31e2f57335afc812b44581d36a7a364258410309e22cb75a20fa267495

do_build() {
	# rename s-nail to mail
	sed 's/s-nail/mail/g' -i cc-test.sh
	make CC=$CC PREFIX=/usr SYSCONFDIR=/etc SID= NAIL=mail BINDIR=/usr/bin \
		MANDIR=/usr/share/man MAILSPOOL=/var/spool/mail XPAGER=less config
	make CC=$CC ${makejobs} build
}

do_install() {
	make DESTDIR=$DESTDIR packager-install
	vinstall COPYING 644 usr/share/licenses/${pkgname}
}

s-nail_package() {
	conf_files="/etc/mail.rc"
	provides="mail-${version}"
	replaces="mail>=0"
	pkg_install() {
		vmove all
	}
}
