# Template file for 'nodejs'
pkgname=nodejs
version=0.10.4
revision=1
wrksrc=node-v${version}
short_desc="Evented I/O for V8 javascript"
maintainer="davehome <davehome@redthumb.info.tm>"
license="MIT"
homepage="http://nodejs.org/"
distfiles="${homepage}/dist/v${version}/node-v${version}.tar.gz"
checksum=1c960d2822447a9e4f7c46b832ff05e86743033c6643d644975af1cbf6a44fb8

makedepends="pkg-config openssl-devel v8-devel zlib-devel"
fulldepends="python"

do_configure() {
	export LD="$CXX"
	./configure --prefix=/usr --openssl-use-sys --shared-v8 --shared-zlib
}

do_build() {
	make LD="$CXX" ${makejobs}
}

do_install() {
	make LD="$CXX" DESTDIR="$DESTDIR" install
	vinstall LICENSE 644 usr/share/licenses/${pkgname}
}
