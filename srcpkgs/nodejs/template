# Template file for 'nodejs'
pkgname=nodejs
version=0.8.0
homepage="http://nodejs.org/"
distfiles="${homepage}/dist/v${version}/node-v${version}.tar.gz"
makedepends="pkg-config openssl-devel v8-devel zlib-devel"
fulldepends="python"
nostrip=yes
revision=2
short_desc="Evented I/O for V8 javascript"
maintainer="davehome <davehome@redthumb.info.tm>"
license="MIT"
checksum=ecafca018b5109a28537633d0433d513f68b1bae7191a1821e8eaa84ccf128ee
long_desc="
 Node.js is a software system designed for writing highly-scalable internet
 applications, notably web servers. Programs are written in JavaScript, using
 event-driven, asynchronous I/O to minimize overhead and maximize scalability.
 
 Node.js consists of Google's V8 JavaScript engine plus several built-in
 libraries.
 
 Node.js was created by Ryan Dahl starting in 2009, and its growth is
 sponsored by Joyent, his employer.
 
 Similar environments written in other programming languages include Twisted
 for Python, Perl Object Environment for Perl, libevent for C and EventMachine
 for Ruby. Unlike most JavaScript, it is not executed in a web browser, but is
 instead a form of server-side JavaScript.
 
 Node.js implements some CommonJS specifications. It provides a REPL
 environment for interactive testing."

subpackages="${pkgname}-devel ${pkgname}-docs"

wrksrc=node-v${version}

do_configure()
{
	./configure --prefix=/usr --openssl-use-sys --shared-v8 --shared-zlib
}

do_build()
{
	make ${makejobs}
}

do_install()
{
	make ${makejobs} DESTDIR=$DESTDIR install
	vinstall LICENSE 644 usr/share/licenses/${pkgname}
}
