# Template file for 'nodejs'
pkgname=nodejs
version=0.6.6
homepage="http://nodejs.org/"
distfiles="${homepage}/dist/v${version}/node-v${version}.tar.gz"
revision=1
short_desc="Evented I/O for V8 javascript"
maintainer="davehome <davehome@redthumb.info.tm>"
license="MIT"
checksum=7abea518b1b63fd669c9ca436bf33d0bb0b09b252f06d700ccbd290fe5222102
long_desc="
 Node.js is a software system designed for writing highly-scalable internet
 applications, notably web servers. Programs are written in JavaScript, using
 event-driven, asynchronous I/O to minimize overhead and maximize scalability.
 
 Node.js consists of Google's V8 JavaScript engine plus several built-in
 libraries.
 
 Node.js was created by Ryan Dahl starting in 2009, and its growth is
 sponsored by Joyent, his employer.
 
 Similar environments written in other programming languages include Twisted
 for Python, Perl Object Environment for Perl, libevent for C and EventMachine
 for Ruby. Unlike most JavaScript, it is not executed in a web browser, but is
 instead a form of server-side JavaScript.
 
 Node.js implements some CommonJS specifications. It provides a REPL
 environment for interactive testing."

subpackages="${pkgname}-devel ${pkgname}-docs"

wrksrc=node-v${version}

Add_dependency build pkg-config
Add_dependency build openssl-devel
Add_dependency build v8-devel
Add_dependency build zlib-devel

Add_dependency full python

do_configure()
{
	./configure --prefix=/usr --shared-v8 --shared-zlib
}

do_build()
{
	make ${makejobs}
}

do_install()
{
	make ${makejobs} DESTDIR=$DESTDIR install
	vinstall LICENSE 644 usr/share/licenses/${pkgname}
}
