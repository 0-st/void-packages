# Template file for 'udisks'
pkgname=udisks
version=1.0.3
revision=1
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--disable-static --localstatedir=/var --enable-lvm2"
short_desc="Disk Management Service"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.freedesktop.org/wiki/Software/udisks"
license="GPL-2"
checksum=d95bceb52a70c727291b934c4c05774899a0074927c8138a219b81a784de8a4b
long_desc="
 The udisks project provides:

    * a storage daemon that implements well-defined D-Bus interfaces that
      can be used to query and manipulate storage devices.
    * a command-line tool, udisks, that can be used to query and use the daemon 

 The actions that a user can perform using udisks are restricted using
 PolicyKit."

keep_empty_dirs=yes

Add_dependency run glibc
Add_dependency run glib
Add_dependency run device-mapper
Add_dependency run libudev
Add_dependency run libparted
Add_dependency run libatasmart
Add_dependency run polkit
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run libgudev
Add_dependency run libsgutils
Add_dependency run liblvm2app
Add_dependency run udev

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build libxslt
Add_dependency build docbook-xsl
Add_dependency build liblvm2app-devel
Add_dependency build device-mapper-devel
Add_dependency build libparted-devel
Add_dependency build libatasmart-devel
Add_dependency build polkit-devel
Add_dependency build dbus-glib-devel
Add_dependency build libgudev-devel
Add_dependency build sg3_utils-devel

post_install()
{
	# Fix location for bash completion stuff.
	vmkdir etc/bash_completion.d
	mv ${DESTDIR}/etc/profile.d/*.sh ${DESTDIR}/etc/bash_completion.d
	chmod 644 ${DESTDIR}/etc/bash_completion.d/*.sh
	rmdir ${DESTDIR}/etc/profile.d

	# Fix location of pkg-config files.
	vmkdir usr/lib
	mv ${DESTDIR}/usr/share/pkgconfig ${DESTDIR}/usr/lib
	rm -rf ${DESTDIR}/var/run
}
