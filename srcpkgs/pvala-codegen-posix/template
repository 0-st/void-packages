# Template file for 'pvala-codegen-posix'
pkgname=pvala-codegen-posix
version=20130929
revision=2
build_style=gnu-configure
_common_dir="/usr/libexec/vala"
configure_args="--prefix=${_common_dir} --bindir=${_common_dir}
--libdir=${_common_dir}"
hostmakedepends="autoconf automake libtool pkg-config git pvala"
makedepends="libglib-devel pvala-devel"
short_desc="Posix profile plugin for pvala"
maintainer="davehome <davehome@redthumb.info.tm"
homepage="https://gitorious.org/ideas/vala-codegen-posix"
license="LGPL-2.1"
long_desc="
 The return of the POSIX profile for Vala (only works with pvala package)."

do_fetch() {
	local url="git://gitorious.org/ideas/vala-codegen-posix.git"
	local _patch="${FILESDIR}/vala-codegen-posix.patch"
	msg_normal "Fetching source from $url ...\n"
	git clone ${url} ${pkgname}-${version}
	msg_normal "Applying ${_patch} ...\n"
	cd "${pkgname}-${version}" && git apply ${_patch}
}

pre_configure() {
	./autogen.sh
}

post_install() {
	local _file="posix-types.vapi"
	vinstall ${wrksrc}/vapi/${_file} 644 usr/share/vala/vapi ${_file}
}

pvala-codegen-posix_package() {
	depends="pvala>=0"
	pkg_install() {
		vmove all
	}
}
