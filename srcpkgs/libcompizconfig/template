# Template file for 'libcompizconfig'
pkgname=libcompizconfig
version=0.9.2
distfiles="http://releases.compiz.org/$version/$pkgname-$version.tar.bz2"
build_style=custom-install
short_desc="Compiz configuration system library"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=03cd57ee42a11ba0ade4e88a487fa6b9ce7f5e825e2d7e7a40cef4f7f803c2b3
long_desc="
 Compiz is a compositing window manager that uses 3D graphics acceleration
 via OpenGL. It provides various new graphical effects and features on
 any desktop environment, including Gnome and KDE.

 This package contains a library for the compiz configuration backend."

subpackages="$pkgname-devel"
gconf_schemas="compiz-ccp.schemas"

Add_dependency run libgcc
Add_dependency run glibc
Add_dependency run libstdc++
Add_dependency run libX11
Add_dependency run libxml2
Add_dependency run compiz-core

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build cmake
Add_dependency build libstdc++-devel
Add_dependency build libX11-devel
Add_dependency build libxml2-devel
Add_dependency build compiz-core-devel

Add_dependency full GConf

do_build()
{
	mkdir -p ${wrksrc}/build && cd ${wrksrc}/build && \
	cmake	-DCMAKE_BUILD_TYPE=Release \
		-DCMAKE_INSTALL_PREFIX=/usr \
		-DCOMPIZ_DISABLE_SCHEMAS_INSTALL=yes .. && \
	make ${makejobs} || return 1
}

do_install()
{
	cd ${wrksrc}/build && \
	make DESTDIR=${DESTDIR} install && \
	make DESTDIR=${DESTDIR} findcompizconfig_install || return 1
}
