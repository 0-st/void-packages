# Template file for 'gnome-bluetooth'
pkgname=gnome-bluetooth
version=3.2.0
distfiles="${GNOME_SITE}/$pkgname/3.2/$pkgname-$version.tar.xz"
build_style=gnu_configure
configure_args="--disable-desktop-update --disable-schemas-compile
--localstatedir=/var --disable-icon-update"
short_desc="The GNOME Bluetooth Subsystem"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://live.gnome.org/GnomeBluetooth"
license="GPL, LGPL"
checksum=7f8f35baf4a785a4d966257c31ce6ee8eb4fe21bc83b26cadc55c244f583bbca
long_desc="
 This package contains tools for managing and manipulating Bluetooth devices
 using the GNOME desktop.

 bluetooth-applet provides an agent to ask for PIN and managing pairing with
 devices, together with bluetooth-properties.

 bluetooth-sendto is also included for sending files to Bluetooth devices
 via OBEX."

gtk_iconcache_dirs="/usr/share/icons/hicolor"
subpackages="$pkgname-devel"

Add_dependency run glibc
Add_dependency run gtk+3
Add_dependency run atk
Add_dependency run pango
Add_dependency run gdk-pixbuf
Add_dependency run cairo
Add_dependency run freetype
Add_dependency run fontconfig
Add_dependency run glib
Add_dependency run dbus-glib
Add_dependency run dbus-libs
Add_dependency run libnotify

Add_dependency run dconf
Add_dependency run bluez		">=0"
Add_dependency run gvfs
Add_dependency run obexd-client		">=0"
Add_dependency run hicolor-icon-theme
Add_dependency run desktop-file-utils

Add_dependency build pkg-config
Add_dependency build intltool
Add_dependency build gnome-doc-utils
Add_dependency build gobject-introspection
Add_dependency build nautilus-sendto-devel

post_install()
{
	vinstall ${FILESDIR}/61-gnome-bluetooth-rfkill.rules 644 lib/udev/rules.d
	install -d ${DESTDIR}/etc/ld.so.conf.d
	echo "/usr/lib/gnome-bluetooth" > \
		${DESTDIR}/etc/ld.so.conf.d/${pkgname}.conf
}

post_stow()
{
	msg_normal "Updating ld.so(8) cache for ${pkgname}...\n"
	ldconfig -f /etc/ld.so.conf.d/${pkgname}.conf
}
