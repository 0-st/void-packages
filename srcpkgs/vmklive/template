# Template file for 'vmklive'
pkgname=vmklive
version=0.9.0
replaces="xbps-mklive>=0 vanilla-mklive>=0"
noextract=yes
noarch=yes
fulldepends="dracut>=018_2 cdrtools squashfs-tools syslinux"
short_desc="Void Linux live image maker"
maintainer="Juan RP <xtraeme@gmail.com>"
license="Public domain"
homepage="http://code.google.com/p/xbps"
long_desc="
 $pkgname is a simple shell script to build a bootable live image
 for void linux."

do_build() {
	sed "s|@@MKLIVE_VERSION@@|${version}|g" \
		${FILESDIR}/mklive.sh.in > ${pkgname}.sh
}

do_install() {
	vinstall ${pkgname}.sh 755 usr/sbin vmklive
	# Install dracut module.
	vinstall ${FILESDIR}/dracut-module.sh 755 \
		usr/lib/dracut/modules.d/01vmklive module-setup.sh
	vinstall ${FILESDIR}/dracut-vmklive-adduser.sh 755 \
		usr/lib/dracut/modules.d/01vmklive vmklive-adduser.sh
}
