# Template build file for 'bzip2'.
pkgname=bzip2
version=1.0.6
distfiles="http://www.bzip.org/$version/$pkgname-$version.tar.gz"
build_style=gnu_makefile
make_build_target="-f Makefile-libbz2_so"
make_install_args="PREFIX=$XBPS_DESTDIR/$pkgname-$version/usr"
short_desc="The bzip2 compression library"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=a2848f34fcd5d6cf47def00461fcb528a0484d8edef8208d6d2e2909dc61d9cd
long_desc="
 bzip2 is a freely available, patent free, high-quality data compressor.
 It typically compresses files to within 10%% to 15%% of the best available
 techniques, whilst being around twice as fast at compression and six times
 faster at decompression.

 bzip2 compresses files using the Burrows-Wheeler block-sorting text
 compression algorithm, and Huffman coding. Compression is generally
 considerably better than that achieved by more conventional LZ77/LZ78-based
 compressors, and approaches the performance of the PPM family of statistical
 compressors.

 The archive file format of bzip2 (.bz2) is incompatible with that of its
 predecessor, bzip (.bz)."

base_chroot=yes
subpackages="bzip2-devel"
Add_dependency run glibc

pre_build()
{
	# Do not overwrite CC!
	for f in Makefile Makefile-libbz2_so; do
		sed -i -e "s|\(CC\)\(=gcc\)|\1?\2|g" \
			${wrksrc}/${f} || return 1
	done
}
