# Template file for 'kernel-libc-headers'
. ${XBPS_SRCPKGDIR}/kernel/common-vars

pkgname=kernel-libc-headers
revision=2
build_style=custom-install
short_desc="The Linux kernel headers for development"
long_desc="
 This package provides the linux kernel headers for use in userspace."

base_chroot=yes
nostrip=yes

do_build()
{
	make headers_check || return 1
}

do_install()
{
	make INSTALL_HDR_PATH=${DESTDIR}/usr headers_install || return 1
	# Install scsi/scsi.h header, required by eject and others.
	install -m644 ${wrksrc}/include/scsi/scsi.h ${DESTDIR}/usr/include/scsi
}

post_install()
{
	# Remove unused files.
	rm -f $(find ${DESTDIR}/usr/include -name .install -or -name ..install.cmd)
}
