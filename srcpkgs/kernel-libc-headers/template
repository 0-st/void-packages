# Template file for 'kernel-libc-headers'
#
pkgname=kernel-libc-headers
version=3.4.4
wrksrc=linux-${version}
homepage="http://www.kernel.org"
distfiles="http://www.kernel.org/pub/linux/kernel/v3.x/linux-${version}.tar.xz"
checksum=dc17ce948b8d7f77d36872b22ea68b5aaad3ac1891bf8c62b4f7550dab3a9050
bootstrap=yes
nostrip=yes
noverifyrdeps=yes
if [ -n "$IN_CHROOT" ]; then
	makedepends="perl"
fi
revision=1
short_desc="The Linux kernel headers for development"
license="GPL-2"
long_desc="
 This package provides the linux kernel headers for use in userspace."

do_build() {
	make mrproper
	make headers_check
}

do_install() {
	make INSTALL_HDR_PATH=${DESTDIR}/usr headers_install
	# Remove unused files.
	rm -f $(find ${DESTDIR}/usr/include -name .install -or -name ..install.cmd)
	# Remove drm headers, use libdrm.
	rm -rf ${DESTDIR}/usr/include/drm
}
