# Template file for 'acpica-utils'
pkgname=acpica-utils
version=20100121
wrksrc=acpica-unix-${version}
revision=2
hostmakedepends="flex"
short_desc="Intel ACPI CA Unix utilities"
homepage="https://www.acpica.org/"
license="GPL-2"
maintainer="Juan RP <xtraeme@gmail.com>"
# Sigh, can't use official URL!
#distfiles="http://acpica.org/downloads/acpica-unix-${version}.tar.gz"
distfiles="http://xbps.nopcode.org/distfiles/acpica-unix-${version}.tar.gz"
checksum=97fdbf6768f26f15ebf6aa106461e10f8e84bfb2766c7f8fe313fcd08e381d2e
long_desc="
 This package provides the ACPICA user-space utilities built upon
 the same kernel code. The ACPI Component Architecture is used for
 managing hardware and events. The following utilities are provided:

    * ASL Compiler/Disassembler
    * ACPI Simulator (AcpiExec)
    * ACPI Table Extractor"

do_build() {
	cd ${wrksrc}/tools/acpiexec
	make
	cp -f acpiexec ${wrksrc}
	make clean

	cd ${wrksrc}
	for _dir_ in compiler tools/acpisrc tools/acpixtract; do
		make -C ${_dir_}
	done
}

do_install() {
	install -d ${DESTDIR}/usr/sbin
	install -m755 ${wrksrc}/acpiexec ${DESTDIR}/usr/sbin
	install -m755 ${wrksrc}/tools/acpisrc/acpisrc ${DESTDIR}/usr/sbin
	install -m755 ${wrksrc}/tools/acpixtract/acpixtract ${DESTDIR}/usr/sbin
	install -m755 ${wrksrc}/compiler/iasl ${DESTDIR}/usr/sbin
}

acpica-utils_package() {
	pkg_install() {
		vmove usr
	}
}
