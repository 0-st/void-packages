# Template build file for 'MesaLib'.
pkgname=MesaLib
version=7.7
revision=1
wrksrc="Mesa-${version}"
distfiles="
ftp://ftp.freedesktop.org/pub/mesa/$version/$pkgname-$version.tar.bz2
ftp://ftp.freedesktop.org/pub/mesa/$version/MesaDemos-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-glx-tls --enable-xcb --with-demos"
short_desc="Graphics library similar to SGI's OpenGL"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum="
6252d7d4190b47f70d0e4ec0edbd5a70f2261c5f6e66859e5fd2572c1df6357a
38dbcce59fcc457b53ff6d4e2d5a400d41c02f093bb1fae141e99e032729ab14"
long_desc="
 MesaLib is a 3-D graphics library with an API which is very similar to
 that of OpenGL*. To the extent that Mesa utilizes the OpenGL command syntax
 or state machine, it is being used with authorization from Silicon Graphics,
 Inc. However, the author makes no claim that Mesa is in any way a
 compatible replacement for OpenGL or associated with Silicon Graphics, Inc."

subpackages="$pkgname-devel glx-utils"
Add_dependency build pkg-config
Add_dependency build glproto
Add_dependency build dri2proto	">=2.1"
Add_dependency build makedepend
Add_dependency full glibc
Add_dependency full expat
Add_dependency full libdrm	">=2.4.15"
Add_dependency full libX11
Add_dependency full libXext
Add_dependency full libXt
Add_dependency full libXmu
Add_dependency full libXi
Add_dependency full libXfixes
Add_dependency full libXdamage
Add_dependency full libXxf86vm
Add_dependency run  libstdc++

post_install()
{
	install -d ${DESTDIR}/usr/bin || return 1
	for f in glxgears glxinfo; do
		install -m755 ${wrksrc}/progs/xdemos/${f} \
			${DESTDIR}/usr/bin || return 1
	done
}
