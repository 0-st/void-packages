# Template build file for 'MesaLib'.
pkgname=MesaLib
version=9.0.2
revision=1
wrksrc="Mesa-${version}"
build_style=gnu-configure
configure_args="--enable-glx-tls --enable-shared-glapi --enable-gallium-g3dvl
 --enable-gles1 --enable-gles2 --enable-openvg --enable-egl --disable-va
 --with-dri-driverdir=/usr/lib/xorg/modules/dri --enable-vdpau --enable-xa
 --enable-gallium-egl --enable-xvmc --enable-osmesa --enable-texture-float
 --with-gallium-drivers=r300,r600,svga,swrast,nouveau --enable-gbm
 --with-dri-drivers=i915,i965,r200,radeon,nouveau,swrast
 --with-egl-platforms=drm,wayland"
short_desc="Graphics library similar to SGI's OpenGL"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.mesa3d.org/"
license="MIT, LGPL-2.1"
distfiles="ftp://ftp.freedesktop.org/pub/mesa/$version/$pkgname-$version.tar.bz2"
checksum=75bf31f26c6e7b5515e610c1005fd1be1f7eeb2c9e6859848dab879c355ad64e

conf_files="/etc/drirc"
depends="mesa-swraster-dri-${version}_${revision}"

makedepends="automake flex pkg-config glproto dri2proto>=2.1 makedepend
 libXext-devel libXxf86vm-devel libXdamage-devel libudev-devel>=183
 libdrm-devel expat-devel libXt-devel talloc-devel libxml2-python
 libvdpau-devel libXvMC-devel>=1.0.6 wayland-devel llvm>=3.2"

subpackages="libgbm libEGL libglapi libGLES libGL libOpenVG libOSMesa
 MesaLib-devel mesa-ati-dri mesa-intel-dri mesa-nouveau-dri mesa-swraster-dri
 mesa-vmwgfx-dri libwayland-egl"

pre_configure() {
	./autogen.sh
}
