# Template build file for 'MesaLib'.
pkgname=MesaLib
version=9.0.1
revision=8
wrksrc="Mesa-${version}"
build_style=gnu-configure
configure_args="--enable-glx-tls --enable-shared-glapi --enable-gallium-g3dvl
 --enable-gles1 --enable-gles2 --enable-openvg --enable-egl --disable-va
 --with-dri-driverdir=/usr/lib/xorg/modules/dri --enable-vdpau --enable-xa
 --enable-gallium-egl --enable-xvmc --enable-osmesa --enable-texture-float
 --with-gallium-drivers=r300,r600,svga,swrast,nouveau
 --with-dri-drivers=i915,i965,r200,radeon,nouveau,swrast --enable-gbm
 --with-egl-platforms=drm,wayland"
short_desc="Graphics library similar to SGI's OpenGL"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.mesa3d.org/"
license="MIT, LGPL-2.1"
distfiles="ftp://ftp.freedesktop.org/pub/mesa/$version/$pkgname-$version.tar.bz2"
checksum=57a7ba83bace3f3a7dc0929fe026ef5f0ad454234ec4ad8a3e0d31650a75db6f

conf_files="/etc/drirc"
depends="mesa-swraster-dri-${version}_${revision}"

makedepends="automake perl flex pkg-config glproto dri2proto>=2.1 makedepend
 libXext-devel libXxf86vm-devel libXdamage-devel libXfixes-devel libxcb-devel
 libudev-devel>=183 libdrm-devel expat-devel libXt-devel talloc-devel
 libxml2-python llvm>=3.2 libvdpau-devel libXvMC-devel>=1.0.6 wayland-devel"

subpackages="libgbm libEGL libglapi libGLES libGL libOpenVG libOSMesa
 MesaLib-devel mesa-ati-dri mesa-intel-dri mesa-nouveau-dri mesa-swraster-dri
 mesa-vmwgfx-dri libwayland-egl"

pre_configure() {
	./autogen.sh
}
