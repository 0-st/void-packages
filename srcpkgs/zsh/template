# Template file for 'zsh'
pkgname=zsh
version=5.0.0
revision=2
build_style=gnu-configure
make_build_args="info"
make_install_args="install.info"
configure_args="--enable-etcdir=/etc/zsh --enable-zshenv=/etc/zsh/zshenv
--enable-zlogin=/etc/zsh/zlogin --enable-zlogout=/etc/zsh/zlogout
--enable-zprofile=/etc/profile --enable-zshrc=/etc/zsh/zshrc
--enable-maildir-support --enable-function-subdirs
--enable-fndir=/usr/share/zsh/functions --with-term-lib=ncursesw
--enable-scriptdir=/usr/share/zsh/scripts --enable-pcre
--enable-multibyte --enable-cap --with-tcsetpgrp"
makedepends="gdbm-devel pcre-devel>=8.30 libcap-devel ncurses-devel"
register_shell="/bin/zsh"
short_desc="Z SHell"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://www.zsh.org"
license="zsh"
distfiles="http://www.zsh.org/pub/zsh-$version.tar.bz2"
checksum=cd014a8e09a3607c68369d1615db96d0fbb7279a125950b32032fd448c44a888
long_desc="
 Zsh is a shell designed for interactive use, although it is also a powerful
 scripting language. Many of the useful features of bash, ksh, and tcsh were
 incorporated into zsh; many original features were added."

pre_configure() {
	# Set correct keymap path
	sed -i 's#/usr/share/keymaps#/usr/share/kbd/keymaps#g' \
		Completion/Unix/Command/_loadkeys

	# Remove unneeded and conflicting completion scripts
	rm -rf Completion/{AIX,BSD,Cygwin,Darwin,Debian,Mandriva,openSUSE,Redhat,Solaris}
	rm -f  Completion/Linux/Command/_{pkgtool,rpmbuild,yast}
	rm -f  Completion/Unix/Command/_osc
}

post_install() {
	vinstall LICENCE 644 usr/share/licenses/zsh
}
