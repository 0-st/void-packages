# Template file for 'weston'.
pkgname=weston
version=1.0.6
revision=1
build_style=gnu-configure
configure_args="--with-cairo-glesv2"
short_desc="Reference implementation of a Wayland compositor"
maintainer="Juan RP <xtraeme@gmail.com>"
homepage="http://wayland.freedesktop.org/"
license="MIT"
distfiles="http://wayland.freedesktop.org/releases/${pkgname}-${version}.tar.xz"
checksum=c833bc4dc8667561d2639b57220541531c039aa9332ce2a7022a3c466eb894f1

# XXX xcb-xkb.pc 
makedepends="pkg-config wayland-devel>=${version} libxkbcommon-devel
 xcb-util-keysyms-devel pixman-devel libXcursor-devel MesaLib-devel>=9.0.1_6
 cairo-devel>=1.12.14_5 mtdev-devel libwebp-devel poppler-glib-devel pam-devel
 systemd-devel librsvg glu-devel"

post_install() {
	vinstall COPYING 644 usr/share/license/$pkgname
	for f in clickdot cliptest dnd editor eventdemo flower image \
		keyboard resizor simple-egl simple-shm smoke view; do
		vinstall clients/$f 755 usr/bin weston-$f
	done
}

weston_package() {
	# cairo built with gles2 option.
	depends="wayland>=${version} cairo>=1.12.14_5"
	pkg_install() {
		vmove usr
	}
}
