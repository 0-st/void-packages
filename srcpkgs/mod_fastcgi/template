# Template file for 'mod_fastcgi'
pkgname=mod_fastcgi
version=2.4.6
distfiles="http://www.fastcgi.com/dist/${pkgname}-${version}.tar.gz"
build_style=gnu-makefile
revision=2
depends="apache"
makedepends="apache-devel"
short_desc="Apache module to support the FastCGI protocol"
homepage="http://www.fastcgi.com/"
license="Custom"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=a5a887eecc8fe13e4cb1cab4d140188a3d2b5e6f337f8a1cce88ca441ddbe689
long_desc="
 This is a FastCGI module for the Apache 2.x web server. FastCGI is an open
 standard for communicating between a web server and a long-running web
 application. CGI scripts supporting FastCGI can be started as a daemon and
 process multiple requests without restarting. This is particularly useful for
 scripts written in languages like Perl, as it saves the cost of recompiling
 the scripts and its loaded modules with each invocation."


pre_build()
{
	mv ${wrksrc}/Makefile.AP2 ${wrksrc}/Makefile
	sed -e "s|/usr/local/apache2|/usr/libexec/httpd|" \
		-e "s|\(top_srcdir.*=\).*|\1 /usr/share/apache-httpd|" \
		-e "s|\(top_builddir.*=\).*|\1 /usr/share/apache-httpd|" \
		-i ${wrksrc}/Makefile
}

post_install()
{
	install -D -m644 ${wrksrc}/docs/LICENSE.TERMS \
		${DESTDIR}/usr/share/licenses/${pkgname}/LICENSE
}
