# Template file for 'cross-arm-linux-gnueabihf-libc-headers'
#
pkgname=cross-arm-linux-gnueabihf-libc-headers
version=3.7.1
revision=2
noarch=yes
wrksrc=linux-${version}
short_desc="The Linux libc headers for arm-linux-gnueabihf target"
license="GPL-2"
homepage="http://www.kernel.org"
distfiles="http://www.kernel.org/pub/linux/kernel/v3.x/linux-${version}.tar.xz"
checksum=e1ca8b8376ebdf797357f5f1734ed6eed3cadc16c32d280a780f150372de7255
if [ -n "$IN_CHROOT" ]; then
	makedepends="perl"
fi

do_build() {
	make mrproper
	make ARCH=arm headers_check
}

do_install() {
	make ARCH=arm INSTALL_HDR_PATH=${DESTDIR}/usr/arm-linux-gnueabihf/usr headers_install
	# Remove unused files.
	rm -f $(find ${DESTDIR}/usr/arm-linux-gnueabihf/usr/include -name .install -or -name ..install.cmd)
	# Remove drm headers, use libdrm.
	rm -rf ${DESTDIR}/usr/arm-linux-gnueabihf/usr/include/drm
}
