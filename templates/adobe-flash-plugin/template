# Template file for 'adobe-flash-plugin'
pkgname=adobe-flash-plugin
version=10.0.32.18
if [ "$xbps_machine" = "x86_64" ]; then
	distfiles="http://download.macromedia.com/pub/labs/flashplayer10"
	distfiles="${distfiles}/libflashplayer-${version}.linux-x86_64.so.tar.gz"
	checksum=fc423a7ffa3e45208274c9b4a6af361e7e06dff1c2d582c9d80253a8b61cd300
else
	distfiles="http://fpdownload.macromedia.com/get/flashplayer"
	distfiles="${distfiles}/current/install_flash_player_10_linux.tar.gz"
	checksum=88aea5d73c5be37328a388630f8b89c256235c4f8337eef15ed523bbe3e5dada
fi
noextract=yes
build_style=custom-install
short_desc="Adobe Flash Player plugin"
maintainer="Juan RP <xtraeme@gmail.com>"
long_desc="
 This is the Adobe Flash Player plugin for Netscape compatible browsers."

# Direct requirements as per objdump -p.
Add_dependency run glibc
Add_dependency run gcc-libstdc++
Add_dependency full libX11
Add_dependency full libXext
Add_dependency full libXt
Add_dependency full freetype
Add_dependency full fontconfig
Add_dependency full gtk+
Add_dependency full atk
Add_dependency full pango
Add_dependency full glib
Add_dependency full nspr
Add_dependency full nss

do_install()
{
	local license="Reader_Player_WWEULA-Combined-20060724_1430.pdf"

	set -e
	( cd ${wrksrc}; \
	  msg_normal "Fetching License..."
	  $XBPS_FETCH_CMD http://www.adobe.com/products/eulas/pdfs/${license} ; \
	  install -d ${DESTDIR}/usr/lib/mozilla/plugins \
		   ${DESTDIR}/usr/share/doc/${pkgname}; \
	  tar xfz "${XBPS_SRCDISTDIR}/$(basename ${distfiles})" \
		-C ${DESTDIR}/usr/lib/mozilla/plugins; \
	  chmod 755 ${DESTDIR}/usr/lib/mozilla/plugins; \
	  mv ${wrksrc}/${license} ${DESTDIR}/usr/share/doc/${pkgname} )
}
