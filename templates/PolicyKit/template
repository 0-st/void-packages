# Template file for 'PolicyKit'
pkgname=PolicyKit
version=0.9
distfiles="http://hal.freedesktop.org/releases/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-polkit-user=policykit --with-polkit-group=policykit
 --disable-static --localstatedir=/var"
short_desc="Authorization Toolkit"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=f40c7c6bec19d7dba2335bddcffd0457494409a0dfce11d888c748dc892e80b7
long_desc="
 PolicyKit is a toolkit for defining and handling authorizations. It is
 used for allowing unprivileged processes to speak to privileged processes."

conf_files="/etc/PolicyKit/PolicyKit.conf
 /etc/dbus-1/system.d/org.freedesktop.PolicyKit.conf"

keep_empty_dirs=yes
subpackages="devel"
Add_dependency full glibc
Add_dependency full dbus
Add_dependency full dbus-glib
Add_dependency full expat
Add_dependency full pam
Add_dependency build intltool
Add_dependency build libxslt
Add_dependency build docbook-xsl

post_install()
{
	mkdir -p ${DESTDIR}/etc/pam.d
	cat >> ${DESTDIR}/etc/pam.d/polkit <<_EOF
auth		requisite	pam_nologin.so
auth		required	pam_env.so
auth		required	pam_unix.so
account		required	pam_unix.so
session		required	pam_limits.so
session		required	pam_unix.so
password	required	pam_unix.so
_EOF
	chmod 644 ${DESTDIR}/etc/pam.d/polkit
}
