# Template file for 'lvm2'
pkgname=lvm2
version=2.02.45
wrksrc=LVM2.${version}
distfiles="ftp://sources.redhat.com/pub/lvm2/LVM2.${version}.tgz"
build_style=gnu_configure
configure_args="--exec-prefix= --disable-selinux"
make_install_args="sbindir=${XBPS_DESTDIR}/$pkgname-$version/sbin
 libdir=$XBPS_DESTDIR/$pkgname-$version/lib"
short_desc="Userland logical volume management tools"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=2ad7490f5747ea8547ddfbf89256549fcdcffb990df2f3cbdea84d985887ecb8
long_desc="
 LVM2 includes all of the support for handling read/write operations on
 physical volumes (hard disks, RAID-Systems, magneto optical, etc.,
 multiple devices (MD), see mdadd(8) or even loop devices, see
 losetup(8)), creating volume groups (kind of virtual disks) from one
 or more physical volumes and creating one or more logical volumes
 (kind of logical partitions) in volume groups."

disable_parallel_build=yes

conf_files="/etc/lvm/lvm.conf"

Add_dependency full glibc
Add_dependency full bash
Add_dependency full readline
Add_dependency full device-mapper

post_install()
{
	install -d ${DESTDIR}/etc/lvm/archive ${DESTDIR}/etc/lvm/backup

	# Remove files provided by device-mapper.
	rm -rf ${DESTDIR}/usr/include ${DESTDIR}/lib
	rm -f ${DESTDIR}/sbin/dmsetup
}
