# Template file for 'initng'
pkgname=initng
version=0.6.10.2
distfiles="http://download.initng.org/initng/v0.6/initng-0.6.10.2.tar.bz2"
build_style=configure
configure_script="cmake"
configure_args="-DINSTALL_AS_INIT=1 -DSERVICE_CACHE=1
 -DSYSCONF_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/etc
 -DSBIN_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/sbin
 -DLIB_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/lib
 -DINCLUDE_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/usr/include
 -DDATA_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/usr/share
 -DBIN_INSTALL_DIR=$XBPS_DESTDIR/$pkgname-$version/bin ."
short_desc="The next generation init system"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=5b823f926b19affe2356278986f26d60113c469b3a35783621ae538d3aec1e44
long_desc="
 Initng is a full replacement of the old and in many ways deprecated
 sysvinit tool. It is designed to significantly increase the booting
 speed of a unix-like operating system by starting processes
 asynchronously."

conf_files="/etc/initng/killall5-ignore"
build_depends="cmake-2.6.2"
run_depends="glibc-2.8"

post_install()
{
	local destdir=$XBPS_DESTDIR/$pkgname-$version

	# Make /sbin/initng -> /sbin/init link.
	cd $destdir/sbin && ln -sf initng init
	# Fix /bin/pidof link.
	rm -v $destdir/bin/pidof
	cd $destdir/bin && ln -sf ../sbin/killalli5 pidof
}
