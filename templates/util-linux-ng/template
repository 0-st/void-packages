# Template file for 'util-linux-ng'
pkgname=util-linux-ng
version=2.14.2
distfiles="http://www.kernel.org/pub/linux/utils/$pkgname/v2.14/$pkgname-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-partx --enable-write
 --infodir=/usr/share/info --mandir=/usr/share/man"
make_install_target="DESTDIR=$XBPS_DESTDIR/$pkgname-$version install"
short_desc="Miscellaneous linux utilities"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=108e63e9a007f6a8c0eff841dd38e0fe3b635c98b35bfac2d89b4b1a1ce0630e
long_desc="
 The util-linux-ng package contains miscellaneous utility programs. Among
 them are utilities for handling file systems, consoles, partitions,
 and messages."

Add_dependency build	e2fsprogs
Add_dependency run	glibc
Add_dependency run	e2fsprogs-libs
Add_dependency run	coreutils
Add_dependency run	ncurses-libs
Add_dependency run	zlib

post_configure()
{
	cd $wrksrc
	sed -e 's@etc/adjtime@var/lib/hwclock/adjtime@g'
		-i $(grep -rl '/etc/adjtime' .)
}

post_install()
{
	# Move logger to /bin.
	install -d -m 755 ${DESTDIR}/bin
	mv ${DESTDIR}/usr/bin/logger ${DESTDIR}/bin
	mkdir -p ${DESTDIR}/var/lib/hwclock
}
