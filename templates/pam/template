# Template file for 'pam'
pkgname=pam
sourcepkg=$pkgname
version=1.0.4
revision=1
wrksrc="Linux-PAM-$version"
distfiles="${KERNEL_SITE}/libs/pam/library/Linux-PAM-$version.tar.bz2"
build_style=gnu_configure
configure_args="--disable-selinux --libdir=/lib --disable-rpath
 --docdir=/usr/share/doc/pam --enable-read-both-confs
 DESTDIR=$XBPS_DESTDIR/$pkgname-$version"
short_desc="A flexible mechanism for authenticating users"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=13136d438f5748d08dcb2227e44e53a3c611351b96e11891052e0c8c2557f3ca
long_desc="
 Linux-PAM provides a flexible mechanism for authenticating users.
 PAM was invented by SUN Microsystems."

keep_dirs="/etc/security"
conf_files="/etc/security/access.conf /etc/security/environment
 /etc/security/group.conf /etc/security/limits.conf
 /etc/security/namespace.conf /etc/security/pam_env.conf
 /etc/security/time.conf"

subpackages="devel"
Add_dependency full glibc
Add_dependency full cracklib
Add_dependency build flex

post_install()
{
	rm -rf ${DESTDIR}/var
	# Fix unix_chkpwd perms.
	chmod 4755 ${DESTDIR}/sbin/unix_chkpwd
}
