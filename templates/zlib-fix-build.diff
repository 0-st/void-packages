--- configure.orig	2008-10-22 16:47:11.902294688 +0200
+++ configure	2008-10-22 16:47:24.958840636 +0200
@@ -169,20 +169,9 @@ SHAREDLIBV=${SHAREDLIBV-"libz$shared_ext
 SHAREDLIBM=${SHAREDLIBM-"libz$shared_ext.$VER1"}
 
 if test $shared -eq 1; then
-  echo Checking for shared library support...
-  # we must test in two steps (cc then ld), required at least on SunOS 4.x
-  if test "`($CC -c $SFLAGS $test.c) 2>&1`" = "" &&
-     test "`($LDSHARED -o $test$shared_ext $test.o) 2>&1`" = ""; then
     CFLAGS="$SFLAGS"
     LIBS="$SHAREDLIBV"
     echo Building shared library $SHAREDLIBV with $CC.
-  elif test -z "$old_cc" -a -z "$old_cflags"; then
-    echo No shared library support.
-    shared=0;
-  else
-    echo 'No shared library support; try without defining CC and CFLAGS'
-    shared=0;
-  fi
 fi
 if test $shared -eq 0; then
   LDSHARED="$CC"
