# Template file for 'device-mapper'
pkgname=device-mapper
version=1.02.31
_lvm_version=2.02.45
wrksrc=LVM2.${_lvm_version}
distfiles="ftp://sources.redhat.com/pub/lvm2/LVM2.${_lvm_version}.tgz"
build_style=gnu_configure
configure_args="--exec-prefix= --disable-selinux"
make_build_args="device-mapper"
make_install_target="sbindir=${XBPS_DESTDIR}/$pkgname-$version/sbin
 libdir=$XBPS_DESTDIR/$pkgname-$version/lib install_device-mapper"
short_desc="Device Mapper userspace library and tools"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=2ad7490f5747ea8547ddfbf89256549fcdcffb990df2f3cbdea84d985887ecb8
long_desc="
 This package contains the supporting userspace utility, dmsetup,
 for the kernel device-mapper and its required library, libdevmapper."

Add_dependency full glibc
Add_dependency full readline

post_install()
{
	# Install static lib and pkgconfig file.
	install -D -m644 $wrksrc/libdm/ioctl/libdevmapper.a \
		${DESTDIR}/usr/lib/libdevmapper.a
	install -D -m644 $wrksrc/libdm/libdevmapper.pc \
		${DESTDIR}/usr/lib/pkgconfig/libdevmapper.pc
}
