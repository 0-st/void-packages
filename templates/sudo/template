# Template build file for 'sudo'.
pkgname=sudo
version=1.7.0
distfiles="http://www.courtesan.com/sudo/dist/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-ignore-dot -with-all-insults --enable-shell-sets-home
 --disable-root-sudo --with-logfac=auth -without-sendmail
 --enable-noargs-shell"
short_desc="Allow others to run commands as root"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=5f7de94287f39c8b3b8d86aed147967e9286f45740412004233858b637391978
long_desc="
 Sudo is a program designed to allow a sysadmin to give limited root
 privileges to users and log root activity. The basic philosophy is to
 give as few privileges as possible but still allow people to get their
 work done."

conf_files="/etc/pam.d/sudo /etc/sudoers"
build_depends="linux-pam-1.0.2"
run_depends="glibc-2.8 $build_depends"

post_install()
{
	local destdir=$XBPS_DESTDIR/$pkgname-$version

	install -d $destdir/etc/pam.d
	cat > $destdir/etc/pam.d/sudo <<_EOF
auth        required        pam_unix.so
account     required        pam_unix.so
session     optional        pam_mail.so     dir=/var/mail standard
session     optional	    pam_xauth.so
session     required        pam_env.so
session     required        pam_unix.so
_EOF
}
