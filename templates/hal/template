# Template file for 'hal'
pkgname=hal
version=0.5.12rc1
revision=2
distfiles="http://hal.freedesktop.org/releases/hal-$version.tar.bz2"
build_style=gnu_configure
configure_args="--enable-man-pages --enable-console-kit --enable-policy-kit
 --enable-acpi-ibm --enable-acpi-toshiba --disable-parted --enable-sonypic
 --with-hal-user=hal --with-hal-group=hal --localstatedir=/var
 --disable-docbook-docs"
short_desc="Hardware Abstraction Layer"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=eeeb438dcc2a58288ed3def8c1d0076ca16f35b54d501c46f96e89da24fe38f4
long_desc="
 HAL is daemon for collecting and maintaining information from several
 sources about the hardware on the system."

conf_files="/etc/dbus-1/system.d/hal.conf
 /etc/hal/fdi/policy/10-keymap.fdi"
openrc_services="hal default"
triggers="openrc-service"

Add_dependency full glibc
Add_dependency full udev
Add_dependency full dbus
Add_dependency full dbus-glib
Add_dependency full expat
Add_dependency full bash
Add_dependency full hal-info
Add_dependency full eject
Add_dependency full PolicyKit
Add_dependency full ConsoleKit
Add_dependency full pciutils
Add_dependency full usbutils
Add_dependency full dmidecode
Add_dependency build pkg-config
Add_dependency build libsmbios
Add_dependency run libsmbios-utils
Add_dependency run OpenRC

post_install()
{
	rm -rf ${DESTDIR}/var
	install -D -m755 ${FILESDIR}/hal.rc ${DESTDIR}/etc/init.d/hal
	install -D -m644 ${FILESDIR}/10-keymap.fdi \
		${DESTDIR}/etc/hal/fdi/policy/10-keymap.fdi
}
