# Template file for 'cracklib'
pkgname=cracklib
version=2.8.13
distfiles="$SOURCEFORGE_SITE/cracklib/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--without-python"
make_install_target="DESTDIR=$XBPS_DESTDIR/$pkgname-$version install"
short_desc="Password Checking Library"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=0a06caff3626c397d023f0c19efedfea295180c2c5ba2def57016a17e158041a
long_desc="
 cracklib is a password checking library. It can check a given password
 against a dictionary file to find weak passwords (vulnerable to
 dictionary attacks)."

run_depends="glibc-2.8 zlib-1.2.3"

post_install()
{
	local destdir=$XBPS_DESTDIR/$pkgname-$version

	# Create default small wordlist.
	cd $wrksrc || exit 1
	install -v -D dicts/cracklib-small \
		$destdir/usr/share/dict/cracklib-small
	sh ./util/cracklib-format dicts/cracklib-small \
		| sh ./util/cracklib-packer $destdir/usr/share/cracklib/pw_dict
}
