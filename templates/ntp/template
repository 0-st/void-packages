# Template file for 'ntp'
pkgname=ntp
sourcepkg=ntp
version=4.2.4p6
distfiles="http://archive.ntp.org/ntp4/$pkgname-$version.tar.gz"
build_style=gnu_configure
configure_args="--enable-linuxcaps --enable-getifaddrs=glibc
 --enable-all-clocks --enable-parse-clocks --with-crypto=openssl
 --enable-accurate-adjtime --without-rpath --mandir=/usr/share/man
 --enable-ipv6"
make_install_target="DESTDIR=$XBPS_DESTDIR/$pkgname-$version install"
short_desc="The Network Time Protocol"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=647640067c7c6a4c568af54c139ce07bbf9f69b54bf9be2704b4c99c56651067
long_desc="
 The Network Time Protocol (NTP) is used to synchronize a computer's
 time with another reference time source. This package includes ntpd
 (a daemon which continuously adjusts system time) and utilities used
 to query and configure the ntpd daemon."

subpackages="perl"

Add_dependency full glibc
Add_dependency full openssl

post_install()
{
	install -d ${DESTDIR}/etc/rc.d
	install -d ${DESTDIR}/usr/share/ntp
	install -d ${DESTDIR}/usr/share/doc/ntp
	install -m 755 ${FILESDIR}/ntpd ${DESTDIR}/etc/rc.d/ntpd
	install -m 755 ${FILESDIR}/ntpdate ${DESTDIR}/etc/rc.d/ntpdate
	install -m 644 ${FILESDIR}/ntp.conf ${DESTDIR}/etc/ntp.conf
	cp -a ${wrksrc}/html ${DESTDIR}/usr/share/doc/ntp
	cp -a ${wrksrc}/conf ${DESTDIR}/usr/share/ntp
}
