# Template file for 'cronie'
pkgname=cronie
version=1.3
revision=1
distfiles="http://mmaslano.fedorapeople.org/cronie/cronie-$version.tar.gz"
build_style=gnu_configure
configure_args="--with-inotify --without-selinux --with-pam
 --with-daemon_username=nobody --with-daemon_groupname=nobody"
short_desc="Runs specified programs at scheduled times"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=78863d3080d12bdc275408c3c4e21e92472608abdea1c6b628abd24429d34ded
long_desc="
 Cronie contains the standard UNIX daemon crond that runs specified programs at
 scheduled times and related tools. It is based on the original cron and
 has security and configuration enhancements like the ability to use PAM and
 SELinux."

conf_files="/etc/crontab"

Add_dependency full glibc
Add_dependency full pam
Add_dependency full run-parts

post_install()
{
	install -d ${DESTDIR}/etc/cron.d
	install -d ${DESTDIR}/etc/cron.hourly
	install -d ${DESTDIR}/etc/cron.daily
	install -d ${DESTDIR}/etc/cron.weekly
	install -d ${DESTDIR}/etc/cron.monthly
	install -d -m755 ${DESTDIR}/var/spool/cron

	install -D -m755 ${FILESDIR}/crond.rc ${DESTDIR}/etc/init.d/crond
	install -D -m644 ${FILESDIR}/crontab ${DESTDIR}/etc/crontab

	# Add /etc/cron.deny empty, to allow all users.
	touch ${DESTDIR}/etc/cron.deny
	chmod 644 ${DESTDIR}/etc/cron.deny
}
