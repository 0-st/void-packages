# Template file for 'udev'
pkgname=udev
version=139
distfiles="
http://www.kernel.org/pub/linux/utils/kernel/hotplug/udev-${version}.tar.bz2"
build_style=gnu_configure
configure_args="--exec-prefix= --without-selinux"
short_desc="A userspace implementation of devfs"
maintainer="Juan RP <xtraeme@gmail.com>"
checksum=6786a896146b12323d0ef31601dc23b6e5501762d7d61c475d09e405494c21df
long_desc="
 udev is a implementation of devfs in userspace using sysfs and
 /sbin/hotplug. It requires a 2.5/2.6 kernel to run properly."

Add_dependency full glibc
Add_dependency full procps

post_install()
{
	install -d $DESTDIR/lib/firmware
	install -d $DESTDIR/lib/udev/devices/pts
	install -d $DESTDIR/lib/udev/devices/shm
	mknod -m0666 $DESTDIR/lib/udev/devices/null c 1 3
	mknod -m0600 $DESTDIR/lib/udev/devices/kmsg c 1 11
	ln -s /proc/self/fd $DESTDIR/lib/udev/devices/fd
	ln -s /proc/self/fd/0 $DESTDIR/lib/udev/devices/stdin
	ln -s /proc/self/fd/1 $DESTDIR/lib/udev/devices/stdout
	ln -s /proc/self/fd/2 $DESTDIR/lib/udev/devices/stderr
	ln -s /proc/kcore $DESTDIR/lib/udev/devices/core
}
