#!/bin/sh
#
# PROVIDE: sysclock
# REQUIRE: SERVERS swap

$_rc_subr_loaded . /etc/rc.subr

name="sysclock"
start_cmd="sysclock_start"
stop_cmd=":"

sysclock_start()
{
	echo -n "=> Configuring system clock... "
	[ ! -d /var/lib/hwclock ] && mkdir -p /var/lib/hwclock
	if [ ! -f /var/lib/hwclock/adjtime ]; then
        	echo "0.0 0 0.0" > /var/lib/hwclock/adjtime
	fi
	if [ "$TIMEZONE" != "" -a -e "/usr/share/zoneinfo/$TIMEZONE" ]; then
        	rm -f /etc/localtime
        	cp "/usr/share/zoneinfo/$TIMEZONE" /etc/localtime
	fi

	hwclock $HWCLOCK_PARAMS 2>&1 >/dev/null
	show_rval
}

load_rc_config $name
run_rc_command "$1"
